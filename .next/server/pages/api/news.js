"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/news";
exports.ids = ["pages/api/news"];
exports.modules = {

/***/ "fs-extra":
/*!***************************!*\
  !*** external "fs-extra" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("fs-extra");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_news_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/news/index.js */ \"(api)/./pages/api/news/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_news_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_news_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/news\",\n        pathname: \"/api/news\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_news_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5ld3MmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRm5ld3MlMkZpbmRleC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNzRDtBQUN0RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMscURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL211c2xpbS1uZXdzLWFnZ3JlZ2F0b3IvPzE1NjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9uZXdzL2luZGV4LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbmV3c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25ld3NcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/data/seed-articles.js":
/*!***********************************!*\
  !*** ./lib/data/seed-articles.js ***!
  \***********************************/
/***/ ((module) => {

eval("// Sample Islamic news articles to seed the database\n// This ensures the website always has content even when scraping fails\n\nconst SEED_ARTICLES = [\n    {\n        id: 1,\n        title: \"New Islamic Center Opens in Downtown Area to Serve Growing Muslim Community\",\n        content: `A state-of-the-art Islamic center has officially opened its doors in the downtown area, marking a significant milestone for the local Muslim community. The 15,000 square foot facility features a main prayer hall that can accommodate up to 800 worshippers, separate prayer areas for men and women, and dedicated spaces for educational programs.\n\nThe center, which took three years to complete, was funded entirely through community donations and represents the collective effort of over 500 Muslim families in the region. \"This center is not just a place of worship, but a hub for community engagement, education, and interfaith dialogue,\" said Imam Abdullah Rahman, who will serve as the center's spiritual leader.\n\nThe facility includes a library with Islamic texts in multiple languages, classrooms for weekend Islamic school programs, and a community hall for events and gatherings. The center also plans to offer Arabic language classes, Quran study circles, and youth programs to serve the diverse needs of the Muslim community.\n\nLocal officials attended the opening ceremony, emphasizing the importance of religious diversity and community inclusion. The mayor praised the Muslim community's contributions to the city and welcomed the new center as a valuable addition to the neighborhood.\n\nThe Islamic center will also serve as a resource for interfaith understanding, with plans to host open houses and educational events for the broader community.`,\n        summary: \"A new Islamic center opens downtown with facilities for 800 worshippers, educational programs, and community engagement activities, funded by local Muslim families.\",\n        url: \"https://muslimhub.com/news/new-islamic-center-opens-downtown\",\n        imageUrl: \"https://images.unsplash.com/photo-1564769662454-4915344f0e07?w=800\",\n        category: \"Community\",\n        publishedAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Muslim Community News\",\n        sourceUrl: \"https://muslimhub.com\",\n        sourceRegion: \"North America\",\n        sourceLogo: null,\n        importance: 7,\n        countries: JSON.stringify([\n            \"United States\"\n        ]),\n        tags: JSON.stringify([\n            \"community\",\n            \"mosque\",\n            \"islamic center\",\n            \"interfaith\"\n        ])\n    },\n    {\n        id: 2,\n        title: \"International Conference on Islamic Finance Concludes with New Global Standards\",\n        content: `The 15th International Conference on Islamic Finance concluded in Dubai with the announcement of new global standards for Sharia-compliant banking and investment practices. Over 500 delegates from 40 countries participated in the three-day conference, which focused on sustainable finance, fintech innovations, and regulatory frameworks.\n\nThe conference, organized by the Islamic Development Bank and the UAE Central Bank, brought together leading Islamic finance scholars, banking executives, and regulatory officials to discuss the future of the industry. Key topics included the integration of environmental, social, and governance (ESG) principles with Islamic finance, the role of technology in enhancing Sharia compliance, and strategies for expanding Islamic finance to new markets.\n\nDr. Fatima Al-Zahra, a prominent Islamic finance scholar, presented research showing that Islamic banks have demonstrated greater resilience during economic downturns compared to conventional banks. \"The principles of risk-sharing and asset-backing inherent in Islamic finance provide natural stability mechanisms,\" she explained.\n\nThe conference also featured the launch of several new financial products, including green sukuk (Islamic bonds) for renewable energy projects and digital Islamic banking platforms designed to serve younger Muslim consumers. Industry leaders emphasized the importance of innovation while maintaining strict adherence to Islamic principles.\n\nThe final declaration called for increased cooperation between Islamic financial institutions globally and the development of standardized training programs for Islamic finance professionals.`,\n        summary: \"The International Conference on Islamic Finance in Dubai sets new global standards for Sharia-compliant banking, with focus on sustainability and fintech innovations.\",\n        url: \"https://islamicfinancetoday.com/conference-2024-dubai\",\n        imageUrl: \"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=800\",\n        category: \"Economics\",\n        publishedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Islamic Finance Today\",\n        sourceUrl: \"https://islamicfinancetoday.com\",\n        sourceRegion: \"Middle East\",\n        sourceLogo: null,\n        importance: 8,\n        countries: JSON.stringify([\n            \"UAE\",\n            \"Global\"\n        ]),\n        tags: JSON.stringify([\n            \"islamic finance\",\n            \"banking\",\n            \"sharia compliance\",\n            \"dubai\",\n            \"conference\"\n        ])\n    },\n    {\n        id: 3,\n        title: \"Young Muslim Inventor Wins International Science Award for Clean Water Innovation\",\n        content: `Aisha Mohammad, a 17-year-old Muslim student from Bangladesh, has won the prestigious International Young Scientist Award for her innovative water purification system that uses locally available materials to provide clean drinking water to rural communities.\n\nHer invention, called \"AquaPure,\" combines traditional Islamic scientific principles with modern engineering to create an affordable filtration system that can purify contaminated water using clay, sand, and activated charcoal. The system can produce up to 20 liters of clean water per hour and costs less than $50 to build.\n\n\"I was inspired by the Islamic principle that access to clean water is a fundamental human right,\" said Aisha during the award ceremony in Stockholm. \"I wanted to create something that could help communities in my country and around the world have access to safe drinking water.\"\n\nThe young inventor's work has already been implemented in 15 villages across Bangladesh, benefiting over 3,000 people. International NGOs have expressed interest in scaling the technology to other developing countries facing water scarcity issues.\n\nAisha's achievement has been celebrated throughout the Muslim world, with Islamic scholars praising her work as an example of how Islamic values of helping others can drive scientific innovation. She plans to use her prize money to further develop the technology and establish a foundation to provide clean water solutions to disadvantaged communities.\n\nThe award committee noted that Aisha's invention represents the perfect blend of traditional knowledge and modern science, embodying the Islamic emphasis on beneficial knowledge ('ilm nafi') that serves humanity.`,\n        summary: \"17-year-old Muslim inventor from Bangladesh wins international award for innovative water purification system that serves rural communities using Islamic scientific principles.\",\n        url: \"https://muslimscientists.org/young-inventor-water-award\",\n        imageUrl: \"https://images.unsplash.com/photo-1582719471384-894fbb16e074?w=800\",\n        category: \"Technology\",\n        publishedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Muslim Scientists Network\",\n        sourceUrl: \"https://muslimscientists.org\",\n        sourceRegion: \"Asia\",\n        sourceLogo: null,\n        importance: 9,\n        countries: JSON.stringify([\n            \"Bangladesh\",\n            \"Sweden\"\n        ]),\n        tags: JSON.stringify([\n            \"innovation\",\n            \"science\",\n            \"water\",\n            \"youth\",\n            \"award\",\n            \"technology\"\n        ])\n    },\n    {\n        id: 4,\n        title: \"Ramadan Food Distribution Program Reaches Record Numbers in Major Cities\",\n        content: `Muslim organizations across major cities have reported record-breaking participation in their Ramadan food distribution programs, with over 2 million meals provided to families in need during the holy month. The programs, coordinated by local mosques and Islamic charities, have expanded significantly compared to previous years.\n\nIn New York City alone, the Islamic Society has distributed over 150,000 meals to both Muslim and non-Muslim families facing food insecurity. \"The spirit of Ramadan is about compassion and helping those in need, regardless of their faith,\" explained Dr. Omar Hassan, director of the city's largest Islamic charity.\n\nThe programs have received support from local governments and interfaith organizations, highlighting the positive impact of Muslim community engagement. Volunteers from various backgrounds have joined the effort, creating opportunities for cross-community collaboration and understanding.\n\nIn London, the Islamic Council has partnered with food banks and homeless shelters to ensure that nutritious meals reach the most vulnerable populations. The program includes both traditional iftar meals for breaking the fast and regular food packages for families throughout the month.\n\nSimilar initiatives in Detroit, Toronto, Sydney, and other cities with significant Muslim populations have seen unprecedented community support. Many programs have also adapted to serve communities affected by economic challenges, natural disasters, and global conflicts.\n\nThe success of these programs has been attributed to increased community organization, social media outreach, and growing awareness of the Islamic principle of Zakat (charitable giving) among younger Muslims.`,\n        summary: \"Muslim organizations worldwide distribute record 2 million meals during Ramadan, partnering with local governments and interfaith groups to serve communities in need.\",\n        url: \"https://islamiccharity.org/ramadan-food-distribution-2024\",\n        imageUrl: \"https://images.unsplash.com/photo-1593113616828-6f22bca04804?w=800\",\n        category: \"Community\",\n        publishedAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Islamic Charity Network\",\n        sourceUrl: \"https://islamiccharity.org\",\n        sourceRegion: \"Global\",\n        sourceLogo: null,\n        importance: 8,\n        countries: JSON.stringify([\n            \"United States\",\n            \"United Kingdom\",\n            \"Canada\",\n            \"Australia\"\n        ]),\n        tags: JSON.stringify([\n            \"ramadan\",\n            \"charity\",\n            \"food distribution\",\n            \"community service\",\n            \"interfaith\"\n        ])\n    },\n    {\n        id: 5,\n        title: \"Historic Manuscript Collection Digitized to Preserve Islamic Heritage\",\n        content: `A major digitization project has successfully preserved over 10,000 historic Islamic manuscripts, making them accessible to researchers and students worldwide through an online portal. The three-year project, funded by UNESCO and several Islamic foundations, focused on manuscripts from libraries in Cairo, Istanbul, Cordoba, and Baghdad.\n\nThe collection includes rare works on Islamic jurisprudence, philosophy, medicine, astronomy, and mathematics dating from the 8th to 16th centuries. Many of these manuscripts were previously accessible only to a small number of scholars and were at risk of deterioration due to age and environmental factors.\n\nDr. Leila Boumediene, the project's lead coordinator, emphasized the global significance of the initiative: \"These manuscripts represent the intellectual legacy of Islamic civilization and contain knowledge that contributed to human advancement in countless fields. By digitizing them, we ensure that future generations can access and learn from this invaluable heritage.\"\n\nThe digitization process involved high-resolution scanning, detailed cataloging, and the creation of searchable databases in multiple languages. Advanced preservation techniques were used to handle the delicate manuscripts while creating digital copies that maintain the original documents' visual and textual integrity.\n\nScholars have already begun using the digital collection for research projects, discovering new insights into medieval Islamic thought and its influence on global intellectual development. The portal includes translation tools and scholarly annotations to make the texts accessible to non-Arabic speakers.\n\nThe project has been praised by international academic institutions and has sparked renewed interest in Islamic studies programs at universities worldwide.`,\n        summary: \"UNESCO-funded project digitizes 10,000 historic Islamic manuscripts from major libraries, making invaluable Islamic heritage accessible to global researchers and students.\",\n        url: \"https://islamicheritage.org/manuscript-digitization-complete\",\n        imageUrl: \"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=800\",\n        category: \"Culture\",\n        publishedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Islamic Heritage Foundation\",\n        sourceUrl: \"https://islamicheritage.org\",\n        sourceRegion: \"Global\",\n        sourceLogo: null,\n        importance: 9,\n        countries: JSON.stringify([\n            \"Egypt\",\n            \"Turkey\",\n            \"Spain\",\n            \"Iraq\"\n        ]),\n        tags: JSON.stringify([\n            \"heritage\",\n            \"manuscripts\",\n            \"digitization\",\n            \"unesco\",\n            \"culture\",\n            \"preservation\"\n        ])\n    },\n    {\n        id: 6,\n        title: \"Muslim Medical Association Launches Global Health Initiative for Underserved Communities\",\n        content: `The International Muslim Medical Association has launched a comprehensive global health initiative aimed at providing medical care and health education to underserved Muslim communities worldwide. The program, called \"Health for All,\" will establish medical clinics, training centers, and mobile health units in 25 countries over the next five years.\n\nThe initiative addresses critical health disparities affecting Muslim populations in refugee camps, rural areas, and urban centers lacking adequate healthcare infrastructure. The program emphasizes preventive care, maternal health, child nutrition, and the treatment of communicable diseases.\n\nDr. Fatima Al-Rashid, the association's president, announced that the first phase will focus on establishing permanent clinics in refugee settlements in Jordan, Lebanon, and Bangladesh, serving over 100,000 displaced persons. \"Healthcare is a fundamental human right in Islam, and we have a religious obligation to serve those most in need,\" she stated.\n\nThe program incorporates Islamic principles of healthcare, including the integration of spiritual care with medical treatment and the training of local community health workers. It also emphasizes the importance of culturally sensitive care that respects Islamic values and practices.\n\nFunding for the initiative comes from Zakat contributions, Islamic charitable foundations, and partnerships with international health organizations. The World Health Organization has endorsed the program and provided technical support for its implementation.\n\nMedical professionals from around the world have volunteered to participate, with over 500 Muslim doctors, nurses, and healthcare workers already registered to serve in various locations.`,\n        summary: \"International Muslim Medical Association launches global health initiative to serve underserved communities, establishing clinics in 25 countries with focus on refugee populations.\",\n        url: \"https://muslimmedics.org/global-health-initiative-launch\",\n        imageUrl: \"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=800\",\n        category: \"Health\",\n        publishedAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Muslim Medical Today\",\n        sourceUrl: \"https://muslimmedics.org\",\n        sourceRegion: \"Global\",\n        sourceLogo: null,\n        importance: 8,\n        countries: JSON.stringify([\n            \"Jordan\",\n            \"Lebanon\",\n            \"Bangladesh\",\n            \"Global\"\n        ]),\n        tags: JSON.stringify([\n            \"healthcare\",\n            \"medical\",\n            \"charity\",\n            \"refugees\",\n            \"global health\",\n            \"muslim doctors\"\n        ])\n    },\n    {\n        id: 7,\n        title: \"Islamic Art Exhibition Breaks Attendance Records at Metropolitan Museum\",\n        content: `The Metropolitan Museum of Art's groundbreaking exhibition \"Islamic Civilizations: Art, Science, and Culture\" has broken attendance records, with over 500,000 visitors in its first six months. The exhibition, which runs until the end of the year, showcases 1,000 years of Islamic artistic and intellectual achievement.\n\nThe exhibition features over 300 objects from the museum's collection and loans from institutions worldwide, including calligraphy, textiles, scientific instruments, architectural elements, and illuminated manuscripts. Interactive displays allow visitors to explore the connections between Islamic art and contemporary creative expressions.\n\n\"This exhibition challenges many misconceptions about Islamic culture and highlights its profound contributions to world civilization,\" said Dr. Sarah Ahmed, the exhibition's chief curator. \"Visitors are amazed to learn about the Islamic roots of many scientific and artistic innovations we take for granted today.\"\n\nThe exhibition has been particularly popular among school groups, with special educational programs designed to teach students about Islamic contributions to mathematics, astronomy, medicine, and architecture. Many visitors have expressed surprise at the diversity and sophistication of Islamic artistic traditions.\n\nCommunity response has been overwhelmingly positive, with Muslim organizations praising the respectful and comprehensive presentation of Islamic culture. The exhibition has also fostered increased dialogue between Muslim and non-Muslim communities in New York.\n\nPlans are underway to create a traveling version of the exhibition that will visit museums across the United States and internationally, extending its educational impact to broader audiences.`,\n        summary: \"Metropolitan Museum's Islamic art exhibition breaks attendance records with 500,000 visitors, showcasing 1,000 years of Islamic artistic and intellectual contributions.\",\n        url: \"https://artandislam.org/met-exhibition-success\",\n        imageUrl: \"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800\",\n        category: \"Culture\",\n        publishedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Art & Islam Today\",\n        sourceUrl: \"https://artandislam.org\",\n        sourceRegion: \"North America\",\n        sourceLogo: null,\n        importance: 7,\n        countries: JSON.stringify([\n            \"United States\"\n        ]),\n        tags: JSON.stringify([\n            \"art\",\n            \"exhibition\",\n            \"culture\",\n            \"museum\",\n            \"education\",\n            \"islamic civilization\"\n        ])\n    },\n    {\n        id: 8,\n        title: \"Muslim Student Athletes Excel in International University Games\",\n        content: `Muslim student athletes from around the world have achieved remarkable success at the International University Games, winning medals across multiple sports while maintaining their religious practices and obligations. The games, held in Italy, featured over 8,000 athletes from 165 countries.\n\nNotable achievements include gold medals won by Zeinab Hassan (Egypt) in taekwondo, Ahmed Al-Mansouri (UAE) in swimming, and the Malaysian women's badminton team. These athletes have become role models for young Muslims, demonstrating that excellence in sports is compatible with Islamic values and practices.\n\nThe games featured special accommodations for Muslim athletes, including prayer facilities, halal food options, and adjusted training schedules during prayer times. This inclusive approach has been praised by the International University Sports Federation and has set a precedent for future international sporting events.\n\n\"Representing my country and my faith on this international stage is an incredible honor,\" said gold medalist Zeinab Hassan. \"I hope to inspire other young Muslim women to pursue their dreams in sports while staying true to their beliefs and values.\"\n\nThe success of Muslim athletes has been celebrated across the Islamic world, with many receiving hero's welcomes upon returning to their home countries. Sports commentators have noted the increasing visibility and success of Muslim athletes in international competitions.\n\nSeveral athletes have announced plans to use their platforms to promote youth sports programs in their communities and to advocate for greater inclusion and understanding in international sports.`,\n        summary: \"Muslim student athletes achieve remarkable success at International University Games, winning multiple medals while maintaining religious practices and inspiring youth.\",\n        url: \"https://muslimathletesnews.com/university-games-success\",\n        imageUrl: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800\",\n        category: \"Sports\",\n        publishedAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),\n        scrapedAt: new Date().toISOString(),\n        sourceName: \"Muslim Athletes News\",\n        sourceUrl: \"https://muslimathletesnews.com\",\n        sourceRegion: \"Global\",\n        sourceLogo: null,\n        importance: 6,\n        countries: JSON.stringify([\n            \"Italy\",\n            \"Egypt\",\n            \"UAE\",\n            \"Malaysia\"\n        ]),\n        tags: JSON.stringify([\n            \"sports\",\n            \"athletes\",\n            \"university games\",\n            \"muslim youth\",\n            \"international competition\"\n        ])\n    }\n];\nmodule.exports = {\n    SEED_ARTICLES\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YS9zZWVkLWFydGljbGVzLmpzIiwibWFwcGluZ3MiOiJBQUFBLG9EQUFvRDtBQUNwRCx1RUFBdUU7O0FBRXZFLE1BQU1BLGdCQUFnQjtJQUNwQjtRQUNFQyxJQUFJO1FBQ0pDLE9BQU87UUFDUEMsU0FBUyxDQUFDOzs7Ozs7OzsrSkFRaUosQ0FBQztRQUM1SkMsU0FBUztRQUNUQyxLQUFLO1FBQ0xDLFVBQVU7UUFDVkMsVUFBVTtRQUNWQyxhQUFhLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ25FQyxXQUFXLElBQUlILE9BQU9FLFdBQVc7UUFDakNFLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxjQUFjO1FBQ2RDLFlBQVk7UUFDWkMsWUFBWTtRQUNaQyxXQUFXQyxLQUFLQyxTQUFTLENBQUM7WUFBQztTQUFnQjtRQUMzQ0MsTUFBTUYsS0FBS0MsU0FBUyxDQUFDO1lBQUM7WUFBYTtZQUFVO1lBQWtCO1NBQWE7SUFDOUU7SUFFQTtRQUNFbkIsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLFNBQVMsQ0FBQzs7Ozs7Ozs7K0xBUWlMLENBQUM7UUFDNUxDLFNBQVM7UUFDVEMsS0FBSztRQUNMQyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsYUFBYSxJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSyxNQUFNQyxXQUFXO1FBQ3ZFQyxXQUFXLElBQUlILE9BQU9FLFdBQVc7UUFDakNFLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxjQUFjO1FBQ2RDLFlBQVk7UUFDWkMsWUFBWTtRQUNaQyxXQUFXQyxLQUFLQyxTQUFTLENBQUM7WUFBQztZQUFPO1NBQVM7UUFDM0NDLE1BQU1GLEtBQUtDLFNBQVMsQ0FBQztZQUFDO1lBQW1CO1lBQVc7WUFBcUI7WUFBUztTQUFhO0lBQ2pHO0lBRUE7UUFDRW5CLElBQUk7UUFDSkMsT0FBTztRQUNQQyxTQUFTLENBQUM7Ozs7Ozs7Ozs7b05B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QUFNRixLQUFLQyxTQUFTLENBQUM7WUFBQztZQUFPO1lBQWM7WUFBVztZQUFVO1lBQWE7U0FBdUI7SUFDdEc7SUFFQTtRQUNFbkIsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLFNBQVMsQ0FBQzs7Ozs7Ozs7OzttTUFVcUwsQ0FBQztRQUNoTUMsU0FBUztRQUNUQyxLQUFLO1FBQ0xDLFVBQVU7UUFDVkMsVUFBVTtRQUNWQyxhQUFhLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLE1BQU1DLFdBQVc7UUFDdkVDLFdBQVcsSUFBSUgsT0FBT0UsV0FBVztRQUNqQ0UsWUFBWTtRQUNaQyxXQUFXO1FBQ1hDLGNBQWM7UUFDZEMsWUFBWTtRQUNaQyxZQUFZO1FBQ1pDLFdBQVdDLEtBQUtDLFNBQVMsQ0FBQztZQUFDO1lBQVM7WUFBUztZQUFPO1NBQVc7UUFDL0RDLE1BQU1GLEtBQUtDLFNBQVMsQ0FBQztZQUFDO1lBQVU7WUFBWTtZQUFvQjtZQUFnQjtTQUE0QjtJQUM5RztDQUNEO0FBRURFLE9BQU9DLE9BQU8sR0FBRztJQUNmdkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL211c2xpbS1uZXdzLWFnZ3JlZ2F0b3IvLi9saWIvZGF0YS9zZWVkLWFydGljbGVzLmpzPzFkYzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2FtcGxlIElzbGFtaWMgbmV3cyBhcnRpY2xlcyB0byBzZWVkIHRoZSBkYXRhYmFzZVxuLy8gVGhpcyBlbnN1cmVzIHRoZSB3ZWJzaXRlIGFsd2F5cyBoYXMgY29udGVudCBldmVuIHdoZW4gc2NyYXBpbmcgZmFpbHNcblxuY29uc3QgU0VFRF9BUlRJQ0xFUyA9IFtcbiAge1xuICAgIGlkOiAxLFxuICAgIHRpdGxlOiBcIk5ldyBJc2xhbWljIENlbnRlciBPcGVucyBpbiBEb3dudG93biBBcmVhIHRvIFNlcnZlIEdyb3dpbmcgTXVzbGltIENvbW11bml0eVwiLFxuICAgIGNvbnRlbnQ6IGBBIHN0YXRlLW9mLXRoZS1hcnQgSXNsYW1pYyBjZW50ZXIgaGFzIG9mZmljaWFsbHkgb3BlbmVkIGl0cyBkb29ycyBpbiB0aGUgZG93bnRvd24gYXJlYSwgbWFya2luZyBhIHNpZ25pZmljYW50IG1pbGVzdG9uZSBmb3IgdGhlIGxvY2FsIE11c2xpbSBjb21tdW5pdHkuIFRoZSAxNSwwMDAgc3F1YXJlIGZvb3QgZmFjaWxpdHkgZmVhdHVyZXMgYSBtYWluIHByYXllciBoYWxsIHRoYXQgY2FuIGFjY29tbW9kYXRlIHVwIHRvIDgwMCB3b3JzaGlwcGVycywgc2VwYXJhdGUgcHJheWVyIGFyZWFzIGZvciBtZW4gYW5kIHdvbWVuLCBhbmQgZGVkaWNhdGVkIHNwYWNlcyBmb3IgZWR1Y2F0aW9uYWwgcHJvZ3JhbXMuXG5cblRoZSBjZW50ZXIsIHdoaWNoIHRvb2sgdGhyZWUgeWVhcnMgdG8gY29tcGxldGUsIHdhcyBmdW5kZWQgZW50aXJlbHkgdGhyb3VnaCBjb21tdW5pdHkgZG9uYXRpb25zIGFuZCByZXByZXNlbnRzIHRoZSBjb2xsZWN0aXZlIGVmZm9ydCBvZiBvdmVyIDUwMCBNdXNsaW0gZmFtaWxpZXMgaW4gdGhlIHJlZ2lvbi4gXCJUaGlzIGNlbnRlciBpcyBub3QganVzdCBhIHBsYWNlIG9mIHdvcnNoaXAsIGJ1dCBhIGh1YiBmb3IgY29tbXVuaXR5IGVuZ2FnZW1lbnQsIGVkdWNhdGlvbiwgYW5kIGludGVyZmFpdGggZGlhbG9ndWUsXCIgc2FpZCBJbWFtIEFiZHVsbGFoIFJhaG1hbiwgd2hvIHdpbGwgc2VydmUgYXMgdGhlIGNlbnRlcidzIHNwaXJpdHVhbCBsZWFkZXIuXG5cblRoZSBmYWNpbGl0eSBpbmNsdWRlcyBhIGxpYnJhcnkgd2l0aCBJc2xhbWljIHRleHRzIGluIG11bHRpcGxlIGxhbmd1YWdlcywgY2xhc3Nyb29tcyBmb3Igd2Vla2VuZCBJc2xhbWljIHNjaG9vbCBwcm9ncmFtcywgYW5kIGEgY29tbXVuaXR5IGhhbGwgZm9yIGV2ZW50cyBhbmQgZ2F0aGVyaW5ncy4gVGhlIGNlbnRlciBhbHNvIHBsYW5zIHRvIG9mZmVyIEFyYWJpYyBsYW5ndWFnZSBjbGFzc2VzLCBRdXJhbiBzdHVkeSBjaXJjbGVzLCBhbmQgeW91dGggcHJvZ3JhbXMgdG8gc2VydmUgdGhlIGRpdmVyc2UgbmVlZHMgb2YgdGhlIE11c2xpbSBjb21tdW5pdHkuXG5cbkxvY2FsIG9mZmljaWFscyBhdHRlbmRlZCB0aGUgb3BlbmluZyBjZXJlbW9ueSwgZW1waGFzaXppbmcgdGhlIGltcG9ydGFuY2Ugb2YgcmVsaWdpb3VzIGRpdmVyc2l0eSBhbmQgY29tbXVuaXR5IGluY2x1c2lvbi4gVGhlIG1heW9yIHByYWlzZWQgdGhlIE11c2xpbSBjb21tdW5pdHkncyBjb250cmlidXRpb25zIHRvIHRoZSBjaXR5IGFuZCB3ZWxjb21lZCB0aGUgbmV3IGNlbnRlciBhcyBhIHZhbHVhYmxlIGFkZGl0aW9uIHRvIHRoZSBuZWlnaGJvcmhvb2QuXG5cblRoZSBJc2xhbWljIGNlbnRlciB3aWxsIGFsc28gc2VydmUgYXMgYSByZXNvdXJjZSBmb3IgaW50ZXJmYWl0aCB1bmRlcnN0YW5kaW5nLCB3aXRoIHBsYW5zIHRvIGhvc3Qgb3BlbiBob3VzZXMgYW5kIGVkdWNhdGlvbmFsIGV2ZW50cyBmb3IgdGhlIGJyb2FkZXIgY29tbXVuaXR5LmAsXG4gICAgc3VtbWFyeTogXCJBIG5ldyBJc2xhbWljIGNlbnRlciBvcGVucyBkb3dudG93biB3aXRoIGZhY2lsaXRpZXMgZm9yIDgwMCB3b3JzaGlwcGVycywgZWR1Y2F0aW9uYWwgcHJvZ3JhbXMsIGFuZCBjb21tdW5pdHkgZW5nYWdlbWVudCBhY3Rpdml0aWVzLCBmdW5kZWQgYnkgbG9jYWwgTXVzbGltIGZhbWlsaWVzLlwiLFxuICAgIHVybDogXCJodHRwczovL211c2xpbWh1Yi5jb20vbmV3cy9uZXctaXNsYW1pYy1jZW50ZXItb3BlbnMtZG93bnRvd25cIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU2NDc2OTY2MjQ1NC00OTE1MzQ0ZjBlMDc/dz04MDBcIixcbiAgICBjYXRlZ29yeTogXCJDb21tdW5pdHlcIixcbiAgICBwdWJsaXNoZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDEgZGF5IGFnb1xuICAgIHNjcmFwZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNvdXJjZU5hbWU6IFwiTXVzbGltIENvbW11bml0eSBOZXdzXCIsXG4gICAgc291cmNlVXJsOiBcImh0dHBzOi8vbXVzbGltaHViLmNvbVwiLFxuICAgIHNvdXJjZVJlZ2lvbjogXCJOb3J0aCBBbWVyaWNhXCIsXG4gICAgc291cmNlTG9nbzogbnVsbCxcbiAgICBpbXBvcnRhbmNlOiA3LFxuICAgIGNvdW50cmllczogSlNPTi5zdHJpbmdpZnkoW1wiVW5pdGVkIFN0YXRlc1wiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wiY29tbXVuaXR5XCIsIFwibW9zcXVlXCIsIFwiaXNsYW1pYyBjZW50ZXJcIiwgXCJpbnRlcmZhaXRoXCJdKVxuICB9LFxuICBcbiAge1xuICAgIGlkOiAyLFxuICAgIHRpdGxlOiBcIkludGVybmF0aW9uYWwgQ29uZmVyZW5jZSBvbiBJc2xhbWljIEZpbmFuY2UgQ29uY2x1ZGVzIHdpdGggTmV3IEdsb2JhbCBTdGFuZGFyZHNcIixcbiAgICBjb250ZW50OiBgVGhlIDE1dGggSW50ZXJuYXRpb25hbCBDb25mZXJlbmNlIG9uIElzbGFtaWMgRmluYW5jZSBjb25jbHVkZWQgaW4gRHViYWkgd2l0aCB0aGUgYW5ub3VuY2VtZW50IG9mIG5ldyBnbG9iYWwgc3RhbmRhcmRzIGZvciBTaGFyaWEtY29tcGxpYW50IGJhbmtpbmcgYW5kIGludmVzdG1lbnQgcHJhY3RpY2VzLiBPdmVyIDUwMCBkZWxlZ2F0ZXMgZnJvbSA0MCBjb3VudHJpZXMgcGFydGljaXBhdGVkIGluIHRoZSB0aHJlZS1kYXkgY29uZmVyZW5jZSwgd2hpY2ggZm9jdXNlZCBvbiBzdXN0YWluYWJsZSBmaW5hbmNlLCBmaW50ZWNoIGlubm92YXRpb25zLCBhbmQgcmVndWxhdG9yeSBmcmFtZXdvcmtzLlxuXG5UaGUgY29uZmVyZW5jZSwgb3JnYW5pemVkIGJ5IHRoZSBJc2xhbWljIERldmVsb3BtZW50IEJhbmsgYW5kIHRoZSBVQUUgQ2VudHJhbCBCYW5rLCBicm91Z2h0IHRvZ2V0aGVyIGxlYWRpbmcgSXNsYW1pYyBmaW5hbmNlIHNjaG9sYXJzLCBiYW5raW5nIGV4ZWN1dGl2ZXMsIGFuZCByZWd1bGF0b3J5IG9mZmljaWFscyB0byBkaXNjdXNzIHRoZSBmdXR1cmUgb2YgdGhlIGluZHVzdHJ5LiBLZXkgdG9waWNzIGluY2x1ZGVkIHRoZSBpbnRlZ3JhdGlvbiBvZiBlbnZpcm9ubWVudGFsLCBzb2NpYWwsIGFuZCBnb3Zlcm5hbmNlIChFU0cpIHByaW5jaXBsZXMgd2l0aCBJc2xhbWljIGZpbmFuY2UsIHRoZSByb2xlIG9mIHRlY2hub2xvZ3kgaW4gZW5oYW5jaW5nIFNoYXJpYSBjb21wbGlhbmNlLCBhbmQgc3RyYXRlZ2llcyBmb3IgZXhwYW5kaW5nIElzbGFtaWMgZmluYW5jZSB0byBuZXcgbWFya2V0cy5cblxuRHIuIEZhdGltYSBBbC1aYWhyYSwgYSBwcm9taW5lbnQgSXNsYW1pYyBmaW5hbmNlIHNjaG9sYXIsIHByZXNlbnRlZCByZXNlYXJjaCBzaG93aW5nIHRoYXQgSXNsYW1pYyBiYW5rcyBoYXZlIGRlbW9uc3RyYXRlZCBncmVhdGVyIHJlc2lsaWVuY2UgZHVyaW5nIGVjb25vbWljIGRvd250dXJucyBjb21wYXJlZCB0byBjb252ZW50aW9uYWwgYmFua3MuIFwiVGhlIHByaW5jaXBsZXMgb2Ygcmlzay1zaGFyaW5nIGFuZCBhc3NldC1iYWNraW5nIGluaGVyZW50IGluIElzbGFtaWMgZmluYW5jZSBwcm92aWRlIG5hdHVyYWwgc3RhYmlsaXR5IG1lY2hhbmlzbXMsXCIgc2hlIGV4cGxhaW5lZC5cblxuVGhlIGNvbmZlcmVuY2UgYWxzbyBmZWF0dXJlZCB0aGUgbGF1bmNoIG9mIHNldmVyYWwgbmV3IGZpbmFuY2lhbCBwcm9kdWN0cywgaW5jbHVkaW5nIGdyZWVuIHN1a3VrIChJc2xhbWljIGJvbmRzKSBmb3IgcmVuZXdhYmxlIGVuZXJneSBwcm9qZWN0cyBhbmQgZGlnaXRhbCBJc2xhbWljIGJhbmtpbmcgcGxhdGZvcm1zIGRlc2lnbmVkIHRvIHNlcnZlIHlvdW5nZXIgTXVzbGltIGNvbnN1bWVycy4gSW5kdXN0cnkgbGVhZGVycyBlbXBoYXNpemVkIHRoZSBpbXBvcnRhbmNlIG9mIGlubm92YXRpb24gd2hpbGUgbWFpbnRhaW5pbmcgc3RyaWN0IGFkaGVyZW5jZSB0byBJc2xhbWljIHByaW5jaXBsZXMuXG5cblRoZSBmaW5hbCBkZWNsYXJhdGlvbiBjYWxsZWQgZm9yIGluY3JlYXNlZCBjb29wZXJhdGlvbiBiZXR3ZWVuIElzbGFtaWMgZmluYW5jaWFsIGluc3RpdHV0aW9ucyBnbG9iYWxseSBhbmQgdGhlIGRldmVsb3BtZW50IG9mIHN0YW5kYXJkaXplZCB0cmFpbmluZyBwcm9ncmFtcyBmb3IgSXNsYW1pYyBmaW5hbmNlIHByb2Zlc3Npb25hbHMuYCxcbiAgICBzdW1tYXJ5OiBcIlRoZSBJbnRlcm5hdGlvbmFsIENvbmZlcmVuY2Ugb24gSXNsYW1pYyBGaW5hbmNlIGluIER1YmFpIHNldHMgbmV3IGdsb2JhbCBzdGFuZGFyZHMgZm9yIFNoYXJpYS1jb21wbGlhbnQgYmFua2luZywgd2l0aCBmb2N1cyBvbiBzdXN0YWluYWJpbGl0eSBhbmQgZmludGVjaCBpbm5vdmF0aW9ucy5cIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9pc2xhbWljZmluYW5jZXRvZGF5LmNvbS9jb25mZXJlbmNlLTIwMjQtZHViYWlcIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1OTUyNjMyNC00Yjg3YjVlMzZlNDQ/dz04MDBcIixcbiAgICBjYXRlZ29yeTogXCJFY29ub21pY3NcIixcbiAgICBwdWJsaXNoZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDIgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyAyIGRheXMgYWdvXG4gICAgc2NyYXBlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgc291cmNlTmFtZTogXCJJc2xhbWljIEZpbmFuY2UgVG9kYXlcIixcbiAgICBzb3VyY2VVcmw6IFwiaHR0cHM6Ly9pc2xhbWljZmluYW5jZXRvZGF5LmNvbVwiLFxuICAgIHNvdXJjZVJlZ2lvbjogXCJNaWRkbGUgRWFzdFwiLFxuICAgIHNvdXJjZUxvZ286IG51bGwsXG4gICAgaW1wb3J0YW5jZTogOCxcbiAgICBjb3VudHJpZXM6IEpTT04uc3RyaW5naWZ5KFtcIlVBRVwiLCBcIkdsb2JhbFwiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wiaXNsYW1pYyBmaW5hbmNlXCIsIFwiYmFua2luZ1wiLCBcInNoYXJpYSBjb21wbGlhbmNlXCIsIFwiZHViYWlcIiwgXCJjb25mZXJlbmNlXCJdKVxuICB9LFxuXG4gIHtcbiAgICBpZDogMyxcbiAgICB0aXRsZTogXCJZb3VuZyBNdXNsaW0gSW52ZW50b3IgV2lucyBJbnRlcm5hdGlvbmFsIFNjaWVuY2UgQXdhcmQgZm9yIENsZWFuIFdhdGVyIElubm92YXRpb25cIixcbiAgICBjb250ZW50OiBgQWlzaGEgTW9oYW1tYWQsIGEgMTcteWVhci1vbGQgTXVzbGltIHN0dWRlbnQgZnJvbSBCYW5nbGFkZXNoLCBoYXMgd29uIHRoZSBwcmVzdGlnaW91cyBJbnRlcm5hdGlvbmFsIFlvdW5nIFNjaWVudGlzdCBBd2FyZCBmb3IgaGVyIGlubm92YXRpdmUgd2F0ZXIgcHVyaWZpY2F0aW9uIHN5c3RlbSB0aGF0IHVzZXMgbG9jYWxseSBhdmFpbGFibGUgbWF0ZXJpYWxzIHRvIHByb3ZpZGUgY2xlYW4gZHJpbmtpbmcgd2F0ZXIgdG8gcnVyYWwgY29tbXVuaXRpZXMuXG5cbkhlciBpbnZlbnRpb24sIGNhbGxlZCBcIkFxdWFQdXJlLFwiIGNvbWJpbmVzIHRyYWRpdGlvbmFsIElzbGFtaWMgc2NpZW50aWZpYyBwcmluY2lwbGVzIHdpdGggbW9kZXJuIGVuZ2luZWVyaW5nIHRvIGNyZWF0ZSBhbiBhZmZvcmRhYmxlIGZpbHRyYXRpb24gc3lzdGVtIHRoYXQgY2FuIHB1cmlmeSBjb250YW1pbmF0ZWQgd2F0ZXIgdXNpbmcgY2xheSwgc2FuZCwgYW5kIGFjdGl2YXRlZCBjaGFyY29hbC4gVGhlIHN5c3RlbSBjYW4gcHJvZHVjZSB1cCB0byAyMCBsaXRlcnMgb2YgY2xlYW4gd2F0ZXIgcGVyIGhvdXIgYW5kIGNvc3RzIGxlc3MgdGhhbiAkNTAgdG8gYnVpbGQuXG5cblwiSSB3YXMgaW5zcGlyZWQgYnkgdGhlIElzbGFtaWMgcHJpbmNpcGxlIHRoYXQgYWNjZXNzIHRvIGNsZWFuIHdhdGVyIGlzIGEgZnVuZGFtZW50YWwgaHVtYW4gcmlnaHQsXCIgc2FpZCBBaXNoYSBkdXJpbmcgdGhlIGF3YXJkIGNlcmVtb255IGluIFN0b2NraG9sbS4gXCJJIHdhbnRlZCB0byBjcmVhdGUgc29tZXRoaW5nIHRoYXQgY291bGQgaGVscCBjb21tdW5pdGllcyBpbiBteSBjb3VudHJ5IGFuZCBhcm91bmQgdGhlIHdvcmxkIGhhdmUgYWNjZXNzIHRvIHNhZmUgZHJpbmtpbmcgd2F0ZXIuXCJcblxuVGhlIHlvdW5nIGludmVudG9yJ3Mgd29yayBoYXMgYWxyZWFkeSBiZWVuIGltcGxlbWVudGVkIGluIDE1IHZpbGxhZ2VzIGFjcm9zcyBCYW5nbGFkZXNoLCBiZW5lZml0aW5nIG92ZXIgMywwMDAgcGVvcGxlLiBJbnRlcm5hdGlvbmFsIE5HT3MgaGF2ZSBleHByZXNzZWQgaW50ZXJlc3QgaW4gc2NhbGluZyB0aGUgdGVjaG5vbG9neSB0byBvdGhlciBkZXZlbG9waW5nIGNvdW50cmllcyBmYWNpbmcgd2F0ZXIgc2NhcmNpdHkgaXNzdWVzLlxuXG5BaXNoYSdzIGFjaGlldmVtZW50IGhhcyBiZWVuIGNlbGVicmF0ZWQgdGhyb3VnaG91dCB0aGUgTXVzbGltIHdvcmxkLCB3aXRoIElzbGFtaWMgc2Nob2xhcnMgcHJhaXNpbmcgaGVyIHdvcmsgYXMgYW4gZXhhbXBsZSBvZiBob3cgSXNsYW1pYyB2YWx1ZXMgb2YgaGVscGluZyBvdGhlcnMgY2FuIGRyaXZlIHNjaWVudGlmaWMgaW5ub3ZhdGlvbi4gU2hlIHBsYW5zIHRvIHVzZSBoZXIgcHJpemUgbW9uZXkgdG8gZnVydGhlciBkZXZlbG9wIHRoZSB0ZWNobm9sb2d5IGFuZCBlc3RhYmxpc2ggYSBmb3VuZGF0aW9uIHRvIHByb3ZpZGUgY2xlYW4gd2F0ZXIgc29sdXRpb25zIHRvIGRpc2FkdmFudGFnZWQgY29tbXVuaXRpZXMuXG5cblRoZSBhd2FyZCBjb21taXR0ZWUgbm90ZWQgdGhhdCBBaXNoYSdzIGludmVudGlvbiByZXByZXNlbnRzIHRoZSBwZXJmZWN0IGJsZW5kIG9mIHRyYWRpdGlvbmFsIGtub3dsZWRnZSBhbmQgbW9kZXJuIHNjaWVuY2UsIGVtYm9keWluZyB0aGUgSXNsYW1pYyBlbXBoYXNpcyBvbiBiZW5lZmljaWFsIGtub3dsZWRnZSAoJ2lsbSBuYWZpJykgdGhhdCBzZXJ2ZXMgaHVtYW5pdHkuYCxcbiAgICBzdW1tYXJ5OiBcIjE3LXllYXItb2xkIE11c2xpbSBpbnZlbnRvciBmcm9tIEJhbmdsYWRlc2ggd2lucyBpbnRlcm5hdGlvbmFsIGF3YXJkIGZvciBpbm5vdmF0aXZlIHdhdGVyIHB1cmlmaWNhdGlvbiBzeXN0ZW0gdGhhdCBzZXJ2ZXMgcnVyYWwgY29tbXVuaXRpZXMgdXNpbmcgSXNsYW1pYyBzY2llbnRpZmljIHByaW5jaXBsZXMuXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vbXVzbGltc2NpZW50aXN0cy5vcmcveW91bmctaW52ZW50b3Itd2F0ZXItYXdhcmRcIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4MjcxOTQ3MTM4NC04OTRmYmIxNmUwNzQ/dz04MDBcIixcbiAgICBjYXRlZ29yeTogXCJUZWNobm9sb2d5XCIsXG4gICAgcHVibGlzaGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMyBkYXlzIGFnb1xuICAgIHNjcmFwZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNvdXJjZU5hbWU6IFwiTXVzbGltIFNjaWVudGlzdHMgTmV0d29ya1wiLFxuICAgIHNvdXJjZVVybDogXCJodHRwczovL211c2xpbXNjaWVudGlzdHMub3JnXCIsXG4gICAgc291cmNlUmVnaW9uOiBcIkFzaWFcIixcbiAgICBzb3VyY2VMb2dvOiBudWxsLFxuICAgIGltcG9ydGFuY2U6IDksXG4gICAgY291bnRyaWVzOiBKU09OLnN0cmluZ2lmeShbXCJCYW5nbGFkZXNoXCIsIFwiU3dlZGVuXCJdKSxcbiAgICB0YWdzOiBKU09OLnN0cmluZ2lmeShbXCJpbm5vdmF0aW9uXCIsIFwic2NpZW5jZVwiLCBcIndhdGVyXCIsIFwieW91dGhcIiwgXCJhd2FyZFwiLCBcInRlY2hub2xvZ3lcIl0pXG4gIH0sXG5cbiAge1xuICAgIGlkOiA0LFxuICAgIHRpdGxlOiBcIlJhbWFkYW4gRm9vZCBEaXN0cmlidXRpb24gUHJvZ3JhbSBSZWFjaGVzIFJlY29yZCBOdW1iZXJzIGluIE1ham9yIENpdGllc1wiLFxuICAgIGNvbnRlbnQ6IGBNdXNsaW0gb3JnYW5pemF0aW9ucyBhY3Jvc3MgbWFqb3IgY2l0aWVzIGhhdmUgcmVwb3J0ZWQgcmVjb3JkLWJyZWFraW5nIHBhcnRpY2lwYXRpb24gaW4gdGhlaXIgUmFtYWRhbiBmb29kIGRpc3RyaWJ1dGlvbiBwcm9ncmFtcywgd2l0aCBvdmVyIDIgbWlsbGlvbiBtZWFscyBwcm92aWRlZCB0byBmYW1pbGllcyBpbiBuZWVkIGR1cmluZyB0aGUgaG9seSBtb250aC4gVGhlIHByb2dyYW1zLCBjb29yZGluYXRlZCBieSBsb2NhbCBtb3NxdWVzIGFuZCBJc2xhbWljIGNoYXJpdGllcywgaGF2ZSBleHBhbmRlZCBzaWduaWZpY2FudGx5IGNvbXBhcmVkIHRvIHByZXZpb3VzIHllYXJzLlxuXG5JbiBOZXcgWW9yayBDaXR5IGFsb25lLCB0aGUgSXNsYW1pYyBTb2NpZXR5IGhhcyBkaXN0cmlidXRlZCBvdmVyIDE1MCwwMDAgbWVhbHMgdG8gYm90aCBNdXNsaW0gYW5kIG5vbi1NdXNsaW0gZmFtaWxpZXMgZmFjaW5nIGZvb2QgaW5zZWN1cml0eS4gXCJUaGUgc3Bpcml0IG9mIFJhbWFkYW4gaXMgYWJvdXQgY29tcGFzc2lvbiBhbmQgaGVscGluZyB0aG9zZSBpbiBuZWVkLCByZWdhcmRsZXNzIG9mIHRoZWlyIGZhaXRoLFwiIGV4cGxhaW5lZCBEci4gT21hciBIYXNzYW4sIGRpcmVjdG9yIG9mIHRoZSBjaXR5J3MgbGFyZ2VzdCBJc2xhbWljIGNoYXJpdHkuXG5cblRoZSBwcm9ncmFtcyBoYXZlIHJlY2VpdmVkIHN1cHBvcnQgZnJvbSBsb2NhbCBnb3Zlcm5tZW50cyBhbmQgaW50ZXJmYWl0aCBvcmdhbml6YXRpb25zLCBoaWdobGlnaHRpbmcgdGhlIHBvc2l0aXZlIGltcGFjdCBvZiBNdXNsaW0gY29tbXVuaXR5IGVuZ2FnZW1lbnQuIFZvbHVudGVlcnMgZnJvbSB2YXJpb3VzIGJhY2tncm91bmRzIGhhdmUgam9pbmVkIHRoZSBlZmZvcnQsIGNyZWF0aW5nIG9wcG9ydHVuaXRpZXMgZm9yIGNyb3NzLWNvbW11bml0eSBjb2xsYWJvcmF0aW9uIGFuZCB1bmRlcnN0YW5kaW5nLlxuXG5JbiBMb25kb24sIHRoZSBJc2xhbWljIENvdW5jaWwgaGFzIHBhcnRuZXJlZCB3aXRoIGZvb2QgYmFua3MgYW5kIGhvbWVsZXNzIHNoZWx0ZXJzIHRvIGVuc3VyZSB0aGF0IG51dHJpdGlvdXMgbWVhbHMgcmVhY2ggdGhlIG1vc3QgdnVsbmVyYWJsZSBwb3B1bGF0aW9ucy4gVGhlIHByb2dyYW0gaW5jbHVkZXMgYm90aCB0cmFkaXRpb25hbCBpZnRhciBtZWFscyBmb3IgYnJlYWtpbmcgdGhlIGZhc3QgYW5kIHJlZ3VsYXIgZm9vZCBwYWNrYWdlcyBmb3IgZmFtaWxpZXMgdGhyb3VnaG91dCB0aGUgbW9udGguXG5cblNpbWlsYXIgaW5pdGlhdGl2ZXMgaW4gRGV0cm9pdCwgVG9yb250bywgU3lkbmV5LCBhbmQgb3RoZXIgY2l0aWVzIHdpdGggc2lnbmlmaWNhbnQgTXVzbGltIHBvcHVsYXRpb25zIGhhdmUgc2VlbiB1bnByZWNlZGVudGVkIGNvbW11bml0eSBzdXBwb3J0LiBNYW55IHByb2dyYW1zIGhhdmUgYWxzbyBhZGFwdGVkIHRvIHNlcnZlIGNvbW11bml0aWVzIGFmZmVjdGVkIGJ5IGVjb25vbWljIGNoYWxsZW5nZXMsIG5hdHVyYWwgZGlzYXN0ZXJzLCBhbmQgZ2xvYmFsIGNvbmZsaWN0cy5cblxuVGhlIHN1Y2Nlc3Mgb2YgdGhlc2UgcHJvZ3JhbXMgaGFzIGJlZW4gYXR0cmlidXRlZCB0byBpbmNyZWFzZWQgY29tbXVuaXR5IG9yZ2FuaXphdGlvbiwgc29jaWFsIG1lZGlhIG91dHJlYWNoLCBhbmQgZ3Jvd2luZyBhd2FyZW5lc3Mgb2YgdGhlIElzbGFtaWMgcHJpbmNpcGxlIG9mIFpha2F0IChjaGFyaXRhYmxlIGdpdmluZykgYW1vbmcgeW91bmdlciBNdXNsaW1zLmAsXG4gICAgc3VtbWFyeTogXCJNdXNsaW0gb3JnYW5pemF0aW9ucyB3b3JsZHdpZGUgZGlzdHJpYnV0ZSByZWNvcmQgMiBtaWxsaW9uIG1lYWxzIGR1cmluZyBSYW1hZGFuLCBwYXJ0bmVyaW5nIHdpdGggbG9jYWwgZ292ZXJubWVudHMgYW5kIGludGVyZmFpdGggZ3JvdXBzIHRvIHNlcnZlIGNvbW11bml0aWVzIGluIG5lZWQuXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vaXNsYW1pY2NoYXJpdHkub3JnL3JhbWFkYW4tZm9vZC1kaXN0cmlidXRpb24tMjAyNFwiLFxuICAgIGltYWdlVXJsOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTkzMTEzNjE2ODI4LTZmMjJiY2EwNDgwND93PTgwMFwiLFxuICAgIGNhdGVnb3J5OiBcIkNvbW11bml0eVwiLFxuICAgIHB1Ymxpc2hlZEF0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDQgZGF5cyBhZ29cbiAgICBzY3JhcGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBzb3VyY2VOYW1lOiBcIklzbGFtaWMgQ2hhcml0eSBOZXR3b3JrXCIsXG4gICAgc291cmNlVXJsOiBcImh0dHBzOi8vaXNsYW1pY2NoYXJpdHkub3JnXCIsXG4gICAgc291cmNlUmVnaW9uOiBcIkdsb2JhbFwiLFxuICAgIHNvdXJjZUxvZ286IG51bGwsXG4gICAgaW1wb3J0YW5jZTogOCxcbiAgICBjb3VudHJpZXM6IEpTT04uc3RyaW5naWZ5KFtcIlVuaXRlZCBTdGF0ZXNcIiwgXCJVbml0ZWQgS2luZ2RvbVwiLCBcIkNhbmFkYVwiLCBcIkF1c3RyYWxpYVwiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wicmFtYWRhblwiLCBcImNoYXJpdHlcIiwgXCJmb29kIGRpc3RyaWJ1dGlvblwiLCBcImNvbW11bml0eSBzZXJ2aWNlXCIsIFwiaW50ZXJmYWl0aFwiXSlcbiAgfSxcblxuICB7XG4gICAgaWQ6IDUsXG4gICAgdGl0bGU6IFwiSGlzdG9yaWMgTWFudXNjcmlwdCBDb2xsZWN0aW9uIERpZ2l0aXplZCB0byBQcmVzZXJ2ZSBJc2xhbWljIEhlcml0YWdlXCIsXG4gICAgY29udGVudDogYEEgbWFqb3IgZGlnaXRpemF0aW9uIHByb2plY3QgaGFzIHN1Y2Nlc3NmdWxseSBwcmVzZXJ2ZWQgb3ZlciAxMCwwMDAgaGlzdG9yaWMgSXNsYW1pYyBtYW51c2NyaXB0cywgbWFraW5nIHRoZW0gYWNjZXNzaWJsZSB0byByZXNlYXJjaGVycyBhbmQgc3R1ZGVudHMgd29ybGR3aWRlIHRocm91Z2ggYW4gb25saW5lIHBvcnRhbC4gVGhlIHRocmVlLXllYXIgcHJvamVjdCwgZnVuZGVkIGJ5IFVORVNDTyBhbmQgc2V2ZXJhbCBJc2xhbWljIGZvdW5kYXRpb25zLCBmb2N1c2VkIG9uIG1hbnVzY3JpcHRzIGZyb20gbGlicmFyaWVzIGluIENhaXJvLCBJc3RhbmJ1bCwgQ29yZG9iYSwgYW5kIEJhZ2hkYWQuXG5cblRoZSBjb2xsZWN0aW9uIGluY2x1ZGVzIHJhcmUgd29ya3Mgb24gSXNsYW1pYyBqdXJpc3BydWRlbmNlLCBwaGlsb3NvcGh5LCBtZWRpY2luZSwgYXN0cm9ub215LCBhbmQgbWF0aGVtYXRpY3MgZGF0aW5nIGZyb20gdGhlIDh0aCB0byAxNnRoIGNlbnR1cmllcy4gTWFueSBvZiB0aGVzZSBtYW51c2NyaXB0cyB3ZXJlIHByZXZpb3VzbHkgYWNjZXNzaWJsZSBvbmx5IHRvIGEgc21hbGwgbnVtYmVyIG9mIHNjaG9sYXJzIGFuZCB3ZXJlIGF0IHJpc2sgb2YgZGV0ZXJpb3JhdGlvbiBkdWUgdG8gYWdlIGFuZCBlbnZpcm9ubWVudGFsIGZhY3RvcnMuXG5cbkRyLiBMZWlsYSBCb3VtZWRpZW5lLCB0aGUgcHJvamVjdCdzIGxlYWQgY29vcmRpbmF0b3IsIGVtcGhhc2l6ZWQgdGhlIGdsb2JhbCBzaWduaWZpY2FuY2Ugb2YgdGhlIGluaXRpYXRpdmU6IFwiVGhlc2UgbWFudXNjcmlwdHMgcmVwcmVzZW50IHRoZSBpbnRlbGxlY3R1YWwgbGVnYWN5IG9mIElzbGFtaWMgY2l2aWxpemF0aW9uIGFuZCBjb250YWluIGtub3dsZWRnZSB0aGF0IGNvbnRyaWJ1dGVkIHRvIGh1bWFuIGFkdmFuY2VtZW50IGluIGNvdW50bGVzcyBmaWVsZHMuIEJ5IGRpZ2l0aXppbmcgdGhlbSwgd2UgZW5zdXJlIHRoYXQgZnV0dXJlIGdlbmVyYXRpb25zIGNhbiBhY2Nlc3MgYW5kIGxlYXJuIGZyb20gdGhpcyBpbnZhbHVhYmxlIGhlcml0YWdlLlwiXG5cblRoZSBkaWdpdGl6YXRpb24gcHJvY2VzcyBpbnZvbHZlZCBoaWdoLXJlc29sdXRpb24gc2Nhbm5pbmcsIGRldGFpbGVkIGNhdGFsb2dpbmcsIGFuZCB0aGUgY3JlYXRpb24gb2Ygc2VhcmNoYWJsZSBkYXRhYmFzZXMgaW4gbXVsdGlwbGUgbGFuZ3VhZ2VzLiBBZHZhbmNlZCBwcmVzZXJ2YXRpb24gdGVjaG5pcXVlcyB3ZXJlIHVzZWQgdG8gaGFuZGxlIHRoZSBkZWxpY2F0ZSBtYW51c2NyaXB0cyB3aGlsZSBjcmVhdGluZyBkaWdpdGFsIGNvcGllcyB0aGF0IG1haW50YWluIHRoZSBvcmlnaW5hbCBkb2N1bWVudHMnIHZpc3VhbCBhbmQgdGV4dHVhbCBpbnRlZ3JpdHkuXG5cblNjaG9sYXJzIGhhdmUgYWxyZWFkeSBiZWd1biB1c2luZyB0aGUgZGlnaXRhbCBjb2xsZWN0aW9uIGZvciByZXNlYXJjaCBwcm9qZWN0cywgZGlzY292ZXJpbmcgbmV3IGluc2lnaHRzIGludG8gbWVkaWV2YWwgSXNsYW1pYyB0aG91Z2h0IGFuZCBpdHMgaW5mbHVlbmNlIG9uIGdsb2JhbCBpbnRlbGxlY3R1YWwgZGV2ZWxvcG1lbnQuIFRoZSBwb3J0YWwgaW5jbHVkZXMgdHJhbnNsYXRpb24gdG9vbHMgYW5kIHNjaG9sYXJseSBhbm5vdGF0aW9ucyB0byBtYWtlIHRoZSB0ZXh0cyBhY2Nlc3NpYmxlIHRvIG5vbi1BcmFiaWMgc3BlYWtlcnMuXG5cblRoZSBwcm9qZWN0IGhhcyBiZWVuIHByYWlzZWQgYnkgaW50ZXJuYXRpb25hbCBhY2FkZW1pYyBpbnN0aXR1dGlvbnMgYW5kIGhhcyBzcGFya2VkIHJlbmV3ZWQgaW50ZXJlc3QgaW4gSXNsYW1pYyBzdHVkaWVzIHByb2dyYW1zIGF0IHVuaXZlcnNpdGllcyB3b3JsZHdpZGUuYCxcbiAgICBzdW1tYXJ5OiBcIlVORVNDTy1mdW5kZWQgcHJvamVjdCBkaWdpdGl6ZXMgMTAsMDAwIGhpc3RvcmljIElzbGFtaWMgbWFudXNjcmlwdHMgZnJvbSBtYWpvciBsaWJyYXJpZXMsIG1ha2luZyBpbnZhbHVhYmxlIElzbGFtaWMgaGVyaXRhZ2UgYWNjZXNzaWJsZSB0byBnbG9iYWwgcmVzZWFyY2hlcnMgYW5kIHN0dWRlbnRzLlwiLFxuICAgIHVybDogXCJodHRwczovL2lzbGFtaWNoZXJpdGFnZS5vcmcvbWFudXNjcmlwdC1kaWdpdGl6YXRpb24tY29tcGxldGVcIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ4MTYyNzgzNDg3Ni1iNzgzM2U4ZjU1NzA/dz04MDBcIixcbiAgICBjYXRlZ29yeTogXCJDdWx0dXJlXCIsXG4gICAgcHVibGlzaGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA1ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gNSBkYXlzIGFnb1xuICAgIHNjcmFwZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNvdXJjZU5hbWU6IFwiSXNsYW1pYyBIZXJpdGFnZSBGb3VuZGF0aW9uXCIsXG4gICAgc291cmNlVXJsOiBcImh0dHBzOi8vaXNsYW1pY2hlcml0YWdlLm9yZ1wiLFxuICAgIHNvdXJjZVJlZ2lvbjogXCJHbG9iYWxcIixcbiAgICBzb3VyY2VMb2dvOiBudWxsLFxuICAgIGltcG9ydGFuY2U6IDksXG4gICAgY291bnRyaWVzOiBKU09OLnN0cmluZ2lmeShbXCJFZ3lwdFwiLCBcIlR1cmtleVwiLCBcIlNwYWluXCIsIFwiSXJhcVwiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wiaGVyaXRhZ2VcIiwgXCJtYW51c2NyaXB0c1wiLCBcImRpZ2l0aXphdGlvblwiLCBcInVuZXNjb1wiLCBcImN1bHR1cmVcIiwgXCJwcmVzZXJ2YXRpb25cIl0pXG4gIH0sXG5cbiAge1xuICAgIGlkOiA2LFxuICAgIHRpdGxlOiBcIk11c2xpbSBNZWRpY2FsIEFzc29jaWF0aW9uIExhdW5jaGVzIEdsb2JhbCBIZWFsdGggSW5pdGlhdGl2ZSBmb3IgVW5kZXJzZXJ2ZWQgQ29tbXVuaXRpZXNcIixcbiAgICBjb250ZW50OiBgVGhlIEludGVybmF0aW9uYWwgTXVzbGltIE1lZGljYWwgQXNzb2NpYXRpb24gaGFzIGxhdW5jaGVkIGEgY29tcHJlaGVuc2l2ZSBnbG9iYWwgaGVhbHRoIGluaXRpYXRpdmUgYWltZWQgYXQgcHJvdmlkaW5nIG1lZGljYWwgY2FyZSBhbmQgaGVhbHRoIGVkdWNhdGlvbiB0byB1bmRlcnNlcnZlZCBNdXNsaW0gY29tbXVuaXRpZXMgd29ybGR3aWRlLiBUaGUgcHJvZ3JhbSwgY2FsbGVkIFwiSGVhbHRoIGZvciBBbGwsXCIgd2lsbCBlc3RhYmxpc2ggbWVkaWNhbCBjbGluaWNzLCB0cmFpbmluZyBjZW50ZXJzLCBhbmQgbW9iaWxlIGhlYWx0aCB1bml0cyBpbiAyNSBjb3VudHJpZXMgb3ZlciB0aGUgbmV4dCBmaXZlIHllYXJzLlxuXG5UaGUgaW5pdGlhdGl2ZSBhZGRyZXNzZXMgY3JpdGljYWwgaGVhbHRoIGRpc3Bhcml0aWVzIGFmZmVjdGluZyBNdXNsaW0gcG9wdWxhdGlvbnMgaW4gcmVmdWdlZSBjYW1wcywgcnVyYWwgYXJlYXMsIGFuZCB1cmJhbiBjZW50ZXJzIGxhY2tpbmcgYWRlcXVhdGUgaGVhbHRoY2FyZSBpbmZyYXN0cnVjdHVyZS4gVGhlIHByb2dyYW0gZW1waGFzaXplcyBwcmV2ZW50aXZlIGNhcmUsIG1hdGVybmFsIGhlYWx0aCwgY2hpbGQgbnV0cml0aW9uLCBhbmQgdGhlIHRyZWF0bWVudCBvZiBjb21tdW5pY2FibGUgZGlzZWFzZXMuXG5cbkRyLiBGYXRpbWEgQWwtUmFzaGlkLCB0aGUgYXNzb2NpYXRpb24ncyBwcmVzaWRlbnQsIGFubm91bmNlZCB0aGF0IHRoZSBmaXJzdCBwaGFzZSB3aWxsIGZvY3VzIG9uIGVzdGFibGlzaGluZyBwZXJtYW5lbnQgY2xpbmljcyBpbiByZWZ1Z2VlIHNldHRsZW1lbnRzIGluIEpvcmRhbiwgTGViYW5vbiwgYW5kIEJhbmdsYWRlc2gsIHNlcnZpbmcgb3ZlciAxMDAsMDAwIGRpc3BsYWNlZCBwZXJzb25zLiBcIkhlYWx0aGNhcmUgaXMgYSBmdW5kYW1lbnRhbCBodW1hbiByaWdodCBpbiBJc2xhbSwgYW5kIHdlIGhhdmUgYSByZWxpZ2lvdXMgb2JsaWdhdGlvbiB0byBzZXJ2ZSB0aG9zZSBtb3N0IGluIG5lZWQsXCIgc2hlIHN0YXRlZC5cblxuVGhlIHByb2dyYW0gaW5jb3Jwb3JhdGVzIElzbGFtaWMgcHJpbmNpcGxlcyBvZiBoZWFsdGhjYXJlLCBpbmNsdWRpbmcgdGhlIGludGVncmF0aW9uIG9mIHNwaXJpdHVhbCBjYXJlIHdpdGggbWVkaWNhbCB0cmVhdG1lbnQgYW5kIHRoZSB0cmFpbmluZyBvZiBsb2NhbCBjb21tdW5pdHkgaGVhbHRoIHdvcmtlcnMuIEl0IGFsc28gZW1waGFzaXplcyB0aGUgaW1wb3J0YW5jZSBvZiBjdWx0dXJhbGx5IHNlbnNpdGl2ZSBjYXJlIHRoYXQgcmVzcGVjdHMgSXNsYW1pYyB2YWx1ZXMgYW5kIHByYWN0aWNlcy5cblxuRnVuZGluZyBmb3IgdGhlIGluaXRpYXRpdmUgY29tZXMgZnJvbSBaYWthdCBjb250cmlidXRpb25zLCBJc2xhbWljIGNoYXJpdGFibGUgZm91bmRhdGlvbnMsIGFuZCBwYXJ0bmVyc2hpcHMgd2l0aCBpbnRlcm5hdGlvbmFsIGhlYWx0aCBvcmdhbml6YXRpb25zLiBUaGUgV29ybGQgSGVhbHRoIE9yZ2FuaXphdGlvbiBoYXMgZW5kb3JzZWQgdGhlIHByb2dyYW0gYW5kIHByb3ZpZGVkIHRlY2huaWNhbCBzdXBwb3J0IGZvciBpdHMgaW1wbGVtZW50YXRpb24uXG5cbk1lZGljYWwgcHJvZmVzc2lvbmFscyBmcm9tIGFyb3VuZCB0aGUgd29ybGQgaGF2ZSB2b2x1bnRlZXJlZCB0byBwYXJ0aWNpcGF0ZSwgd2l0aCBvdmVyIDUwMCBNdXNsaW0gZG9jdG9ycywgbnVyc2VzLCBhbmQgaGVhbHRoY2FyZSB3b3JrZXJzIGFscmVhZHkgcmVnaXN0ZXJlZCB0byBzZXJ2ZSBpbiB2YXJpb3VzIGxvY2F0aW9ucy5gLFxuICAgIHN1bW1hcnk6IFwiSW50ZXJuYXRpb25hbCBNdXNsaW0gTWVkaWNhbCBBc3NvY2lhdGlvbiBsYXVuY2hlcyBnbG9iYWwgaGVhbHRoIGluaXRpYXRpdmUgdG8gc2VydmUgdW5kZXJzZXJ2ZWQgY29tbXVuaXRpZXMsIGVzdGFibGlzaGluZyBjbGluaWNzIGluIDI1IGNvdW50cmllcyB3aXRoIGZvY3VzIG9uIHJlZnVnZWUgcG9wdWxhdGlvbnMuXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vbXVzbGltbWVkaWNzLm9yZy9nbG9iYWwtaGVhbHRoLWluaXRpYXRpdmUtbGF1bmNoXCIsXG4gICAgaW1hZ2VVcmw6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTk3NTcxNDgtNWMzNTBkMGQzYzU2P3c9ODAwXCIsXG4gICAgY2F0ZWdvcnk6IFwiSGVhbHRoXCIsXG4gICAgcHVibGlzaGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA2ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gNiBkYXlzIGFnb1xuICAgIHNjcmFwZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNvdXJjZU5hbWU6IFwiTXVzbGltIE1lZGljYWwgVG9kYXlcIixcbiAgICBzb3VyY2VVcmw6IFwiaHR0cHM6Ly9tdXNsaW1tZWRpY3Mub3JnXCIsXG4gICAgc291cmNlUmVnaW9uOiBcIkdsb2JhbFwiLFxuICAgIHNvdXJjZUxvZ286IG51bGwsXG4gICAgaW1wb3J0YW5jZTogOCxcbiAgICBjb3VudHJpZXM6IEpTT04uc3RyaW5naWZ5KFtcIkpvcmRhblwiLCBcIkxlYmFub25cIiwgXCJCYW5nbGFkZXNoXCIsIFwiR2xvYmFsXCJdKSxcbiAgICB0YWdzOiBKU09OLnN0cmluZ2lmeShbXCJoZWFsdGhjYXJlXCIsIFwibWVkaWNhbFwiLCBcImNoYXJpdHlcIiwgXCJyZWZ1Z2Vlc1wiLCBcImdsb2JhbCBoZWFsdGhcIiwgXCJtdXNsaW0gZG9jdG9yc1wiXSlcbiAgfSxcblxuICB7XG4gICAgaWQ6IDcsXG4gICAgdGl0bGU6IFwiSXNsYW1pYyBBcnQgRXhoaWJpdGlvbiBCcmVha3MgQXR0ZW5kYW5jZSBSZWNvcmRzIGF0IE1ldHJvcG9saXRhbiBNdXNldW1cIixcbiAgICBjb250ZW50OiBgVGhlIE1ldHJvcG9saXRhbiBNdXNldW0gb2YgQXJ0J3MgZ3JvdW5kYnJlYWtpbmcgZXhoaWJpdGlvbiBcIklzbGFtaWMgQ2l2aWxpemF0aW9uczogQXJ0LCBTY2llbmNlLCBhbmQgQ3VsdHVyZVwiIGhhcyBicm9rZW4gYXR0ZW5kYW5jZSByZWNvcmRzLCB3aXRoIG92ZXIgNTAwLDAwMCB2aXNpdG9ycyBpbiBpdHMgZmlyc3Qgc2l4IG1vbnRocy4gVGhlIGV4aGliaXRpb24sIHdoaWNoIHJ1bnMgdW50aWwgdGhlIGVuZCBvZiB0aGUgeWVhciwgc2hvd2Nhc2VzIDEsMDAwIHllYXJzIG9mIElzbGFtaWMgYXJ0aXN0aWMgYW5kIGludGVsbGVjdHVhbCBhY2hpZXZlbWVudC5cblxuVGhlIGV4aGliaXRpb24gZmVhdHVyZXMgb3ZlciAzMDAgb2JqZWN0cyBmcm9tIHRoZSBtdXNldW0ncyBjb2xsZWN0aW9uIGFuZCBsb2FucyBmcm9tIGluc3RpdHV0aW9ucyB3b3JsZHdpZGUsIGluY2x1ZGluZyBjYWxsaWdyYXBoeSwgdGV4dGlsZXMsIHNjaWVudGlmaWMgaW5zdHJ1bWVudHMsIGFyY2hpdGVjdHVyYWwgZWxlbWVudHMsIGFuZCBpbGx1bWluYXRlZCBtYW51c2NyaXB0cy4gSW50ZXJhY3RpdmUgZGlzcGxheXMgYWxsb3cgdmlzaXRvcnMgdG8gZXhwbG9yZSB0aGUgY29ubmVjdGlvbnMgYmV0d2VlbiBJc2xhbWljIGFydCBhbmQgY29udGVtcG9yYXJ5IGNyZWF0aXZlIGV4cHJlc3Npb25zLlxuXG5cIlRoaXMgZXhoaWJpdGlvbiBjaGFsbGVuZ2VzIG1hbnkgbWlzY29uY2VwdGlvbnMgYWJvdXQgSXNsYW1pYyBjdWx0dXJlIGFuZCBoaWdobGlnaHRzIGl0cyBwcm9mb3VuZCBjb250cmlidXRpb25zIHRvIHdvcmxkIGNpdmlsaXphdGlvbixcIiBzYWlkIERyLiBTYXJhaCBBaG1lZCwgdGhlIGV4aGliaXRpb24ncyBjaGllZiBjdXJhdG9yLiBcIlZpc2l0b3JzIGFyZSBhbWF6ZWQgdG8gbGVhcm4gYWJvdXQgdGhlIElzbGFtaWMgcm9vdHMgb2YgbWFueSBzY2llbnRpZmljIGFuZCBhcnRpc3RpYyBpbm5vdmF0aW9ucyB3ZSB0YWtlIGZvciBncmFudGVkIHRvZGF5LlwiXG5cblRoZSBleGhpYml0aW9uIGhhcyBiZWVuIHBhcnRpY3VsYXJseSBwb3B1bGFyIGFtb25nIHNjaG9vbCBncm91cHMsIHdpdGggc3BlY2lhbCBlZHVjYXRpb25hbCBwcm9ncmFtcyBkZXNpZ25lZCB0byB0ZWFjaCBzdHVkZW50cyBhYm91dCBJc2xhbWljIGNvbnRyaWJ1dGlvbnMgdG8gbWF0aGVtYXRpY3MsIGFzdHJvbm9teSwgbWVkaWNpbmUsIGFuZCBhcmNoaXRlY3R1cmUuIE1hbnkgdmlzaXRvcnMgaGF2ZSBleHByZXNzZWQgc3VycHJpc2UgYXQgdGhlIGRpdmVyc2l0eSBhbmQgc29waGlzdGljYXRpb24gb2YgSXNsYW1pYyBhcnRpc3RpYyB0cmFkaXRpb25zLlxuXG5Db21tdW5pdHkgcmVzcG9uc2UgaGFzIGJlZW4gb3ZlcndoZWxtaW5nbHkgcG9zaXRpdmUsIHdpdGggTXVzbGltIG9yZ2FuaXphdGlvbnMgcHJhaXNpbmcgdGhlIHJlc3BlY3RmdWwgYW5kIGNvbXByZWhlbnNpdmUgcHJlc2VudGF0aW9uIG9mIElzbGFtaWMgY3VsdHVyZS4gVGhlIGV4aGliaXRpb24gaGFzIGFsc28gZm9zdGVyZWQgaW5jcmVhc2VkIGRpYWxvZ3VlIGJldHdlZW4gTXVzbGltIGFuZCBub24tTXVzbGltIGNvbW11bml0aWVzIGluIE5ldyBZb3JrLlxuXG5QbGFucyBhcmUgdW5kZXJ3YXkgdG8gY3JlYXRlIGEgdHJhdmVsaW5nIHZlcnNpb24gb2YgdGhlIGV4aGliaXRpb24gdGhhdCB3aWxsIHZpc2l0IG11c2V1bXMgYWNyb3NzIHRoZSBVbml0ZWQgU3RhdGVzIGFuZCBpbnRlcm5hdGlvbmFsbHksIGV4dGVuZGluZyBpdHMgZWR1Y2F0aW9uYWwgaW1wYWN0IHRvIGJyb2FkZXIgYXVkaWVuY2VzLmAsXG4gICAgc3VtbWFyeTogXCJNZXRyb3BvbGl0YW4gTXVzZXVtJ3MgSXNsYW1pYyBhcnQgZXhoaWJpdGlvbiBicmVha3MgYXR0ZW5kYW5jZSByZWNvcmRzIHdpdGggNTAwLDAwMCB2aXNpdG9ycywgc2hvd2Nhc2luZyAxLDAwMCB5ZWFycyBvZiBJc2xhbWljIGFydGlzdGljIGFuZCBpbnRlbGxlY3R1YWwgY29udHJpYnV0aW9ucy5cIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9hcnRhbmRpc2xhbS5vcmcvbWV0LWV4aGliaXRpb24tc3VjY2Vzc1wiLFxuICAgIGltYWdlVXJsOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc4NjYyOTk2NDQyLTQ4ZjYwMTAzZmM5Nj93PTgwMFwiLFxuICAgIGNhdGVnb3J5OiBcIkN1bHR1cmVcIixcbiAgICBwdWJsaXNoZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyA3IGRheXMgYWdvXG4gICAgc2NyYXBlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgc291cmNlTmFtZTogXCJBcnQgJiBJc2xhbSBUb2RheVwiLFxuICAgIHNvdXJjZVVybDogXCJodHRwczovL2FydGFuZGlzbGFtLm9yZ1wiLFxuICAgIHNvdXJjZVJlZ2lvbjogXCJOb3J0aCBBbWVyaWNhXCIsXG4gICAgc291cmNlTG9nbzogbnVsbCxcbiAgICBpbXBvcnRhbmNlOiA3LFxuICAgIGNvdW50cmllczogSlNPTi5zdHJpbmdpZnkoW1wiVW5pdGVkIFN0YXRlc1wiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wiYXJ0XCIsIFwiZXhoaWJpdGlvblwiLCBcImN1bHR1cmVcIiwgXCJtdXNldW1cIiwgXCJlZHVjYXRpb25cIiwgXCJpc2xhbWljIGNpdmlsaXphdGlvblwiXSlcbiAgfSxcblxuICB7XG4gICAgaWQ6IDgsXG4gICAgdGl0bGU6IFwiTXVzbGltIFN0dWRlbnQgQXRobGV0ZXMgRXhjZWwgaW4gSW50ZXJuYXRpb25hbCBVbml2ZXJzaXR5IEdhbWVzXCIsXG4gICAgY29udGVudDogYE11c2xpbSBzdHVkZW50IGF0aGxldGVzIGZyb20gYXJvdW5kIHRoZSB3b3JsZCBoYXZlIGFjaGlldmVkIHJlbWFya2FibGUgc3VjY2VzcyBhdCB0aGUgSW50ZXJuYXRpb25hbCBVbml2ZXJzaXR5IEdhbWVzLCB3aW5uaW5nIG1lZGFscyBhY3Jvc3MgbXVsdGlwbGUgc3BvcnRzIHdoaWxlIG1haW50YWluaW5nIHRoZWlyIHJlbGlnaW91cyBwcmFjdGljZXMgYW5kIG9ibGlnYXRpb25zLiBUaGUgZ2FtZXMsIGhlbGQgaW4gSXRhbHksIGZlYXR1cmVkIG92ZXIgOCwwMDAgYXRobGV0ZXMgZnJvbSAxNjUgY291bnRyaWVzLlxuXG5Ob3RhYmxlIGFjaGlldmVtZW50cyBpbmNsdWRlIGdvbGQgbWVkYWxzIHdvbiBieSBaZWluYWIgSGFzc2FuIChFZ3lwdCkgaW4gdGFla3dvbmRvLCBBaG1lZCBBbC1NYW5zb3VyaSAoVUFFKSBpbiBzd2ltbWluZywgYW5kIHRoZSBNYWxheXNpYW4gd29tZW4ncyBiYWRtaW50b24gdGVhbS4gVGhlc2UgYXRobGV0ZXMgaGF2ZSBiZWNvbWUgcm9sZSBtb2RlbHMgZm9yIHlvdW5nIE11c2xpbXMsIGRlbW9uc3RyYXRpbmcgdGhhdCBleGNlbGxlbmNlIGluIHNwb3J0cyBpcyBjb21wYXRpYmxlIHdpdGggSXNsYW1pYyB2YWx1ZXMgYW5kIHByYWN0aWNlcy5cblxuVGhlIGdhbWVzIGZlYXR1cmVkIHNwZWNpYWwgYWNjb21tb2RhdGlvbnMgZm9yIE11c2xpbSBhdGhsZXRlcywgaW5jbHVkaW5nIHByYXllciBmYWNpbGl0aWVzLCBoYWxhbCBmb29kIG9wdGlvbnMsIGFuZCBhZGp1c3RlZCB0cmFpbmluZyBzY2hlZHVsZXMgZHVyaW5nIHByYXllciB0aW1lcy4gVGhpcyBpbmNsdXNpdmUgYXBwcm9hY2ggaGFzIGJlZW4gcHJhaXNlZCBieSB0aGUgSW50ZXJuYXRpb25hbCBVbml2ZXJzaXR5IFNwb3J0cyBGZWRlcmF0aW9uIGFuZCBoYXMgc2V0IGEgcHJlY2VkZW50IGZvciBmdXR1cmUgaW50ZXJuYXRpb25hbCBzcG9ydGluZyBldmVudHMuXG5cblwiUmVwcmVzZW50aW5nIG15IGNvdW50cnkgYW5kIG15IGZhaXRoIG9uIHRoaXMgaW50ZXJuYXRpb25hbCBzdGFnZSBpcyBhbiBpbmNyZWRpYmxlIGhvbm9yLFwiIHNhaWQgZ29sZCBtZWRhbGlzdCBaZWluYWIgSGFzc2FuLiBcIkkgaG9wZSB0byBpbnNwaXJlIG90aGVyIHlvdW5nIE11c2xpbSB3b21lbiB0byBwdXJzdWUgdGhlaXIgZHJlYW1zIGluIHNwb3J0cyB3aGlsZSBzdGF5aW5nIHRydWUgdG8gdGhlaXIgYmVsaWVmcyBhbmQgdmFsdWVzLlwiXG5cblRoZSBzdWNjZXNzIG9mIE11c2xpbSBhdGhsZXRlcyBoYXMgYmVlbiBjZWxlYnJhdGVkIGFjcm9zcyB0aGUgSXNsYW1pYyB3b3JsZCwgd2l0aCBtYW55IHJlY2VpdmluZyBoZXJvJ3Mgd2VsY29tZXMgdXBvbiByZXR1cm5pbmcgdG8gdGhlaXIgaG9tZSBjb3VudHJpZXMuIFNwb3J0cyBjb21tZW50YXRvcnMgaGF2ZSBub3RlZCB0aGUgaW5jcmVhc2luZyB2aXNpYmlsaXR5IGFuZCBzdWNjZXNzIG9mIE11c2xpbSBhdGhsZXRlcyBpbiBpbnRlcm5hdGlvbmFsIGNvbXBldGl0aW9ucy5cblxuU2V2ZXJhbCBhdGhsZXRlcyBoYXZlIGFubm91bmNlZCBwbGFucyB0byB1c2UgdGhlaXIgcGxhdGZvcm1zIHRvIHByb21vdGUgeW91dGggc3BvcnRzIHByb2dyYW1zIGluIHRoZWlyIGNvbW11bml0aWVzIGFuZCB0byBhZHZvY2F0ZSBmb3IgZ3JlYXRlciBpbmNsdXNpb24gYW5kIHVuZGVyc3RhbmRpbmcgaW4gaW50ZXJuYXRpb25hbCBzcG9ydHMuYCxcbiAgICBzdW1tYXJ5OiBcIk11c2xpbSBzdHVkZW50IGF0aGxldGVzIGFjaGlldmUgcmVtYXJrYWJsZSBzdWNjZXNzIGF0IEludGVybmF0aW9uYWwgVW5pdmVyc2l0eSBHYW1lcywgd2lubmluZyBtdWx0aXBsZSBtZWRhbHMgd2hpbGUgbWFpbnRhaW5pbmcgcmVsaWdpb3VzIHByYWN0aWNlcyBhbmQgaW5zcGlyaW5nIHlvdXRoLlwiLFxuICAgIHVybDogXCJodHRwczovL211c2xpbWF0aGxldGVzbmV3cy5jb20vdW5pdmVyc2l0eS1nYW1lcy1zdWNjZXNzXCIsXG4gICAgaW1hZ2VVcmw6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzEwMTk2MTM0NTQtMWNiMmY5OWIyZDhiP3c9ODAwXCIsXG4gICAgY2F0ZWdvcnk6IFwiU3BvcnRzXCIsXG4gICAgcHVibGlzaGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA4ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gOCBkYXlzIGFnb1xuICAgIHNjcmFwZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHNvdXJjZU5hbWU6IFwiTXVzbGltIEF0aGxldGVzIE5ld3NcIixcbiAgICBzb3VyY2VVcmw6IFwiaHR0cHM6Ly9tdXNsaW1hdGhsZXRlc25ld3MuY29tXCIsXG4gICAgc291cmNlUmVnaW9uOiBcIkdsb2JhbFwiLFxuICAgIHNvdXJjZUxvZ286IG51bGwsXG4gICAgaW1wb3J0YW5jZTogNixcbiAgICBjb3VudHJpZXM6IEpTT04uc3RyaW5naWZ5KFtcIkl0YWx5XCIsIFwiRWd5cHRcIiwgXCJVQUVcIiwgXCJNYWxheXNpYVwiXSksXG4gICAgdGFnczogSlNPTi5zdHJpbmdpZnkoW1wic3BvcnRzXCIsIFwiYXRobGV0ZXNcIiwgXCJ1bml2ZXJzaXR5IGdhbWVzXCIsIFwibXVzbGltIHlvdXRoXCIsIFwiaW50ZXJuYXRpb25hbCBjb21wZXRpdGlvblwiXSlcbiAgfVxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFNFRURfQVJUSUNMRVNcbn07ICJdLCJuYW1lcyI6WyJTRUVEX0FSVElDTEVTIiwiaWQiLCJ0aXRsZSIsImNvbnRlbnQiLCJzdW1tYXJ5IiwidXJsIiwiaW1hZ2VVcmwiLCJjYXRlZ29yeSIsInB1Ymxpc2hlZEF0IiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwic2NyYXBlZEF0Iiwic291cmNlTmFtZSIsInNvdXJjZVVybCIsInNvdXJjZVJlZ2lvbiIsInNvdXJjZUxvZ28iLCJpbXBvcnRhbmNlIiwiY291bnRyaWVzIiwiSlNPTiIsInN0cmluZ2lmeSIsInRhZ3MiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/data/seed-articles.js\n");

/***/ }),

/***/ "(api)/./lib/services/app-initializer.js":
/*!*****************************************!*\
  !*** ./lib/services/app-initializer.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst DatabaseSeeder = __webpack_require__(/*! ./database-seeder */ \"(api)/./lib/services/database-seeder.js\");\nconst { getDatabase } = __webpack_require__(/*! ./database */ \"(api)/./lib/services/database.js\");\nclass AppInitializer {\n    constructor(){\n        this.seeder = new DatabaseSeeder();\n        this.isInitialized = false;\n    }\n    /**\n   * Initialize the application with minimum required content\n   */ async initialize() {\n        if (this.isInitialized) {\n            return {\n                success: true,\n                message: \"Already initialized\"\n            };\n        }\n        try {\n            console.log(\"\\uD83D\\uDE80 Initializing Muslim News Hub...\");\n            // Step 1: Check database connection\n            console.log(\"\\uD83D\\uDCCA Checking database connection...\");\n            const db = getDatabase();\n            if (!db) {\n                throw new Error(\"Database connection failed\");\n            }\n            console.log(\" Database connection successful\");\n            // Step 2: Check current content\n            const currentCount = await this.seeder.getArticleCount();\n            console.log(` Current articles in database: ${currentCount}`);\n            // Step 3: Ensure minimum content\n            if (currentCount < 8) {\n                console.log(\"\\uD83C\\uDF31 Database needs initial content, seeding...\");\n                const seedResult = await this.seeder.ensureMinimumContent(8);\n                if (seedResult.success) {\n                    console.log(` ${seedResult.message}`);\n                } else {\n                    console.log(` Seeding had issues: ${seedResult.message}`);\n                }\n            } else {\n                console.log(\" Database has sufficient content\");\n            }\n            // Step 4: Final verification\n            const finalCount = await this.seeder.getArticleCount();\n            console.log(` Final article count: ${finalCount}`);\n            this.isInitialized = true;\n            return {\n                success: true,\n                message: `Muslim News Hub initialized successfully with ${finalCount} articles`,\n                articleCount: finalCount\n            };\n        } catch (error) {\n            console.error(\" App initialization error:\", error);\n            // Emergency fallback\n            try {\n                console.log(\"\\uD83C\\uDD98 Emergency initialization attempt...\");\n                await this.seeder.forceSeed();\n                const emergencyCount = await this.seeder.getArticleCount();\n                this.isInitialized = true;\n                return {\n                    success: true,\n                    message: `Emergency initialization completed with ${emergencyCount} articles`,\n                    articleCount: emergencyCount,\n                    warning: \"Used emergency seeding\"\n                };\n            } catch (emergencyError) {\n                console.error(\" Emergency initialization failed:\", emergencyError);\n                return {\n                    success: false,\n                    message: \"App initialization failed completely\",\n                    error: error.message,\n                    emergencyError: emergencyError.message\n                };\n            }\n        }\n    }\n    /**\n   * Check if app is properly initialized\n   */ async isAppReady() {\n        try {\n            const articleCount = await this.seeder.getArticleCount();\n            return {\n                ready: articleCount >= 5,\n                articleCount: articleCount,\n                message: articleCount >= 5 ? \"App is ready\" : \"App needs more content\"\n            };\n        } catch (error) {\n            return {\n                ready: false,\n                articleCount: 0,\n                message: \"Database connection error\",\n                error: error.message\n            };\n        }\n    }\n    /**\n   * Refresh content (useful for periodic updates)\n   */ async refreshContent() {\n        try {\n            console.log(\"\\uD83D\\uDD04 Refreshing content...\");\n            const currentCount = await this.seeder.getArticleCount();\n            // If content is very low, force reseed\n            if (currentCount < 5) {\n                console.log(\"\\uD83C\\uDF31 Content is low, force reseeding...\");\n                const result = await this.seeder.forceSeed();\n                return {\n                    success: true,\n                    message: `Content refreshed: ${result.articlesAdded} articles added`,\n                    action: \"force_seed\"\n                };\n            }\n            // Otherwise, just ensure minimum\n            const result = await this.seeder.ensureMinimumContent(8);\n            return {\n                success: true,\n                message: result.message,\n                action: \"ensure_minimum\"\n            };\n        } catch (error) {\n            console.error(\" Content refresh error:\", error);\n            return {\n                success: false,\n                message: \"Content refresh failed\",\n                error: error.message\n            };\n        }\n    }\n}\n// Export singleton instance\nconst appInitializer = new AppInitializer();\nmodule.exports = {\n    AppInitializer,\n    appInitializer\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLGlCQUFpQjtZQUNoRDtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkLE9BQU87Z0JBQ0xNLE9BQU87Z0JBQ1BQLGNBQWM7Z0JBQ2RWLFNBQVM7Z0JBQ1RXLE9BQU9BLE1BQU1YLE9BQU87WUFDdEI7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNa0IsaUJBQWlCO1FBQ3JCLElBQUk7WUFDRmpCLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU1HLGVBQWUsTUFBTSxJQUFJLENBQUNULE1BQU0sQ0FBQ1UsZUFBZTtZQUV0RCx1Q0FBdUM7WUFDdkMsSUFBSUQsZUFBZSxHQUFHO2dCQUNwQkosUUFBUUMsR0FBRyxDQUFDO2dCQUNaLE1BQU1pQixTQUFTLE1BQU0sSUFBSSxDQUFDdkIsTUFBTSxDQUFDZ0IsU0FBUztnQkFDMUMsT0FBTztvQkFDTGIsU0FBUztvQkFDVEMsU0FBUyxDQUFDLG1CQUFtQixFQUFFbUIsT0FBT0MsYUFBYSxDQUFDLGVBQWUsQ0FBQztvQkFDcEVDLFFBQVE7Z0JBQ1Y7WUFDRjtZQUVBLGlDQUFpQztZQUNqQyxNQUFNRixTQUFTLE1BQU0sSUFBSSxDQUFDdkIsTUFBTSxDQUFDWSxvQkFBb0IsQ0FBQztZQUN0RCxPQUFPO2dCQUNMVCxTQUFTO2dCQUNUQyxTQUFTbUIsT0FBT25CLE9BQU87Z0JBQ3ZCcUIsUUFBUTtZQUNWO1FBRUYsRUFBRSxPQUFPVixPQUFPO1lBQ2RWLFFBQVFVLEtBQUssQ0FBQyw0QkFBNEJBO1lBQzFDLE9BQU87Z0JBQ0xaLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RXLE9BQU9BLE1BQU1YLE9BQU87WUFDdEI7UUFDRjtJQUNGO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDNUIsTUFBTXNCLGlCQUFpQixJQUFJNUI7QUFFM0I2QixPQUFPQyxPQUFPLEdBQUc7SUFDZjlCO0lBQ0E0QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVzbGltLW5ld3MtYWdncmVnYXRvci8uL2xpYi9zZXJ2aWNlcy9hcHAtaW5pdGlhbGl6ZXIuanM/MzRhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEYXRhYmFzZVNlZWRlciA9IHJlcXVpcmUoJy4vZGF0YWJhc2Utc2VlZGVyJyk7XG5jb25zdCB7IGdldERhdGFiYXNlIH0gPSByZXF1aXJlKCcuL2RhdGFiYXNlJyk7XG5cbmNsYXNzIEFwcEluaXRpYWxpemVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZWVkZXIgPSBuZXcgRGF0YWJhc2VTZWVkZXIoKTtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBhcHBsaWNhdGlvbiB3aXRoIG1pbmltdW0gcmVxdWlyZWQgY29udGVudFxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnQWxyZWFkeSBpbml0aWFsaXplZCcgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfmoAgSW5pdGlhbGl6aW5nIE11c2xpbSBOZXdzIEh1Yi4uLicpO1xuICAgICAgXG4gICAgICAvLyBTdGVwIDE6IENoZWNrIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OKIENoZWNraW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi4nKTtcbiAgICAgIGNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoKTtcbiAgICAgIGlmICghZGIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnKTtcblxuICAgICAgLy8gU3RlcCAyOiBDaGVjayBjdXJyZW50IGNvbnRlbnRcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IGF3YWl0IHRoaXMuc2VlZGVyLmdldEFydGljbGVDb3VudCgpO1xuICAgICAgY29uc29sZS5sb2coYPCfk7AgQ3VycmVudCBhcnRpY2xlcyBpbiBkYXRhYmFzZTogJHtjdXJyZW50Q291bnR9YCk7XG5cbiAgICAgIC8vIFN0ZXAgMzogRW5zdXJlIG1pbmltdW0gY29udGVudFxuICAgICAgaWYgKGN1cnJlbnRDb3VudCA8IDgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjLEgRGF0YWJhc2UgbmVlZHMgaW5pdGlhbCBjb250ZW50LCBzZWVkaW5nLi4uJyk7XG4gICAgICAgIGNvbnN0IHNlZWRSZXN1bHQgPSBhd2FpdCB0aGlzLnNlZWRlci5lbnN1cmVNaW5pbXVtQ29udGVudCg4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWVkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFICR7c2VlZFJlc3VsdC5tZXNzYWdlfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gU2VlZGluZyBoYWQgaXNzdWVzOiAke3NlZWRSZXN1bHQubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBoYXMgc3VmZmljaWVudCBjb250ZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0ZXAgNDogRmluYWwgdmVyaWZpY2F0aW9uXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gYXdhaXQgdGhpcy5zZWVkZXIuZ2V0QXJ0aWNsZUNvdW50KCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TiCBGaW5hbCBhcnRpY2xlIGNvdW50OiAke2ZpbmFsQ291bnR9YCk7XG5cbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGBNdXNsaW0gTmV3cyBIdWIgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5IHdpdGggJHtmaW5hbENvdW50fSBhcnRpY2xlc2AsXG4gICAgICAgIGFydGljbGVDb3VudDogZmluYWxDb3VudFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQXBwIGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gRW1lcmdlbmN5IGZhbGxiYWNrXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+GmCBFbWVyZ2VuY3kgaW5pdGlhbGl6YXRpb24gYXR0ZW1wdC4uLicpO1xuICAgICAgICBhd2FpdCB0aGlzLnNlZWRlci5mb3JjZVNlZWQoKTtcbiAgICAgICAgY29uc3QgZW1lcmdlbmN5Q291bnQgPSBhd2FpdCB0aGlzLnNlZWRlci5nZXRBcnRpY2xlQ291bnQoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYEVtZXJnZW5jeSBpbml0aWFsaXphdGlvbiBjb21wbGV0ZWQgd2l0aCAke2VtZXJnZW5jeUNvdW50fSBhcnRpY2xlc2AsXG4gICAgICAgICAgYXJ0aWNsZUNvdW50OiBlbWVyZ2VuY3lDb3VudCxcbiAgICAgICAgICB3YXJuaW5nOiAnVXNlZCBlbWVyZ2VuY3kgc2VlZGluZydcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlbWVyZ2VuY3lFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRW1lcmdlbmN5IGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlbWVyZ2VuY3lFcnJvcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0FwcCBpbml0aWFsaXphdGlvbiBmYWlsZWQgY29tcGxldGVseScsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZW1lcmdlbmN5RXJyb3I6IGVtZXJnZW5jeUVycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYXBwIGlzIHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAqL1xuICBhc3luYyBpc0FwcFJlYWR5KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnRpY2xlQ291bnQgPSBhd2FpdCB0aGlzLnNlZWRlci5nZXRBcnRpY2xlQ291bnQoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlYWR5OiBhcnRpY2xlQ291bnQgPj0gNSxcbiAgICAgICAgYXJ0aWNsZUNvdW50OiBhcnRpY2xlQ291bnQsXG4gICAgICAgIG1lc3NhZ2U6IGFydGljbGVDb3VudCA+PSA1ID8gJ0FwcCBpcyByZWFkeScgOiAnQXBwIG5lZWRzIG1vcmUgY29udGVudCdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlYWR5OiBmYWxzZSxcbiAgICAgICAgYXJ0aWNsZUNvdW50OiAwLFxuICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcicsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoIGNvbnRlbnQgKHVzZWZ1bCBmb3IgcGVyaW9kaWMgdXBkYXRlcylcbiAgICovXG4gIGFzeW5jIHJlZnJlc2hDb250ZW50KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBSZWZyZXNoaW5nIGNvbnRlbnQuLi4nKTtcbiAgICAgIFxuICAgICAgY29uc3QgY3VycmVudENvdW50ID0gYXdhaXQgdGhpcy5zZWVkZXIuZ2V0QXJ0aWNsZUNvdW50KCk7XG4gICAgICBcbiAgICAgIC8vIElmIGNvbnRlbnQgaXMgdmVyeSBsb3csIGZvcmNlIHJlc2VlZFxuICAgICAgaWYgKGN1cnJlbnRDb3VudCA8IDUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjLEgQ29udGVudCBpcyBsb3csIGZvcmNlIHJlc2VlZGluZy4uLicpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlZWRlci5mb3JjZVNlZWQoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBDb250ZW50IHJlZnJlc2hlZDogJHtyZXN1bHQuYXJ0aWNsZXNBZGRlZH0gYXJ0aWNsZXMgYWRkZWRgLFxuICAgICAgICAgIGFjdGlvbjogJ2ZvcmNlX3NlZWQnXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE90aGVyd2lzZSwganVzdCBlbnN1cmUgbWluaW11bVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZWVkZXIuZW5zdXJlTWluaW11bUNvbnRlbnQoOCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSxcbiAgICAgICAgYWN0aW9uOiAnZW5zdXJlX21pbmltdW0nXG4gICAgICB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDb250ZW50IHJlZnJlc2ggZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdDb250ZW50IHJlZnJlc2ggZmFpbGVkJyxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IGFwcEluaXRpYWxpemVyID0gbmV3IEFwcEluaXRpYWxpemVyKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBcHBJbml0aWFsaXplcixcbiAgYXBwSW5pdGlhbGl6ZXJcbn07ICJdLCJuYW1lcyI6WyJEYXRhYmFzZVNlZWRlciIsInJlcXVpcmUiLCJnZXREYXRhYmFzZSIsIkFwcEluaXRpYWxpemVyIiwiY29uc3RydWN0b3IiLCJzZWVkZXIiLCJpc0luaXRpYWxpemVkIiwiaW5pdGlhbGl6ZSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY29uc29sZSIsImxvZyIsImRiIiwiRXJyb3IiLCJjdXJyZW50Q291bnQiLCJnZXRBcnRpY2xlQ291bnQiLCJzZWVkUmVzdWx0IiwiZW5zdXJlTWluaW11bUNvbnRlbnQiLCJmaW5hbENvdW50IiwiYXJ0aWNsZUNvdW50IiwiZXJyb3IiLCJmb3JjZVNlZWQiLCJlbWVyZ2VuY3lDb3VudCIsIndhcm5pbmciLCJlbWVyZ2VuY3lFcnJvciIsImlzQXBwUmVhZHkiLCJyZWFkeSIsInJlZnJlc2hDb250ZW50IiwicmVzdWx0IiwiYXJ0aWNsZXNBZGRlZCIsImFjdGlvbiIsImFwcEluaXRpYWxpemVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/services/app-initializer.js\n");

/***/ }),

/***/ "(api)/./lib/services/database-seeder.js":
/*!*****************************************!*\
  !*** ./lib/services/database-seeder.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { getDatabase } = __webpack_require__(/*! ./database */ \"(api)/./lib/services/database.js\");\nconst { SEED_ARTICLES } = __webpack_require__(/*! ../data/seed-articles */ \"(api)/./lib/data/seed-articles.js\");\nconst { contentFormatter } = __webpack_require__(/*! ../utils/contentFormatter */ \"(api)/./lib/utils/contentFormatter.js\");\nconst sqlite3 = (__webpack_require__(/*! sqlite3 */ \"sqlite3\").verbose)();\nconst path = __webpack_require__(/*! path */ \"path\");\nclass DatabaseSeeder {\n    constructor(){\n        this.db = getDatabase();\n        this.dbPath = path.join(process.cwd(), \"data\", \"news.db\");\n        this.contentFormatter = contentFormatter;\n    }\n    /**\n   * Check if database has any articles\n   */ async isDatabaseEmpty() {\n        return new Promise((resolve, reject)=>{\n            const db = new sqlite3.Database(this.dbPath);\n            db.get(\"SELECT COUNT(*) as count FROM articles\", [], (err, row)=>{\n                db.close();\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(row.count === 0);\n                }\n            });\n        });\n    }\n    /**\n   * Get current article count\n   */ async getArticleCount() {\n        return new Promise((resolve, reject)=>{\n            const db = new sqlite3.Database(this.dbPath);\n            db.get(\"SELECT COUNT(*) as count FROM articles\", [], (err, row)=>{\n                db.close();\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(row.count);\n                }\n            });\n        });\n    }\n    /**\n   * Check if seed articles already exist\n   */ async seedArticlesExist() {\n        return new Promise((resolve, reject)=>{\n            const db = new sqlite3.Database(this.dbPath);\n            const seedUrls = SEED_ARTICLES.map((article)=>article.url);\n            const placeholders = seedUrls.map(()=>\"?\").join(\",\");\n            db.get(`SELECT COUNT(*) as count FROM articles WHERE url IN (${placeholders})`, seedUrls, (err, row)=>{\n                db.close();\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(row.count > 0);\n                }\n            });\n        });\n    }\n    /**\n   * Seed database with sample articles\n   */ async seedDatabase() {\n        try {\n            console.log(\"\\uD83C\\uDF31 Starting database seeding process...\");\n            // Check if seed articles already exist\n            const seedExists = await this.seedArticlesExist();\n            if (seedExists) {\n                console.log(\" Seed articles already exist, skipping...\");\n                return {\n                    success: true,\n                    message: \"Seed articles already exist\",\n                    articlesAdded: 0\n                };\n            }\n            const db = new sqlite3.Database(this.dbPath);\n            const insertQuery = `\n        INSERT OR IGNORE INTO articles \n        (title, content, summary, url, imageUrl, category, publishedAt, scrapedAt, \n         sourceName, sourceUrl, sourceRegion, sourceLogo, importance, countries, tags) \n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `;\n            let successCount = 0;\n            let errorCount = 0;\n            for (const article of SEED_ARTICLES){\n                try {\n                    // Apply enhanced formatting to seed article content\n                    const formattedContent = this.contentFormatter.formatArticleContent(article.content, article.title);\n                    // Apply enhanced formatting to summary\n                    const formattedSummary = this.contentFormatter.formatSummary(article.summary, 300);\n                    await new Promise((resolve, reject)=>{\n                        const values = [\n                            article.title,\n                            formattedContent || article.content,\n                            formattedSummary || article.summary,\n                            article.url,\n                            article.imageUrl,\n                            article.category,\n                            article.publishedAt,\n                            article.scrapedAt,\n                            article.sourceName,\n                            article.sourceUrl,\n                            article.sourceRegion,\n                            article.sourceLogo,\n                            article.importance,\n                            article.countries,\n                            article.tags\n                        ];\n                        db.run(insertQuery, values, function(err) {\n                            if (err) {\n                                console.error(` Error inserting seed article: ${article.title}`, err.message);\n                                errorCount++;\n                                reject(err);\n                            } else {\n                                console.log(` Seeded formatted article: ${article.title}`);\n                                successCount++;\n                                resolve();\n                            }\n                        });\n                    });\n                } catch (error) {\n                    continue;\n                }\n            }\n            db.close();\n            console.log(` Seeding complete: ${successCount} articles added, ${errorCount} errors`);\n            return {\n                success: true,\n                message: `Database seeded successfully with ${successCount} formatted articles`,\n                articlesAdded: successCount,\n                errors: errorCount\n            };\n        } catch (error) {\n            console.error(\" Error during seeding:\", error);\n            return {\n                success: false,\n                message: \"Error seeding database\",\n                error: error.message\n            };\n        }\n    }\n    /**\n   * Ensure database has minimum content\n   */ async ensureMinimumContent(minArticles = 8) {\n        try {\n            const currentCount = await this.getArticleCount();\n            console.log(` Current database has ${currentCount} articles`);\n            if (currentCount < minArticles) {\n                console.log(` Database has fewer than ${minArticles} articles, seeding...`);\n                const result = await this.seedDatabase();\n                return result;\n            } else {\n                console.log(` Database has sufficient content (${currentCount} articles)`);\n                return {\n                    success: true,\n                    message: `Database has sufficient content (${currentCount} articles)`,\n                    articlesAdded: 0\n                };\n            }\n        } catch (error) {\n            console.error(\" Error ensuring minimum content:\", error);\n            return {\n                success: false,\n                message: \"Error checking database content\",\n                error: error.message\n            };\n        }\n    }\n    /**\n   * Force reseed database (for testing or reset)\n   */ async forceSeed() {\n        try {\n            console.log(\"\\uD83D\\uDD04 Force seeding database...\");\n            // Delete existing seed articles first\n            const db = new sqlite3.Database(this.dbPath);\n            const seedUrls = SEED_ARTICLES.map((article)=>article.url);\n            const placeholders = seedUrls.map(()=>\"?\").join(\",\");\n            await new Promise((resolve, reject)=>{\n                db.run(`DELETE FROM articles WHERE url IN (${placeholders})`, seedUrls, (err)=>{\n                    if (err) reject(err);\n                    else resolve();\n                });\n            });\n            db.close();\n            console.log(\"\\uD83D\\uDDD1 Removed existing seed articles\");\n            // Now seed with fresh data\n            return await this.seedDatabase();\n        } catch (error) {\n            console.error(\" Error during force seed:\", error);\n            return {\n                success: false,\n                message: \"Error force seeding database\",\n                error: error.message\n            };\n        }\n    }\n    /**\n   * Add additional seed articles for specific categories\n   */ async addCategorySeeds(category) {\n        const categoryArticles = SEED_ARTICLES.filter((article)=>article.category.toLowerCase() === category.toLowerCase());\n        if (categoryArticles.length === 0) {\n            return {\n                success: false,\n                message: `No seed articles found for category: ${category}`\n            };\n        }\n        try {\n            const db = new sqlite3.Database(this.dbPath);\n            let addedCount = 0;\n            for (const article of categoryArticles){\n                const values = [\n                    article.title,\n                    article.content,\n                    article.summary,\n                    article.url,\n                    article.imageUrl,\n                    article.category,\n                    article.publishedAt,\n                    article.scrapedAt,\n                    article.sourceName,\n                    article.sourceUrl,\n                    article.sourceRegion,\n                    article.sourceLogo,\n                    article.importance,\n                    article.countries,\n                    article.tags\n                ];\n                try {\n                    await new Promise((resolve, reject)=>{\n                        db.run(`INSERT OR IGNORE INTO articles \n               (title, content, summary, url, imageUrl, category, publishedAt, scrapedAt, \n                sourceName, sourceUrl, sourceRegion, sourceLogo, importance, countries, tags) \n               VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, values, function(err) {\n                            if (err) reject(err);\n                            else {\n                                if (this.changes > 0) addedCount++;\n                                resolve();\n                            }\n                        });\n                    });\n                } catch (error) {\n                    console.error(`Error adding category seed: ${article.title}`, error);\n                }\n            }\n            db.close();\n            return {\n                success: true,\n                message: `Added ${addedCount} seed articles for category: ${category}`,\n                articlesAdded: addedCount\n            };\n        } catch (error) {\n            console.error(\"Error adding category seeds:\", error);\n            return {\n                success: false,\n                message: \"Error adding category seeds\",\n                error: error.message\n            };\n        }\n    }\n}\nmodule.exports = DatabaseSeeder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztnQkFDTDFCLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1R5QixPQUFPQSxNQUFNekIsT0FBTztZQUN0QjtRQUNGO0lBQ0Y7QUFDRjtBQUVBdUMsT0FBT0MsT0FBTyxHQUFHckUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tdXNsaW0tbmV3cy1hZ2dyZWdhdG9yLy4vbGliL3NlcnZpY2VzL2RhdGFiYXNlLXNlZWRlci5qcz8xNzIzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZ2V0RGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4vZGF0YWJhc2UnKTtcbmNvbnN0IHsgU0VFRF9BUlRJQ0xFUyB9ID0gcmVxdWlyZSgnLi4vZGF0YS9zZWVkLWFydGljbGVzJyk7XG5jb25zdCB7IGNvbnRlbnRGb3JtYXR0ZXIgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnRlbnRGb3JtYXR0ZXInKTtcbmNvbnN0IHNxbGl0ZTMgPSByZXF1aXJlKCdzcWxpdGUzJykudmVyYm9zZSgpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuY2xhc3MgRGF0YWJhc2VTZWVkZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRiID0gZ2V0RGF0YWJhc2UoKTtcbiAgICB0aGlzLmRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScsICduZXdzLmRiJyk7XG4gICAgdGhpcy5jb250ZW50Rm9ybWF0dGVyID0gY29udGVudEZvcm1hdHRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBkYXRhYmFzZSBoYXMgYW55IGFydGljbGVzXG4gICAqL1xuICBhc3luYyBpc0RhdGFiYXNlRW1wdHkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UodGhpcy5kYlBhdGgpO1xuICAgICAgXG4gICAgICBkYi5nZXQoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGFydGljbGVzJywgW10sIChlcnIsIHJvdykgPT4ge1xuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShyb3cuY291bnQgPT09IDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBhcnRpY2xlIGNvdW50XG4gICAqL1xuICBhc3luYyBnZXRBcnRpY2xlQ291bnQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UodGhpcy5kYlBhdGgpO1xuICAgICAgXG4gICAgICBkYi5nZXQoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGFydGljbGVzJywgW10sIChlcnIsIHJvdykgPT4ge1xuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShyb3cuY291bnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBzZWVkIGFydGljbGVzIGFscmVhZHkgZXhpc3RcbiAgICovXG4gIGFzeW5jIHNlZWRBcnRpY2xlc0V4aXN0KCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKHRoaXMuZGJQYXRoKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VlZFVybHMgPSBTRUVEX0FSVElDTEVTLm1hcChhcnRpY2xlID0+IGFydGljbGUudXJsKTtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IHNlZWRVcmxzLm1hcCgoKSA9PiAnPycpLmpvaW4oJywnKTtcbiAgICAgIFxuICAgICAgZGIuZ2V0KFxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gYXJ0aWNsZXMgV0hFUkUgdXJsIElOICgke3BsYWNlaG9sZGVyc30pYCxcbiAgICAgICAgc2VlZFVybHMsXG4gICAgICAgIChlcnIsIHJvdykgPT4ge1xuICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUocm93LmNvdW50ID4gMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlZWQgZGF0YWJhc2Ugd2l0aCBzYW1wbGUgYXJ0aWNsZXNcbiAgICovXG4gIGFzeW5jIHNlZWREYXRhYmFzZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjLEgU3RhcnRpbmcgZGF0YWJhc2Ugc2VlZGluZyBwcm9jZXNzLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHNlZWQgYXJ0aWNsZXMgYWxyZWFkeSBleGlzdFxuICAgICAgY29uc3Qgc2VlZEV4aXN0cyA9IGF3YWl0IHRoaXMuc2VlZEFydGljbGVzRXhpc3QoKTtcbiAgICAgIGlmIChzZWVkRXhpc3RzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgU2VlZCBhcnRpY2xlcyBhbHJlYWR5IGV4aXN0LCBza2lwcGluZy4uLicpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnU2VlZCBhcnRpY2xlcyBhbHJlYWR5IGV4aXN0JywgYXJ0aWNsZXNBZGRlZDogMCB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKHRoaXMuZGJQYXRoKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBhcnRpY2xlcyBcbiAgICAgICAgKHRpdGxlLCBjb250ZW50LCBzdW1tYXJ5LCB1cmwsIGltYWdlVXJsLCBjYXRlZ29yeSwgcHVibGlzaGVkQXQsIHNjcmFwZWRBdCwgXG4gICAgICAgICBzb3VyY2VOYW1lLCBzb3VyY2VVcmwsIHNvdXJjZVJlZ2lvbiwgc291cmNlTG9nbywgaW1wb3J0YW5jZSwgY291bnRyaWVzLCB0YWdzKSBcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICAgICAgYDtcblxuICAgICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICBsZXQgZXJyb3JDb3VudCA9IDA7XG5cbiAgICAgIGZvciAoY29uc3QgYXJ0aWNsZSBvZiBTRUVEX0FSVElDTEVTKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQXBwbHkgZW5oYW5jZWQgZm9ybWF0dGluZyB0byBzZWVkIGFydGljbGUgY29udGVudFxuICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSB0aGlzLmNvbnRlbnRGb3JtYXR0ZXIuZm9ybWF0QXJ0aWNsZUNvbnRlbnQoXG4gICAgICAgICAgICBhcnRpY2xlLmNvbnRlbnQsIFxuICAgICAgICAgICAgYXJ0aWNsZS50aXRsZVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgZW5oYW5jZWQgZm9ybWF0dGluZyB0byBzdW1tYXJ5XG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkU3VtbWFyeSA9IHRoaXMuY29udGVudEZvcm1hdHRlci5mb3JtYXRTdW1tYXJ5KFxuICAgICAgICAgICAgYXJ0aWNsZS5zdW1tYXJ5LCBcbiAgICAgICAgICAgIDMwMFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXG4gICAgICAgICAgICAgIGFydGljbGUudGl0bGUsXG4gICAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQgfHwgYXJ0aWNsZS5jb250ZW50LCAvLyBVc2UgZm9ybWF0dGVkIGNvbnRlbnQgb3IgZmFsbGJhY2tcbiAgICAgICAgICAgICAgZm9ybWF0dGVkU3VtbWFyeSB8fCBhcnRpY2xlLnN1bW1hcnksIC8vIFVzZSBmb3JtYXR0ZWQgc3VtbWFyeSBvciBmYWxsYmFja1xuICAgICAgICAgICAgICBhcnRpY2xlLnVybCxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5pbWFnZVVybCxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5jYXRlZ29yeSxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5wdWJsaXNoZWRBdCxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5zY3JhcGVkQXQsXG4gICAgICAgICAgICAgIGFydGljbGUuc291cmNlTmFtZSxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5zb3VyY2VVcmwsXG4gICAgICAgICAgICAgIGFydGljbGUuc291cmNlUmVnaW9uLFxuICAgICAgICAgICAgICBhcnRpY2xlLnNvdXJjZUxvZ28sXG4gICAgICAgICAgICAgIGFydGljbGUuaW1wb3J0YW5jZSxcbiAgICAgICAgICAgICAgYXJ0aWNsZS5jb3VudHJpZXMsXG4gICAgICAgICAgICAgIGFydGljbGUudGFnc1xuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZGIucnVuKGluc2VydFF1ZXJ5LCB2YWx1ZXMsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIGluc2VydGluZyBzZWVkIGFydGljbGU6ICR7YXJ0aWNsZS50aXRsZX1gLCBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgU2VlZGVkIGZvcm1hdHRlZCBhcnRpY2xlOiAke2FydGljbGUudGl0bGV9YCk7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIG90aGVyIGFydGljbGVzIGV2ZW4gaWYgb25lIGZhaWxzXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGIuY2xvc2UoKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfjLEgU2VlZGluZyBjb21wbGV0ZTogJHtzdWNjZXNzQ291bnR9IGFydGljbGVzIGFkZGVkLCAke2Vycm9yQ291bnR9IGVycm9yc2ApO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBgRGF0YWJhc2Ugc2VlZGVkIHN1Y2Nlc3NmdWxseSB3aXRoICR7c3VjY2Vzc0NvdW50fSBmb3JtYXR0ZWQgYXJ0aWNsZXNgLFxuICAgICAgICBhcnRpY2xlc0FkZGVkOiBzdWNjZXNzQ291bnQsXG4gICAgICAgIGVycm9yczogZXJyb3JDb3VudFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZHVyaW5nIHNlZWRpbmc6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciBzZWVkaW5nIGRhdGFiYXNlJyxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBkYXRhYmFzZSBoYXMgbWluaW11bSBjb250ZW50XG4gICAqL1xuICBhc3luYyBlbnN1cmVNaW5pbXVtQ29udGVudChtaW5BcnRpY2xlcyA9IDgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudENvdW50ID0gYXdhaXQgdGhpcy5nZXRBcnRpY2xlQ291bnQoKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIEN1cnJlbnQgZGF0YWJhc2UgaGFzICR7Y3VycmVudENvdW50fSBhcnRpY2xlc2ApO1xuXG4gICAgICBpZiAoY3VycmVudENvdW50IDwgbWluQXJ0aWNsZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfk4ggRGF0YWJhc2UgaGFzIGZld2VyIHRoYW4gJHttaW5BcnRpY2xlc30gYXJ0aWNsZXMsIHNlZWRpbmcuLi5gKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZWVkRGF0YWJhc2UoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgRGF0YWJhc2UgaGFzIHN1ZmZpY2llbnQgY29udGVudCAoJHtjdXJyZW50Q291bnR9IGFydGljbGVzKWApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYERhdGFiYXNlIGhhcyBzdWZmaWNpZW50IGNvbnRlbnQgKCR7Y3VycmVudENvdW50fSBhcnRpY2xlcylgLFxuICAgICAgICAgIGFydGljbGVzQWRkZWQ6IDBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGVuc3VyaW5nIG1pbmltdW0gY29udGVudDonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGNoZWNraW5nIGRhdGFiYXNlIGNvbnRlbnQnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yY2UgcmVzZWVkIGRhdGFiYXNlIChmb3IgdGVzdGluZyBvciByZXNldClcbiAgICovXG4gIGFzeW5jIGZvcmNlU2VlZCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgRm9yY2Ugc2VlZGluZyBkYXRhYmFzZS4uLicpO1xuICAgICAgXG4gICAgICAvLyBEZWxldGUgZXhpc3Rpbmcgc2VlZCBhcnRpY2xlcyBmaXJzdFxuICAgICAgY29uc3QgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZSh0aGlzLmRiUGF0aCk7XG4gICAgICBjb25zdCBzZWVkVXJscyA9IFNFRURfQVJUSUNMRVMubWFwKGFydGljbGUgPT4gYXJ0aWNsZS51cmwpO1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXJzID0gc2VlZFVybHMubWFwKCgpID0+ICc/Jykuam9pbignLCcpO1xuICAgICAgXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGRiLnJ1bihcbiAgICAgICAgICBgREVMRVRFIEZST00gYXJ0aWNsZXMgV0hFUkUgdXJsIElOICgke3BsYWNlaG9sZGVyc30pYCxcbiAgICAgICAgICBzZWVkVXJscyxcbiAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIGVsc2UgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBkYi5jbG9zZSgpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gUmVtb3ZlZCBleGlzdGluZyBzZWVkIGFydGljbGVzJyk7XG5cbiAgICAgIC8vIE5vdyBzZWVkIHdpdGggZnJlc2ggZGF0YVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VlZERhdGFiYXNlKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGR1cmluZyBmb3JjZSBzZWVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgZm9yY2Ugc2VlZGluZyBkYXRhYmFzZScsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYWRkaXRpb25hbCBzZWVkIGFydGljbGVzIGZvciBzcGVjaWZpYyBjYXRlZ29yaWVzXG4gICAqL1xuICBhc3luYyBhZGRDYXRlZ29yeVNlZWRzKGNhdGVnb3J5KSB7XG4gICAgY29uc3QgY2F0ZWdvcnlBcnRpY2xlcyA9IFNFRURfQVJUSUNMRVMuZmlsdGVyKGFydGljbGUgPT4gXG4gICAgICBhcnRpY2xlLmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkgPT09IGNhdGVnb3J5LnRvTG93ZXJDYXNlKClcbiAgICApO1xuXG4gICAgaWYgKGNhdGVnb3J5QXJ0aWNsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYE5vIHNlZWQgYXJ0aWNsZXMgZm91bmQgZm9yIGNhdGVnb3J5OiAke2NhdGVnb3J5fWBcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UodGhpcy5kYlBhdGgpO1xuICAgICAgbGV0IGFkZGVkQ291bnQgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IGFydGljbGUgb2YgY2F0ZWdvcnlBcnRpY2xlcykge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXG4gICAgICAgICAgYXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICBhcnRpY2xlLmNvbnRlbnQsXG4gICAgICAgICAgYXJ0aWNsZS5zdW1tYXJ5LFxuICAgICAgICAgIGFydGljbGUudXJsLFxuICAgICAgICAgIGFydGljbGUuaW1hZ2VVcmwsXG4gICAgICAgICAgYXJ0aWNsZS5jYXRlZ29yeSxcbiAgICAgICAgICBhcnRpY2xlLnB1Ymxpc2hlZEF0LFxuICAgICAgICAgIGFydGljbGUuc2NyYXBlZEF0LFxuICAgICAgICAgIGFydGljbGUuc291cmNlTmFtZSxcbiAgICAgICAgICBhcnRpY2xlLnNvdXJjZVVybCxcbiAgICAgICAgICBhcnRpY2xlLnNvdXJjZVJlZ2lvbixcbiAgICAgICAgICBhcnRpY2xlLnNvdXJjZUxvZ28sXG4gICAgICAgICAgYXJ0aWNsZS5pbXBvcnRhbmNlLFxuICAgICAgICAgIGFydGljbGUuY291bnRyaWVzLFxuICAgICAgICAgIGFydGljbGUudGFnc1xuICAgICAgICBdO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgZGIucnVuKFxuICAgICAgICAgICAgICBgSU5TRVJUIE9SIElHTk9SRSBJTlRPIGFydGljbGVzIFxuICAgICAgICAgICAgICAgKHRpdGxlLCBjb250ZW50LCBzdW1tYXJ5LCB1cmwsIGltYWdlVXJsLCBjYXRlZ29yeSwgcHVibGlzaGVkQXQsIHNjcmFwZWRBdCwgXG4gICAgICAgICAgICAgICAgc291cmNlTmFtZSwgc291cmNlVXJsLCBzb3VyY2VSZWdpb24sIHNvdXJjZUxvZ28sIGltcG9ydGFuY2UsIGNvdW50cmllcywgdGFncykgXG4gICAgICAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgICAgICAgICAgdmFsdWVzLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPiAwKSBhZGRlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFkZGluZyBjYXRlZ29yeSBzZWVkOiAke2FydGljbGUudGl0bGV9YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRiLmNsb3NlKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGBBZGRlZCAke2FkZGVkQ291bnR9IHNlZWQgYXJ0aWNsZXMgZm9yIGNhdGVnb3J5OiAke2NhdGVnb3J5fWAsXG4gICAgICAgIGFydGljbGVzQWRkZWQ6IGFkZGVkQ291bnRcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGNhdGVnb3J5IHNlZWRzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgYWRkaW5nIGNhdGVnb3J5IHNlZWRzJyxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YWJhc2VTZWVkZXI7ICJdLCJuYW1lcyI6WyJnZXREYXRhYmFzZSIsInJlcXVpcmUiLCJTRUVEX0FSVElDTEVTIiwiY29udGVudEZvcm1hdHRlciIsInNxbGl0ZTMiLCJ2ZXJib3NlIiwicGF0aCIsIkRhdGFiYXNlU2VlZGVyIiwiY29uc3RydWN0b3IiLCJkYiIsImRiUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiaXNEYXRhYmFzZUVtcHR5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJEYXRhYmFzZSIsImdldCIsImVyciIsInJvdyIsImNsb3NlIiwiY291bnQiLCJnZXRBcnRpY2xlQ291bnQiLCJzZWVkQXJ0aWNsZXNFeGlzdCIsInNlZWRVcmxzIiwibWFwIiwiYXJ0aWNsZSIsInVybCIsInBsYWNlaG9sZGVycyIsInNlZWREYXRhYmFzZSIsImNvbnNvbGUiLCJsb2ciLCJzZWVkRXhpc3RzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJhcnRpY2xlc0FkZGVkIiwiaW5zZXJ0UXVlcnkiLCJzdWNjZXNzQ291bnQiLCJlcnJvckNvdW50IiwiZm9ybWF0dGVkQ29udGVudCIsImZvcm1hdEFydGljbGVDb250ZW50IiwiY29udGVudCIsInRpdGxlIiwiZm9ybWF0dGVkU3VtbWFyeSIsImZvcm1hdFN1bW1hcnkiLCJzdW1tYXJ5IiwidmFsdWVzIiwiaW1hZ2VVcmwiLCJjYXRlZ29yeSIsInB1Ymxpc2hlZEF0Iiwic2NyYXBlZEF0Iiwic291cmNlTmFtZSIsInNvdXJjZVVybCIsInNvdXJjZVJlZ2lvbiIsInNvdXJjZUxvZ28iLCJpbXBvcnRhbmNlIiwiY291bnRyaWVzIiwidGFncyIsInJ1biIsImVycm9yIiwiZXJyb3JzIiwiZW5zdXJlTWluaW11bUNvbnRlbnQiLCJtaW5BcnRpY2xlcyIsImN1cnJlbnRDb3VudCIsInJlc3VsdCIsImZvcmNlU2VlZCIsImFkZENhdGVnb3J5U2VlZHMiLCJjYXRlZ29yeUFydGljbGVzIiwiZmlsdGVyIiwidG9Mb3dlckNhc2UiLCJsZW5ndGgiLCJhZGRlZENvdW50IiwiY2hhbmdlcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/services/database-seeder.js\n");

/***/ }),

/***/ "(api)/./lib/services/database.js":
/*!**********************************!*\
  !*** ./lib/services/database.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst sqlite3 = (__webpack_require__(/*! sqlite3 */ \"sqlite3\").verbose)();\nconst path = __webpack_require__(/*! path */ \"path\");\nconst fs = __webpack_require__(/*! fs-extra */ \"fs-extra\");\nclass DatabaseService {\n    constructor(){\n        this.db = null;\n        this.init();\n    }\n    init() {\n        // Ensure data directory exists\n        const dbPath = process.env.DATABASE_PATH || \"./data/news.db\";\n        const dbDir = path.dirname(dbPath);\n        fs.ensureDirSync(dbDir);\n        // Initialize database\n        return new Promise((resolve, reject)=>{\n            this.db = new sqlite3.Database(dbPath, (err)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    console.log(\"Connected to SQLite database\");\n                    this.db.exec(\"PRAGMA journal_mode = WAL; PRAGMA foreign_keys = ON;\", (err)=>{\n                        if (err) {\n                            reject(err);\n                        } else {\n                            this.createTables().then(resolve).catch(reject);\n                        }\n                    });\n                }\n            });\n        });\n    }\n    createTables() {\n        return new Promise((resolve, reject)=>{\n            // Articles table\n            const createArticlesTable = `\n        CREATE TABLE IF NOT EXISTS articles (\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\n          title TEXT NOT NULL,\n          content TEXT NOT NULL,\n          summary TEXT NOT NULL,\n          url TEXT UNIQUE NOT NULL,\n          source_name TEXT NOT NULL,\n          source_url TEXT NOT NULL,\n          source_logo TEXT,\n          category TEXT NOT NULL,\n          subcategory TEXT,\n          countries TEXT, -- JSON array as string\n          regions TEXT,   -- JSON array as string\n          tags TEXT,      -- JSON array as string\n          published_at DATETIME NOT NULL,\n          scraped_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n          image_url TEXT,\n          author TEXT,\n          language TEXT DEFAULT 'en',\n          sentiment TEXT DEFAULT 'neutral',\n          importance INTEGER DEFAULT 5,\n          reading_time INTEGER DEFAULT 0,\n          is_active BOOLEAN DEFAULT 1,\n          created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n          updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n          md_file_path TEXT -- Path to markdown file\n        )\n      `;\n            // Create indexes\n            const indexes = [\n                \"CREATE INDEX IF NOT EXISTS idx_articles_category ON articles(category)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_published_at ON articles(published_at DESC)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_source ON articles(source_name)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_url ON articles(url)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_active ON articles(is_active)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_importance ON articles(importance DESC)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_sentiment ON articles(sentiment)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_category_published ON articles(category, published_at DESC)\",\n                \"CREATE INDEX IF NOT EXISTS idx_articles_active_published ON articles(is_active, published_at DESC)\"\n            ];\n            // Execute table creation\n            this.db.exec(createArticlesTable, (err)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    // Execute index creation\n                    let indexCount = 0;\n                    const totalIndexes = indexes.length;\n                    if (totalIndexes === 0) {\n                        resolve();\n                        return;\n                    }\n                    indexes.forEach((indexSql)=>{\n                        this.db.exec(indexSql, (err)=>{\n                            if (err) {\n                                console.error(\"Error creating index:\", err);\n                            }\n                            indexCount++;\n                            if (indexCount === totalIndexes) {\n                                // Try to enable full-text search\n                                this.db.exec(`\n                  CREATE VIRTUAL TABLE IF NOT EXISTS articles_fts USING fts5(\n                    title, content, summary, tags, content='articles', content_rowid='id'\n                  )\n                `, (err)=>{\n                                    if (err) {\n                                        console.log(\"FTS not available or already exists\");\n                                    }\n                                    resolve();\n                                });\n                            }\n                        });\n                    });\n                }\n            });\n        });\n    }\n    // Article CRUD operations\n    createArticle(articleData) {\n        return new Promise((resolve, reject)=>{\n            const stmt = this.db.prepare(`\n        INSERT INTO articles (\n          title, content, summary, url, source_name, source_url, source_logo,\n          category, subcategory, countries, regions, tags, published_at,\n          image_url, author, language, sentiment, importance, reading_time, md_file_path\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `);\n            // Store reference to database for use in callback\n            const db = this.db;\n            stmt.run([\n                articleData.title,\n                articleData.content,\n                articleData.summary,\n                articleData.url,\n                articleData.source.name,\n                articleData.source.url,\n                articleData.source.logo || null,\n                articleData.category,\n                articleData.subcategory || null,\n                JSON.stringify(articleData.countries || []),\n                JSON.stringify(articleData.regions || []),\n                JSON.stringify(articleData.tags || []),\n                articleData.publishedAt,\n                articleData.imageUrl || null,\n                articleData.author || null,\n                articleData.language || \"en\",\n                articleData.sentiment || \"neutral\",\n                articleData.importance || 5,\n                articleData.readingTime || 0,\n                articleData.mdFilePath || null\n            ], function(err) {\n                if (err) {\n                    reject(err);\n                } else {\n                    // Update FTS index - use stored db reference\n                    const ftsStmt = db.prepare(`\n            INSERT INTO articles_fts(rowid, title, content, summary, tags)\n            VALUES (?, ?, ?, ?, ?)\n          `);\n                    ftsStmt.run([\n                        this.lastID,\n                        articleData.title,\n                        articleData.content,\n                        articleData.summary,\n                        JSON.stringify(articleData.tags || [])\n                    ], (ftsErr)=>{\n                        // Don't fail if FTS insert fails\n                        if (ftsErr) {\n                            console.log(\"FTS insert failed:\", ftsErr.message);\n                        }\n                        ftsStmt.finalize();\n                        resolve({\n                            id: this.lastID,\n                            ...articleData\n                        });\n                    });\n                }\n            });\n            stmt.finalize();\n        });\n    }\n    getArticleById(id) {\n        return new Promise((resolve, reject)=>{\n            this.db.get(\"SELECT * FROM articles WHERE id = ? AND is_active = 1\", [\n                id\n            ], (err, row)=>{\n                if (err) {\n                    reject(err);\n                } else if (row) {\n                    resolve(this.parseArticle(row));\n                } else {\n                    resolve(null);\n                }\n            });\n        });\n    }\n    getArticleByUrl(url) {\n        return new Promise((resolve, reject)=>{\n            this.db.get(\"SELECT * FROM articles WHERE url = ?\", [\n                url\n            ], (err, row)=>{\n                if (err) {\n                    reject(err);\n                } else if (row) {\n                    resolve(this.parseArticle(row));\n                } else {\n                    resolve(null);\n                }\n            });\n        });\n    }\n    getArticles(filters = {}) {\n        return new Promise((resolve, reject)=>{\n            let query = \"SELECT * FROM articles WHERE is_active = 1\";\n            const params = [];\n            // Add filters\n            if (filters.category) {\n                query += \" AND category = ?\";\n                params.push(filters.category);\n            }\n            if (filters.country) {\n                query += \" AND countries LIKE ?\";\n                params.push(`%\"${filters.country}\"%`);\n            }\n            if (filters.region) {\n                query += \" AND regions LIKE ?\";\n                params.push(`%\"${filters.region}\"%`);\n            }\n            if (filters.source) {\n                query += \" AND source_name = ?\";\n                params.push(filters.source);\n            }\n            if (filters.sentiment) {\n                query += \" AND sentiment = ?\";\n                params.push(filters.sentiment);\n            }\n            if (filters.importance) {\n                query += \" AND importance >= ?\";\n                params.push(filters.importance);\n            }\n            if (filters.search) {\n                query += \" AND (title LIKE ? OR content LIKE ? OR summary LIKE ?)\";\n                const searchTerm = `%${filters.search}%`;\n                params.push(searchTerm, searchTerm, searchTerm);\n            }\n            // Add sorting\n            const sortBy = filters.sortBy || \"published_at\";\n            const sortOrder = filters.sortOrder || \"desc\";\n            query += ` ORDER BY ${sortBy} ${sortOrder.toUpperCase()}`;\n            // Add pagination\n            if (filters.limit) {\n                query += \" LIMIT ?\";\n                params.push(filters.limit);\n                if (filters.offset) {\n                    query += \" OFFSET ?\";\n                    params.push(filters.offset);\n                }\n            }\n            this.db.all(query, params, (err, rows)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(rows.map((row)=>this.parseArticle(row)));\n                }\n            });\n        });\n    }\n    countArticles(filters = {}) {\n        return new Promise((resolve, reject)=>{\n            let query = \"SELECT COUNT(*) as count FROM articles WHERE is_active = 1\";\n            const params = [];\n            // Add same filters as getArticles\n            if (filters.category) {\n                query += \" AND category = ?\";\n                params.push(filters.category);\n            }\n            if (filters.country) {\n                query += \" AND countries LIKE ?\";\n                params.push(`%\"${filters.country}\"%`);\n            }\n            if (filters.region) {\n                query += \" AND regions LIKE ?\";\n                params.push(`%\"${filters.region}\"%`);\n            }\n            if (filters.source) {\n                query += \" AND source_name = ?\";\n                params.push(filters.source);\n            }\n            if (filters.search) {\n                query += \" AND (title LIKE ? OR content LIKE ? OR summary LIKE ?)\";\n                const searchTerm = `%${filters.search}%`;\n                params.push(searchTerm, searchTerm, searchTerm);\n            }\n            this.db.get(query, params, (err, row)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(row.count);\n                }\n            });\n        });\n    }\n    getCategoryCounts() {\n        return new Promise((resolve, reject)=>{\n            this.db.all(`\n        SELECT category, COUNT(*) as count \n        FROM articles \n        WHERE is_active = 1 \n        GROUP BY category \n        ORDER BY count DESC\n      `, [], (err, rows)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(rows);\n                }\n            });\n        });\n    }\n    getCountryCounts() {\n        return new Promise((resolve, reject)=>{\n            this.db.all(`\n        SELECT countries \n        FROM articles \n        WHERE is_active = 1 AND countries IS NOT NULL AND countries != '[]'\n      `, [], (err, rows)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    const countryCounts = {};\n                    rows.forEach((row)=>{\n                        try {\n                            const countries = JSON.parse(row.countries);\n                            countries.forEach((country)=>{\n                                countryCounts[country] = (countryCounts[country] || 0) + 1;\n                            });\n                        } catch (error) {\n                        // Skip invalid JSON\n                        }\n                    });\n                    const result = Object.entries(countryCounts).map(([name, count])=>({\n                            name,\n                            count\n                        })).sort((a, b)=>b.count - a.count);\n                    resolve(result);\n                }\n            });\n        });\n    }\n    getRelatedArticles(articleId, limit = 5) {\n        return new Promise((resolve, reject)=>{\n            // First get the article to find related ones\n            this.getArticleById(articleId).then((article)=>{\n                if (!article) {\n                    resolve([]);\n                    return;\n                }\n                this.db.all(`\n          SELECT * FROM articles \n          WHERE id != ? AND is_active = 1 \n          AND (\n            category = ? OR \n            countries LIKE ? OR \n            regions LIKE ?\n          )\n          ORDER BY published_at DESC \n          LIMIT ?\n        `, [\n                    articleId,\n                    article.category,\n                    `%${article.countries[0] || \"\"}%`,\n                    `%${article.regions[0] || \"\"}%`,\n                    limit\n                ], (err, rows)=>{\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(rows.map((row)=>this.parseArticle(row)));\n                    }\n                });\n            }).catch(reject);\n        });\n    }\n    parseArticle(article) {\n        return {\n            _id: article.id,\n            id: article.id,\n            title: article.title,\n            content: article.content,\n            summary: article.summary,\n            url: article.url,\n            source: {\n                name: article.source_name,\n                url: article.source_url,\n                logo: article.source_logo\n            },\n            category: article.category,\n            subcategory: article.subcategory,\n            countries: article.countries ? JSON.parse(article.countries) : [],\n            regions: article.regions ? JSON.parse(article.regions) : [],\n            tags: article.tags ? JSON.parse(article.tags) : [],\n            publishedAt: article.published_at,\n            scrapedAt: article.scraped_at,\n            imageUrl: article.image_url,\n            author: article.author,\n            language: article.language,\n            sentiment: article.sentiment,\n            importance: article.importance,\n            readingTime: article.reading_time,\n            isActive: article.is_active,\n            createdAt: article.created_at,\n            updatedAt: article.updated_at,\n            mdFilePath: article.md_file_path\n        };\n    }\n    close() {\n        return new Promise((resolve)=>{\n            if (this.db) {\n                this.db.close((err)=>{\n                    if (err) {\n                        console.error(\"Error closing database:\", err);\n                    }\n                    resolve();\n                });\n            } else {\n                resolve();\n            }\n        });\n    }\n}\n// Singleton instance\nlet dbInstance = null;\nfunction getDatabase() {\n    if (!dbInstance) {\n        dbInstance = new DatabaseService();\n    }\n    return dbInstance;\n}\nmodule.exports = {\n    DatabaseService,\n    getDatabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhLElBQUlySDtJQUNuQjtJQUNBLE9BQU9xSDtBQUNUO0FBRUFFLE9BQU9DLE9BQU8sR0FBRztJQUFFeEg7SUFBaUJzSDtBQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVzbGltLW5ld3MtYWdncmVnYXRvci8uL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS5qcz85YzEyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNxbGl0ZTMgPSByZXF1aXJlKCdzcWxpdGUzJykudmVyYm9zZSgpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMtZXh0cmEnKTtcblxuY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kYiA9IG51bGw7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIC8vIEVuc3VyZSBkYXRhIGRpcmVjdG9yeSBleGlzdHNcbiAgICBjb25zdCBkYlBhdGggPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9QQVRIIHx8ICcuL2RhdGEvbmV3cy5kYic7XG4gICAgY29uc3QgZGJEaXIgPSBwYXRoLmRpcm5hbWUoZGJQYXRoKTtcbiAgICBmcy5lbnN1cmVEaXJTeW5jKGRiRGlyKTtcblxuICAgIC8vIEluaXRpYWxpemUgZGF0YWJhc2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5kYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKGRiUGF0aCwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBTUUxpdGUgZGF0YWJhc2UnKTtcbiAgICAgICAgICB0aGlzLmRiLmV4ZWMoJ1BSQUdNQSBqb3VybmFsX21vZGUgPSBXQUw7IFBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsnLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWJsZXMoKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlVGFibGVzKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBBcnRpY2xlcyB0YWJsZVxuICAgICAgY29uc3QgY3JlYXRlQXJ0aWNsZXNUYWJsZSA9IGBcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYXJ0aWNsZXMgKFxuICAgICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgICB0aXRsZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgIGNvbnRlbnQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBzdW1tYXJ5IFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgdXJsIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICAgIHNvdXJjZV9uYW1lIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgc291cmNlX3VybCBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgIHNvdXJjZV9sb2dvIFRFWFQsXG4gICAgICAgICAgY2F0ZWdvcnkgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICBzdWJjYXRlZ29yeSBURVhULFxuICAgICAgICAgIGNvdW50cmllcyBURVhULCAtLSBKU09OIGFycmF5IGFzIHN0cmluZ1xuICAgICAgICAgIHJlZ2lvbnMgVEVYVCwgICAtLSBKU09OIGFycmF5IGFzIHN0cmluZ1xuICAgICAgICAgIHRhZ3MgVEVYVCwgICAgICAtLSBKU09OIGFycmF5IGFzIHN0cmluZ1xuICAgICAgICAgIHB1Ymxpc2hlZF9hdCBEQVRFVElNRSBOT1QgTlVMTCxcbiAgICAgICAgICBzY3JhcGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgaW1hZ2VfdXJsIFRFWFQsXG4gICAgICAgICAgYXV0aG9yIFRFWFQsXG4gICAgICAgICAgbGFuZ3VhZ2UgVEVYVCBERUZBVUxUICdlbicsXG4gICAgICAgICAgc2VudGltZW50IFRFWFQgREVGQVVMVCAnbmV1dHJhbCcsXG4gICAgICAgICAgaW1wb3J0YW5jZSBJTlRFR0VSIERFRkFVTFQgNSxcbiAgICAgICAgICByZWFkaW5nX3RpbWUgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICAgICAgaXNfYWN0aXZlIEJPT0xFQU4gREVGQVVMVCAxLFxuICAgICAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICB1cGRhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgbWRfZmlsZV9wYXRoIFRFWFQgLS0gUGF0aCB0byBtYXJrZG93biBmaWxlXG4gICAgICAgIClcbiAgICAgIGA7XG5cbiAgICAgIC8vIENyZWF0ZSBpbmRleGVzXG4gICAgICBjb25zdCBpbmRleGVzID0gW1xuICAgICAgICAnQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FydGljbGVzX2NhdGVnb3J5IE9OIGFydGljbGVzKGNhdGVnb3J5KScsXG4gICAgICAgICdDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXJ0aWNsZXNfcHVibGlzaGVkX2F0IE9OIGFydGljbGVzKHB1Ymxpc2hlZF9hdCBERVNDKScsXG4gICAgICAgICdDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXJ0aWNsZXNfc291cmNlIE9OIGFydGljbGVzKHNvdXJjZV9uYW1lKScsXG4gICAgICAgICdDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXJ0aWNsZXNfdXJsIE9OIGFydGljbGVzKHVybCknLFxuICAgICAgICAnQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FydGljbGVzX2FjdGl2ZSBPTiBhcnRpY2xlcyhpc19hY3RpdmUpJyxcbiAgICAgICAgJ0NSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9hcnRpY2xlc19pbXBvcnRhbmNlIE9OIGFydGljbGVzKGltcG9ydGFuY2UgREVTQyknLFxuICAgICAgICAnQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2FydGljbGVzX3NlbnRpbWVudCBPTiBhcnRpY2xlcyhzZW50aW1lbnQpJyxcbiAgICAgICAgJ0NSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9hcnRpY2xlc19jYXRlZ29yeV9wdWJsaXNoZWQgT04gYXJ0aWNsZXMoY2F0ZWdvcnksIHB1Ymxpc2hlZF9hdCBERVNDKScsXG4gICAgICAgICdDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfYXJ0aWNsZXNfYWN0aXZlX3B1Ymxpc2hlZCBPTiBhcnRpY2xlcyhpc19hY3RpdmUsIHB1Ymxpc2hlZF9hdCBERVNDKScsXG4gICAgICBdO1xuXG4gICAgICAvLyBFeGVjdXRlIHRhYmxlIGNyZWF0aW9uXG4gICAgICB0aGlzLmRiLmV4ZWMoY3JlYXRlQXJ0aWNsZXNUYWJsZSwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRXhlY3V0ZSBpbmRleCBjcmVhdGlvblxuICAgICAgICAgIGxldCBpbmRleENvdW50ID0gMDtcbiAgICAgICAgICBjb25zdCB0b3RhbEluZGV4ZXMgPSBpbmRleGVzLmxlbmd0aDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodG90YWxJbmRleGVzID09PSAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGluZGV4U3FsID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGIuZXhlYyhpbmRleFNxbCwgKGVycikgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgaW5kZXg6JywgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbmRleENvdW50Kys7XG4gICAgICAgICAgICAgIGlmIChpbmRleENvdW50ID09PSB0b3RhbEluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZW5hYmxlIGZ1bGwtdGV4dCBzZWFyY2hcbiAgICAgICAgICAgICAgICB0aGlzLmRiLmV4ZWMoYFxuICAgICAgICAgICAgICAgICAgQ1JFQVRFIFZJUlRVQUwgVEFCTEUgSUYgTk9UIEVYSVNUUyBhcnRpY2xlc19mdHMgVVNJTkcgZnRzNShcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUsIGNvbnRlbnQsIHN1bW1hcnksIHRhZ3MsIGNvbnRlbnQ9J2FydGljbGVzJywgY29udGVudF9yb3dpZD0naWQnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYCwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRlRTIG5vdCBhdmFpbGFibGUgb3IgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQXJ0aWNsZSBDUlVEIG9wZXJhdGlvbnNcbiAgY3JlYXRlQXJ0aWNsZShhcnRpY2xlRGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgICAgSU5TRVJUIElOVE8gYXJ0aWNsZXMgKFxuICAgICAgICAgIHRpdGxlLCBjb250ZW50LCBzdW1tYXJ5LCB1cmwsIHNvdXJjZV9uYW1lLCBzb3VyY2VfdXJsLCBzb3VyY2VfbG9nbyxcbiAgICAgICAgICBjYXRlZ29yeSwgc3ViY2F0ZWdvcnksIGNvdW50cmllcywgcmVnaW9ucywgdGFncywgcHVibGlzaGVkX2F0LFxuICAgICAgICAgIGltYWdlX3VybCwgYXV0aG9yLCBsYW5ndWFnZSwgc2VudGltZW50LCBpbXBvcnRhbmNlLCByZWFkaW5nX3RpbWUsIG1kX2ZpbGVfcGF0aFxuICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcbiAgICAgIGApO1xuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2UgdG8gZGF0YWJhc2UgZm9yIHVzZSBpbiBjYWxsYmFja1xuICAgICAgY29uc3QgZGIgPSB0aGlzLmRiO1xuXG4gICAgICBzdG10LnJ1bihbXG4gICAgICAgIGFydGljbGVEYXRhLnRpdGxlLFxuICAgICAgICBhcnRpY2xlRGF0YS5jb250ZW50LFxuICAgICAgICBhcnRpY2xlRGF0YS5zdW1tYXJ5LFxuICAgICAgICBhcnRpY2xlRGF0YS51cmwsXG4gICAgICAgIGFydGljbGVEYXRhLnNvdXJjZS5uYW1lLFxuICAgICAgICBhcnRpY2xlRGF0YS5zb3VyY2UudXJsLFxuICAgICAgICBhcnRpY2xlRGF0YS5zb3VyY2UubG9nbyB8fCBudWxsLFxuICAgICAgICBhcnRpY2xlRGF0YS5jYXRlZ29yeSxcbiAgICAgICAgYXJ0aWNsZURhdGEuc3ViY2F0ZWdvcnkgfHwgbnVsbCxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZURhdGEuY291bnRyaWVzIHx8IFtdKSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZURhdGEucmVnaW9ucyB8fCBbXSksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGFydGljbGVEYXRhLnRhZ3MgfHwgW10pLFxuICAgICAgICBhcnRpY2xlRGF0YS5wdWJsaXNoZWRBdCxcbiAgICAgICAgYXJ0aWNsZURhdGEuaW1hZ2VVcmwgfHwgbnVsbCxcbiAgICAgICAgYXJ0aWNsZURhdGEuYXV0aG9yIHx8IG51bGwsXG4gICAgICAgIGFydGljbGVEYXRhLmxhbmd1YWdlIHx8ICdlbicsXG4gICAgICAgIGFydGljbGVEYXRhLnNlbnRpbWVudCB8fCAnbmV1dHJhbCcsXG4gICAgICAgIGFydGljbGVEYXRhLmltcG9ydGFuY2UgfHwgNSxcbiAgICAgICAgYXJ0aWNsZURhdGEucmVhZGluZ1RpbWUgfHwgMCxcbiAgICAgICAgYXJ0aWNsZURhdGEubWRGaWxlUGF0aCB8fCBudWxsXG4gICAgICBdLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFVwZGF0ZSBGVFMgaW5kZXggLSB1c2Ugc3RvcmVkIGRiIHJlZmVyZW5jZVxuICAgICAgICAgIGNvbnN0IGZ0c1N0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIGFydGljbGVzX2Z0cyhyb3dpZCwgdGl0bGUsIGNvbnRlbnQsIHN1bW1hcnksIHRhZ3MpXG4gICAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXG4gICAgICAgICAgYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZnRzU3RtdC5ydW4oW1xuICAgICAgICAgICAgdGhpcy5sYXN0SUQsXG4gICAgICAgICAgICBhcnRpY2xlRGF0YS50aXRsZSxcbiAgICAgICAgICAgIGFydGljbGVEYXRhLmNvbnRlbnQsXG4gICAgICAgICAgICBhcnRpY2xlRGF0YS5zdW1tYXJ5LFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZURhdGEudGFncyB8fCBbXSlcbiAgICAgICAgICBdLCAoZnRzRXJyKSA9PiB7XG4gICAgICAgICAgICAvLyBEb24ndCBmYWlsIGlmIEZUUyBpbnNlcnQgZmFpbHNcbiAgICAgICAgICAgIGlmIChmdHNFcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZUUyBpbnNlcnQgZmFpbGVkOicsIGZ0c0Vyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ0c1N0bXQuZmluYWxpemUoKTtcbiAgICAgICAgICAgIHJlc29sdmUoeyBpZDogdGhpcy5sYXN0SUQsIC4uLmFydGljbGVEYXRhIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgc3RtdC5maW5hbGl6ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0QXJ0aWNsZUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5kYi5nZXQoJ1NFTEVDVCAqIEZST00gYXJ0aWNsZXMgV0hFUkUgaWQgPSA/IEFORCBpc19hY3RpdmUgPSAxJywgW2lkXSwgKGVyciwgcm93KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIGlmIChyb3cpIHtcbiAgICAgICAgICByZXNvbHZlKHRoaXMucGFyc2VBcnRpY2xlKHJvdykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0QXJ0aWNsZUJ5VXJsKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmRiLmdldCgnU0VMRUNUICogRlJPTSBhcnRpY2xlcyBXSEVSRSB1cmwgPSA/JywgW3VybF0sIChlcnIsIHJvdykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSBpZiAocm93KSB7XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLnBhcnNlQXJ0aWNsZShyb3cpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEFydGljbGVzKGZpbHRlcnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcXVlcnkgPSAnU0VMRUNUICogRlJPTSBhcnRpY2xlcyBXSEVSRSBpc19hY3RpdmUgPSAxJztcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgICAvLyBBZGQgZmlsdGVyc1xuICAgICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkpIHtcbiAgICAgICAgcXVlcnkgKz0gJyBBTkQgY2F0ZWdvcnkgPSA/JztcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVycy5jYXRlZ29yeSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJzLmNvdW50cnkpIHtcbiAgICAgICAgcXVlcnkgKz0gJyBBTkQgY291bnRyaWVzIExJS0UgPyc7XG4gICAgICAgIHBhcmFtcy5wdXNoKGAlXCIke2ZpbHRlcnMuY291bnRyeX1cIiVgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbHRlcnMucmVnaW9uKSB7XG4gICAgICAgIHF1ZXJ5ICs9ICcgQU5EIHJlZ2lvbnMgTElLRSA/JztcbiAgICAgICAgcGFyYW1zLnB1c2goYCVcIiR7ZmlsdGVycy5yZWdpb259XCIlYCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJzLnNvdXJjZSkge1xuICAgICAgICBxdWVyeSArPSAnIEFORCBzb3VyY2VfbmFtZSA9ID8nO1xuICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJzLnNvdXJjZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJzLnNlbnRpbWVudCkge1xuICAgICAgICBxdWVyeSArPSAnIEFORCBzZW50aW1lbnQgPSA/JztcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVycy5zZW50aW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsdGVycy5pbXBvcnRhbmNlKSB7XG4gICAgICAgIHF1ZXJ5ICs9ICcgQU5EIGltcG9ydGFuY2UgPj0gPyc7XG4gICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlcnMuaW1wb3J0YW5jZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJzLnNlYXJjaCkge1xuICAgICAgICBxdWVyeSArPSAnIEFORCAodGl0bGUgTElLRSA/IE9SIGNvbnRlbnQgTElLRSA/IE9SIHN1bW1hcnkgTElLRSA/KSc7XG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBgJSR7ZmlsdGVycy5zZWFyY2h9JWA7XG4gICAgICAgIHBhcmFtcy5wdXNoKHNlYXJjaFRlcm0sIHNlYXJjaFRlcm0sIHNlYXJjaFRlcm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc29ydGluZ1xuICAgICAgY29uc3Qgc29ydEJ5ID0gZmlsdGVycy5zb3J0QnkgfHwgJ3B1Ymxpc2hlZF9hdCc7XG4gICAgICBjb25zdCBzb3J0T3JkZXIgPSBmaWx0ZXJzLnNvcnRPcmRlciB8fCAnZGVzYyc7XG4gICAgICBxdWVyeSArPSBgIE9SREVSIEJZICR7c29ydEJ5fSAke3NvcnRPcmRlci50b1VwcGVyQ2FzZSgpfWA7XG5cbiAgICAgIC8vIEFkZCBwYWdpbmF0aW9uXG4gICAgICBpZiAoZmlsdGVycy5saW1pdCkge1xuICAgICAgICBxdWVyeSArPSAnIExJTUlUID8nO1xuICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJzLmxpbWl0KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaWx0ZXJzLm9mZnNldCkge1xuICAgICAgICAgIHF1ZXJ5ICs9ICcgT0ZGU0VUID8nO1xuICAgICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlcnMub2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRiLmFsbChxdWVyeSwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJvd3MubWFwKHJvdyA9PiB0aGlzLnBhcnNlQXJ0aWNsZShyb3cpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY291bnRBcnRpY2xlcyhmaWx0ZXJzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IHF1ZXJ5ID0gJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGFydGljbGVzIFdIRVJFIGlzX2FjdGl2ZSA9IDEnO1xuICAgICAgY29uc3QgcGFyYW1zID0gW107XG5cbiAgICAgIC8vIEFkZCBzYW1lIGZpbHRlcnMgYXMgZ2V0QXJ0aWNsZXNcbiAgICAgIGlmIChmaWx0ZXJzLmNhdGVnb3J5KSB7XG4gICAgICAgIHF1ZXJ5ICs9ICcgQU5EIGNhdGVnb3J5ID0gPyc7XG4gICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlcnMuY2F0ZWdvcnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsdGVycy5jb3VudHJ5KSB7XG4gICAgICAgIHF1ZXJ5ICs9ICcgQU5EIGNvdW50cmllcyBMSUtFID8nO1xuICAgICAgICBwYXJhbXMucHVzaChgJVwiJHtmaWx0ZXJzLmNvdW50cnl9XCIlYCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJzLnJlZ2lvbikge1xuICAgICAgICBxdWVyeSArPSAnIEFORCByZWdpb25zIExJS0UgPyc7XG4gICAgICAgIHBhcmFtcy5wdXNoKGAlXCIke2ZpbHRlcnMucmVnaW9ufVwiJWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsdGVycy5zb3VyY2UpIHtcbiAgICAgICAgcXVlcnkgKz0gJyBBTkQgc291cmNlX25hbWUgPSA/JztcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVycy5zb3VyY2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgICAgcXVlcnkgKz0gJyBBTkQgKHRpdGxlIExJS0UgPyBPUiBjb250ZW50IExJS0UgPyBPUiBzdW1tYXJ5IExJS0UgPyknO1xuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gYCUke2ZpbHRlcnMuc2VhcmNofSVgO1xuICAgICAgICBwYXJhbXMucHVzaChzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kYi5nZXQocXVlcnksIHBhcmFtcywgKGVyciwgcm93KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJvdy5jb3VudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q2F0ZWdvcnlDb3VudHMoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZGIuYWxsKGBcbiAgICAgICAgU0VMRUNUIGNhdGVnb3J5LCBDT1VOVCgqKSBhcyBjb3VudCBcbiAgICAgICAgRlJPTSBhcnRpY2xlcyBcbiAgICAgICAgV0hFUkUgaXNfYWN0aXZlID0gMSBcbiAgICAgICAgR1JPVVAgQlkgY2F0ZWdvcnkgXG4gICAgICAgIE9SREVSIEJZIGNvdW50IERFU0NcbiAgICAgIGAsIFtdLCAoZXJyLCByb3dzKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJvd3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldENvdW50cnlDb3VudHMoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZGIuYWxsKGBcbiAgICAgICAgU0VMRUNUIGNvdW50cmllcyBcbiAgICAgICAgRlJPTSBhcnRpY2xlcyBcbiAgICAgICAgV0hFUkUgaXNfYWN0aXZlID0gMSBBTkQgY291bnRyaWVzIElTIE5PVCBOVUxMIEFORCBjb3VudHJpZXMgIT0gJ1tdJ1xuICAgICAgYCwgW10sIChlcnIsIHJvd3MpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGNvdW50cnlDb3VudHMgPSB7fTtcbiAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvdW50cmllcyA9IEpTT04ucGFyc2Uocm93LmNvdW50cmllcyk7XG4gICAgICAgICAgICAgIGNvdW50cmllcy5mb3JFYWNoKGNvdW50cnkgPT4ge1xuICAgICAgICAgICAgICAgIGNvdW50cnlDb3VudHNbY291bnRyeV0gPSAoY291bnRyeUNvdW50c1tjb3VudHJ5XSB8fCAwKSArIDE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8gU2tpcCBpbnZhbGlkIEpTT05cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IE9iamVjdC5lbnRyaWVzKGNvdW50cnlDb3VudHMpXG4gICAgICAgICAgICAubWFwKChbbmFtZSwgY291bnRdKSA9PiAoeyBuYW1lLCBjb3VudCB9KSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFJlbGF0ZWRBcnRpY2xlcyhhcnRpY2xlSWQsIGxpbWl0ID0gNSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBGaXJzdCBnZXQgdGhlIGFydGljbGUgdG8gZmluZCByZWxhdGVkIG9uZXNcbiAgICAgIHRoaXMuZ2V0QXJ0aWNsZUJ5SWQoYXJ0aWNsZUlkKS50aGVuKGFydGljbGUgPT4ge1xuICAgICAgICBpZiAoIWFydGljbGUpIHtcbiAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRiLmFsbChgXG4gICAgICAgICAgU0VMRUNUICogRlJPTSBhcnRpY2xlcyBcbiAgICAgICAgICBXSEVSRSBpZCAhPSA/IEFORCBpc19hY3RpdmUgPSAxIFxuICAgICAgICAgIEFORCAoXG4gICAgICAgICAgICBjYXRlZ29yeSA9ID8gT1IgXG4gICAgICAgICAgICBjb3VudHJpZXMgTElLRSA/IE9SIFxuICAgICAgICAgICAgcmVnaW9ucyBMSUtFID9cbiAgICAgICAgICApXG4gICAgICAgICAgT1JERVIgQlkgcHVibGlzaGVkX2F0IERFU0MgXG4gICAgICAgICAgTElNSVQgP1xuICAgICAgICBgLCBbXG4gICAgICAgICAgYXJ0aWNsZUlkLFxuICAgICAgICAgIGFydGljbGUuY2F0ZWdvcnksXG4gICAgICAgICAgYCUke2FydGljbGUuY291bnRyaWVzWzBdIHx8ICcnfSVgLFxuICAgICAgICAgIGAlJHthcnRpY2xlLnJlZ2lvbnNbMF0gfHwgJyd9JWAsXG4gICAgICAgICAgbGltaXRcbiAgICAgICAgXSwgKGVyciwgcm93cykgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHJvd3MubWFwKHJvdyA9PiB0aGlzLnBhcnNlQXJ0aWNsZShyb3cpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgfSk7XG4gIH1cblxuICBwYXJzZUFydGljbGUoYXJ0aWNsZSkge1xuICAgIHJldHVybiB7XG4gICAgICBfaWQ6IGFydGljbGUuaWQsXG4gICAgICBpZDogYXJ0aWNsZS5pZCxcbiAgICAgIHRpdGxlOiBhcnRpY2xlLnRpdGxlLFxuICAgICAgY29udGVudDogYXJ0aWNsZS5jb250ZW50LFxuICAgICAgc3VtbWFyeTogYXJ0aWNsZS5zdW1tYXJ5LFxuICAgICAgdXJsOiBhcnRpY2xlLnVybCxcbiAgICAgIHNvdXJjZToge1xuICAgICAgICBuYW1lOiBhcnRpY2xlLnNvdXJjZV9uYW1lLFxuICAgICAgICB1cmw6IGFydGljbGUuc291cmNlX3VybCxcbiAgICAgICAgbG9nbzogYXJ0aWNsZS5zb3VyY2VfbG9nb1xuICAgICAgfSxcbiAgICAgIGNhdGVnb3J5OiBhcnRpY2xlLmNhdGVnb3J5LFxuICAgICAgc3ViY2F0ZWdvcnk6IGFydGljbGUuc3ViY2F0ZWdvcnksXG4gICAgICBjb3VudHJpZXM6IGFydGljbGUuY291bnRyaWVzID8gSlNPTi5wYXJzZShhcnRpY2xlLmNvdW50cmllcykgOiBbXSxcbiAgICAgIHJlZ2lvbnM6IGFydGljbGUucmVnaW9ucyA/IEpTT04ucGFyc2UoYXJ0aWNsZS5yZWdpb25zKSA6IFtdLFxuICAgICAgdGFnczogYXJ0aWNsZS50YWdzID8gSlNPTi5wYXJzZShhcnRpY2xlLnRhZ3MpIDogW10sXG4gICAgICBwdWJsaXNoZWRBdDogYXJ0aWNsZS5wdWJsaXNoZWRfYXQsXG4gICAgICBzY3JhcGVkQXQ6IGFydGljbGUuc2NyYXBlZF9hdCxcbiAgICAgIGltYWdlVXJsOiBhcnRpY2xlLmltYWdlX3VybCxcbiAgICAgIGF1dGhvcjogYXJ0aWNsZS5hdXRob3IsXG4gICAgICBsYW5ndWFnZTogYXJ0aWNsZS5sYW5ndWFnZSxcbiAgICAgIHNlbnRpbWVudDogYXJ0aWNsZS5zZW50aW1lbnQsXG4gICAgICBpbXBvcnRhbmNlOiBhcnRpY2xlLmltcG9ydGFuY2UsXG4gICAgICByZWFkaW5nVGltZTogYXJ0aWNsZS5yZWFkaW5nX3RpbWUsXG4gICAgICBpc0FjdGl2ZTogYXJ0aWNsZS5pc19hY3RpdmUsXG4gICAgICBjcmVhdGVkQXQ6IGFydGljbGUuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRBdDogYXJ0aWNsZS51cGRhdGVkX2F0LFxuICAgICAgbWRGaWxlUGF0aDogYXJ0aWNsZS5tZF9maWxlX3BhdGhcbiAgICB9O1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAodGhpcy5kYikge1xuICAgICAgICB0aGlzLmRiLmNsb3NlKChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbG9zaW5nIGRhdGFiYXNlOicsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gU2luZ2xldG9uIGluc3RhbmNlXG5sZXQgZGJJbnN0YW5jZSA9IG51bGw7XG5cbmZ1bmN0aW9uIGdldERhdGFiYXNlKCkge1xuICBpZiAoIWRiSW5zdGFuY2UpIHtcbiAgICBkYkluc3RhbmNlID0gbmV3IERhdGFiYXNlU2VydmljZSgpO1xuICB9XG4gIHJldHVybiBkYkluc3RhbmNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgRGF0YWJhc2VTZXJ2aWNlLCBnZXREYXRhYmFzZSB9OyAiXSwibmFtZXMiOlsic3FsaXRlMyIsInJlcXVpcmUiLCJ2ZXJib3NlIiwicGF0aCIsImZzIiwiRGF0YWJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJkYiIsImluaXQiLCJkYlBhdGgiLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfUEFUSCIsImRiRGlyIiwiZGlybmFtZSIsImVuc3VyZURpclN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkRhdGFiYXNlIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImV4ZWMiLCJjcmVhdGVUYWJsZXMiLCJ0aGVuIiwiY2F0Y2giLCJjcmVhdGVBcnRpY2xlc1RhYmxlIiwiaW5kZXhlcyIsImluZGV4Q291bnQiLCJ0b3RhbEluZGV4ZXMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaW5kZXhTcWwiLCJlcnJvciIsImNyZWF0ZUFydGljbGUiLCJhcnRpY2xlRGF0YSIsInN0bXQiLCJwcmVwYXJlIiwicnVuIiwidGl0bGUiLCJjb250ZW50Iiwic3VtbWFyeSIsInVybCIsInNvdXJjZSIsIm5hbWUiLCJsb2dvIiwiY2F0ZWdvcnkiLCJzdWJjYXRlZ29yeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb3VudHJpZXMiLCJyZWdpb25zIiwidGFncyIsInB1Ymxpc2hlZEF0IiwiaW1hZ2VVcmwiLCJhdXRob3IiLCJsYW5ndWFnZSIsInNlbnRpbWVudCIsImltcG9ydGFuY2UiLCJyZWFkaW5nVGltZSIsIm1kRmlsZVBhdGgiLCJmdHNTdG10IiwibGFzdElEIiwiZnRzRXJyIiwibWVzc2FnZSIsImZpbmFsaXplIiwiaWQiLCJnZXRBcnRpY2xlQnlJZCIsImdldCIsInJvdyIsInBhcnNlQXJ0aWNsZSIsImdldEFydGljbGVCeVVybCIsImdldEFydGljbGVzIiwiZmlsdGVycyIsInF1ZXJ5IiwicGFyYW1zIiwicHVzaCIsImNvdW50cnkiLCJyZWdpb24iLCJzZWFyY2giLCJzZWFyY2hUZXJtIiwic29ydEJ5Iiwic29ydE9yZGVyIiwidG9VcHBlckNhc2UiLCJsaW1pdCIsIm9mZnNldCIsImFsbCIsInJvd3MiLCJtYXAiLCJjb3VudEFydGljbGVzIiwiY291bnQiLCJnZXRDYXRlZ29yeUNvdW50cyIsImdldENvdW50cnlDb3VudHMiLCJjb3VudHJ5Q291bnRzIiwicGFyc2UiLCJyZXN1bHQiLCJPYmplY3QiLCJlbnRyaWVzIiwic29ydCIsImEiLCJiIiwiZ2V0UmVsYXRlZEFydGljbGVzIiwiYXJ0aWNsZUlkIiwiYXJ0aWNsZSIsIl9pZCIsInNvdXJjZV9uYW1lIiwic291cmNlX3VybCIsInNvdXJjZV9sb2dvIiwicHVibGlzaGVkX2F0Iiwic2NyYXBlZEF0Iiwic2NyYXBlZF9hdCIsImltYWdlX3VybCIsInJlYWRpbmdfdGltZSIsImlzQWN0aXZlIiwiaXNfYWN0aXZlIiwiY3JlYXRlZEF0IiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRfYXQiLCJtZF9maWxlX3BhdGgiLCJjbG9zZSIsImRiSW5zdGFuY2UiLCJnZXREYXRhYmFzZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/services/database.js\n");

/***/ }),

/***/ "(api)/./lib/utils/contentFormatter.js":
/*!***************************************!*\
  !*** ./lib/utils/contentFormatter.js ***!
  \***************************************/
/***/ ((module) => {

eval("\nclass ContentFormatter {\n    constructor(){\n        this.paragraphMinLength = 80;\n        this.maxParagraphLength = 1200;\n        this.sentenceMinLength = 15;\n    }\n    /**\n   * Main function to clean and format article content\n   */ formatArticleContent(content, title = \"\") {\n        if (!content || typeof content !== \"string\") {\n            return null;\n        }\n        // Don't process extremely short content\n        if (content.trim().length < 50) {\n            return null;\n        }\n        let formatted = content;\n        try {\n            // Step 1: Clean URL encoding and artifacts\n            formatted = this.cleanUrlEncoding(formatted);\n            // Step 2: Remove unwanted elements\n            formatted = this.removeUnwantedElements(formatted);\n            // Step 3: Fix spacing and formatting\n            formatted = this.normalizeSpacing(formatted);\n            // Step 4: Format paragraphs properly\n            formatted = this.formatParagraphs(formatted);\n            // Step 5: Add proper sentence structure\n            formatted = this.improveSentenceFlow(formatted);\n            // Step 6: Add paragraph breaks for readability\n            formatted = this.addParagraphBreaks(formatted);\n            // Step 7: Final cleanup and polishing\n            formatted = this.finalCleanup(formatted);\n            // Step 8: Validate and ensure minimum quality\n            formatted = this.validateContent(formatted, title);\n            return formatted;\n        } catch (error) {\n            console.error(\"Error formatting content:\", error);\n            // Return null instead of throwing to prevent crashes\n            return null;\n        }\n    }\n    /**\n   * Clean URL encoding and decode special characters\n   */ cleanUrlEncoding(text) {\n        // Remove URLs with heavy encoding that are unreadable\n        text = text.replace(/https?:\\/\\/[^\\s]*%[0-9A-F]{2}[^\\s]*/gi, \"\");\n        // Remove excessive URL encoding patterns\n        text = text.replace(/%[0-9A-F]{2}/g, \"\");\n        // Decode common HTML entities\n        const entities = {\n            \"&amp;\": \"&\",\n            \"&lt;\": \"<\",\n            \"&gt;\": \">\",\n            \"&quot;\": '\"',\n            \"&#39;\": \"'\",\n            \"&#x27;\": \"'\",\n            \"&nbsp;\": \" \",\n            \"&mdash;\": \"\",\n            \"&ndash;\": \"\",\n            \"&hellip;\": \"\",\n            \"&laquo;\": \"\\xab\",\n            \"&raquo;\": \"\\xbb\",\n            \"&rsquo;\": \"'\",\n            \"&lsquo;\": \"'\",\n            \"&rdquo;\": '\"',\n            \"&ldquo;\": '\"'\n        };\n        Object.keys(entities).forEach((entity)=>{\n            text = text.replace(new RegExp(entity, \"g\"), entities[entity]);\n        });\n        return text;\n    }\n    /**\n   * Remove unwanted HTML tags and elements\n   */ removeUnwantedElements(text) {\n        // Remove script and style tags and their content\n        text = text.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\");\n        text = text.replace(/<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi, \"\");\n        // Remove all HTML tags but keep their content\n        text = text.replace(/<[^>]*>/g, \"\");\n        // Remove comments\n        text = text.replace(/<!--[\\s\\S]*?-->/g, \"\");\n        // Remove specific navigation and website elements we've seen\n        const unwantedPatterns = [\n            /Back to Home/gi,\n            /Share this article/gi,\n            /Print this page/gi,\n            /Translate.*?\\)/gi,\n            /Copyright.*?All rights reserved.*?\\./gi,\n            /The content.*?shall not be republished.*?\\./gi,\n            /Site Search.*?Most Popular/gi,\n            /Topics Menu.*?one click away/gi,\n            /Login.*?Status/gi,\n            /Main Hubs.*?Home Pages/gi,\n            /Welcome to.*?IslamiCity/gi,\n            /Please wait.*?prepared this.*?\\.\\.\\./gi,\n            /Follow us on.*?/gi,\n            /Subscribe.*?newsletter/gi,\n            /Get AI Insights/gi,\n            /Read Original Article/gi,\n            /Visit the source.*?additional context/gi,\n            /Visit Source/gi,\n            /Related Articles?.*$/gi,\n            /Sign up.*?newsletter/gi,\n            /Click here to.*?/gi,\n            /Read more.*?/gi,\n            /_.*?_/g,\n            /MOST RECENT.*?##/gi,\n            /Most Contributing Authors.*?##/gi,\n            /Inspiring Themes.*?tour/gi\n        ];\n        unwantedPatterns.forEach((pattern)=>{\n            text = text.replace(pattern, \"\");\n        });\n        // Remove excessive exclamation marks and repeated characters\n        text = text.replace(/!{3,}/g, \".\");\n        text = text.replace(/\\.{4,}/g, \"...\");\n        text = text.replace(/\\?{2,}/g, \"?\");\n        // Remove excessive markdown symbols that might be artifacts\n        text = text.replace(/#{4,}/g, \"\");\n        text = text.replace(/\\*{3,}/g, \"\");\n        text = text.replace(/-{4,}/g, \"\");\n        // Remove URLs that are clearly navigation or ads\n        const unwantedUrls = [\n            /https?:\\/\\/[^\\s]*facebook\\.com[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*twitter\\.com[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*instagram\\.com[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*youtube\\.com[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*wp-content[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*\\.jpg[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*\\.png[^\\s]*/gi,\n            /https?:\\/\\/[^\\s]*\\.gif[^\\s]*/gi\n        ];\n        unwantedUrls.forEach((pattern)=>{\n            text = text.replace(pattern, \"\");\n        });\n        return text;\n    }\n    /**\n   * Normalize spacing and fix common formatting issues\n   */ normalizeSpacing(text) {\n        // Fix multiple spaces\n        text = text.replace(/[ \\t]+/g, \" \");\n        // Fix multiple line breaks (keep maximum of 2)\n        text = text.replace(/\\n{3,}/g, \"\\n\\n\");\n        // Fix spacing around punctuation\n        text = text.replace(/\\s+([.!?,:;])/g, \"$1\");\n        text = text.replace(/([.!?])\\s*([A-Z])/g, \"$1 $2\");\n        // Fix quotes and parentheses spacing\n        text = text.replace(/\\s+([)}\\]])/g, \"$1\");\n        text = text.replace(/([({[])\\s+/g, \"$1\");\n        // Remove extra spaces at line beginnings and ends\n        text = text.replace(/^\\s+/gm, \"\");\n        text = text.replace(/\\s+$/gm, \"\");\n        return text.trim();\n    }\n    /**\n   * Format content into proper paragraphs\n   */ formatParagraphs(text) {\n        // Split into potential paragraphs\n        let paragraphs = text.split(/\\n\\s*\\n/);\n        // Filter and clean paragraphs\n        paragraphs = paragraphs.map((p)=>p.trim()).filter((p)=>p.length > 30) // Remove very short paragraphs\n        .map((p)=>this.formatSingleParagraph(p)).filter((p)=>p && p.length > 20); // Remove empty or very short paragraphs\n        // Merge very short paragraphs with the next one\n        const mergedParagraphs = [];\n        for(let i = 0; i < paragraphs.length; i++){\n            const current = paragraphs[i];\n            const next = paragraphs[i + 1];\n            if (current.length < this.paragraphMinLength && next && current.length + next.length < this.maxParagraphLength) {\n                paragraphs[i + 1] = current + \" \" + next;\n            } else {\n                mergedParagraphs.push(current);\n            }\n        }\n        return mergedParagraphs.join(\"\\n\\n\");\n    }\n    /**\n   * Format a single paragraph\n   */ formatSingleParagraph(paragraph) {\n        // Remove any remaining HTML artifacts\n        paragraph = paragraph.replace(/&[a-zA-Z0-9#]{2,8};/g, \" \");\n        // Fix sentence spacing and capitalization\n        paragraph = paragraph.replace(/\\.\\s*([a-z])/g, (match, letter)=>\". \" + letter.toUpperCase());\n        paragraph = paragraph.replace(/\\?\\s*([a-z])/g, (match, letter)=>\"? \" + letter.toUpperCase());\n        paragraph = paragraph.replace(/!\\s*([a-z])/g, (match, letter)=>\"! \" + letter.toUpperCase());\n        // Ensure paragraph starts with capital letter\n        if (paragraph.length > 0) {\n            paragraph = paragraph.charAt(0).toUpperCase() + paragraph.slice(1);\n        }\n        // Ensure paragraph ends with proper punctuation\n        if (paragraph.length > 50 && !/[.!?]$/.test(paragraph.trim())) {\n            paragraph = paragraph.trim() + \".\";\n        }\n        return paragraph.trim();\n    }\n    /**\n   * Improve sentence flow and readability\n   */ improveSentenceFlow(text) {\n        // Split into sentences\n        let sentences = text.split(/(?<=[.!?])\\s+/).filter((s)=>s.trim().length > this.sentenceMinLength);\n        // Remove duplicate sentences\n        const uniqueSentences = [];\n        const seenSentences = new Set();\n        for (const sentence of sentences){\n            const normalized = sentence.toLowerCase().replace(/\\s+/g, \" \").trim();\n            if (!seenSentences.has(normalized) && sentence.trim().length > this.sentenceMinLength) {\n                seenSentences.add(normalized);\n                uniqueSentences.push(sentence.trim());\n            }\n        }\n        return uniqueSentences.join(\" \");\n    }\n    /**\n   * Add proper paragraph breaks for better readability\n   */ addParagraphBreaks(text) {\n        // Split long blocks of text into readable paragraphs\n        const sentences = text.split(/(?<=[.!?])\\s+/);\n        const paragraphs = [];\n        let currentParagraph = [];\n        let currentLength = 0;\n        for (const sentence of sentences){\n            if (currentLength + sentence.length > this.maxParagraphLength && currentParagraph.length > 0) {\n                paragraphs.push(currentParagraph.join(\" \"));\n                currentParagraph = [\n                    sentence\n                ];\n                currentLength = sentence.length;\n            } else {\n                currentParagraph.push(sentence);\n                currentLength += sentence.length;\n            }\n        }\n        if (currentParagraph.length > 0) {\n            paragraphs.push(currentParagraph.join(\" \"));\n        }\n        return paragraphs.filter((p)=>p.trim().length > 50).join(\"\\n\\n\");\n    }\n    /**\n   * Final cleanup and formatting\n   */ finalCleanup(text) {\n        // Remove any remaining markdown artifacts\n        text = text.replace(/\\[.*?\\]\\(.*?\\)/g, \"\"); // Remove markdown links\n        text = text.replace(/\\*\\*(.*?)\\*\\*/g, \"$1\"); // Remove bold markdown\n        text = text.replace(/\\*(.*?)\\*/g, \"$1\"); // Remove italic markdown\n        text = text.replace(/`(.*?)`/g, \"$1\"); // Remove code markdown\n        // Fix common formatting issues\n        text = text.replace(/\\s+/g, \" \"); // Normalize all whitespace\n        text = text.replace(/\\n{3,}/g, \"\\n\\n\"); // Max 2 line breaks\n        // Remove common website footer text\n        text = text.replace(/All rights reserved.*$/gi, \"\");\n        text = text.replace(/Copyright.*$/gi, \"\");\n        // Ensure proper paragraph spacing\n        text = text.replace(/\\n\\n+/g, \"\\n\\n\");\n        return text.trim();\n    }\n    /**\n   * Validate and ensure minimum content quality\n   */ validateContent(text, title = \"\") {\n        // Ensure minimum length\n        if (text.length < 200) {\n            return null; // Content too short\n        }\n        // Check for meaningful content (not just navigation or ads)\n        const meaningfulWords = [\n            \"said\",\n            \"according\",\n            \"reported\",\n            \"announced\",\n            \"stated\",\n            \"explained\",\n            \"revealed\",\n            \"confirmed\",\n            \"shows\",\n            \"indicates\"\n        ];\n        const hasMeaningfulContent = meaningfulWords.some((word)=>text.toLowerCase().includes(word));\n        if (!hasMeaningfulContent && text.length < 500) {\n            return null; // Likely not a real article\n        }\n        // Remove title repetition at the beginning\n        if (title && text.toLowerCase().startsWith(title.toLowerCase())) {\n            text = text.substring(title.length).trim();\n        }\n        // Ensure content starts properly\n        if (text.length > 0) {\n            text = text.charAt(0).toUpperCase() + text.slice(1);\n        }\n        return text;\n    }\n    /**\n   * Format title for better display\n   */ formatTitle(title) {\n        if (!title) return \"\";\n        let formatted = this.cleanUrlEncoding(title);\n        formatted = this.removeUnwantedElements(formatted);\n        formatted = formatted.replace(/\\s+/g, \" \").trim();\n        // Remove common prefixes/suffixes that might be artifacts\n        formatted = formatted.replace(/^(.*?)\\s*[-|]\\s*(.*)$/, \"$1\");\n        formatted = formatted.replace(/\\.\\.\\.$/, \"\");\n        return formatted;\n    }\n    /**\n   * Format summary for better display\n   */ formatSummary(summary, maxLength = 300) {\n        if (!summary || typeof summary !== \"string\") return \"\";\n        let formatted = this.cleanUrlEncoding(summary);\n        formatted = this.removeUnwantedElements(formatted);\n        formatted = this.normalizeSpacing(formatted);\n        // Ensure we have content after cleaning\n        if (!formatted || formatted.trim().length === 0) {\n            return \"\";\n        }\n        // Truncate if too long\n        if (formatted.length > maxLength) {\n            const truncated = formatted.substring(0, maxLength);\n            const lastSentence = truncated.lastIndexOf(\".\");\n            if (lastSentence > maxLength * 0.7) {\n                formatted = truncated.substring(0, lastSentence + 1);\n            } else {\n                formatted = truncated.trim() + \"...\";\n            }\n        }\n        return formatted;\n    }\n    /**\n   * Check if text is primarily Arabic\n   */ isArabicText(text) {\n        if (!text || typeof text !== \"string\") return false;\n        const arabicRegex = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/;\n        const arabicChars = text.match(arabicRegex);\n        return arabicChars && arabicChars.length > text.length * 0.3;\n    }\n    /**\n   * Format content specifically for Arabic text\n   */ formatArabicContent(content) {\n        let formatted = this.formatArticleContent(content);\n        // Add RTL direction hint for Arabic content\n        if (this.isArabicText(formatted)) {\n            // Ensure proper Arabic spacing\n            formatted = formatted.replace(/\\u200C/g, \"\"); // Remove zero-width non-joiners\n            formatted = formatted.replace(/\\u200D/g, \"\"); // Remove zero-width joiners\n            formatted = formatted.replace(/[\\u0600-\\u06FF]\\s+(?=[\\u0600-\\u06FF])/g, (match)=>{\n                return match.replace(/\\s+/g, \" \");\n            });\n        }\n        return formatted;\n    }\n    /**\n   * Generate reading time estimate\n   */ calculateReadingTime(content, wordsPerMinute = 200) {\n        if (!content) return 1;\n        const cleanContent = this.formatArticleContent(content);\n        // Handle case where formatArticleContent returns null\n        if (!cleanContent) {\n            // Fallback to using original content for word count\n            const wordCount = content.split(/\\s+/).filter((word)=>word.length > 0).length;\n            return Math.max(1, Math.ceil(wordCount / wordsPerMinute));\n        }\n        const wordCount = cleanContent.split(/\\s+/).filter((word)=>word.length > 0).length;\n        return Math.max(1, Math.ceil(wordCount / wordsPerMinute));\n    }\n    /**\n   * Extract the first meaningful paragraph as a preview\n   */ extractPreview(content, maxLength = 200) {\n        if (!content) return \"\";\n        const formatted = this.formatArticleContent(content);\n        // Handle case where formatArticleContent returns null\n        if (!formatted) {\n            // Fallback to using original content\n            return this.formatSummary(content.substring(0, maxLength * 2), maxLength);\n        }\n        const paragraphs = formatted.split(\"\\n\\n\");\n        for (const paragraph of paragraphs){\n            if (paragraph.trim().length > 50) {\n                return this.formatSummary(paragraph, maxLength);\n            }\n        }\n        return this.formatSummary(formatted, maxLength);\n    }\n}\n// Export singleton instance\nconst contentFormatter = new ContentFormatter();\nmodule.exports = {\n    ContentFormatter,\n    contentFormatter,\n    // Utility functions for easy import\n    formatContent: (content)=>contentFormatter.formatArticleContent(content),\n    formatTitle: (title)=>contentFormatter.formatTitle(title),\n    formatSummary: (summary, maxLength)=>contentFormatter.formatSummary(summary, maxLength),\n    isArabicText: (text)=>contentFormatter.isArabicText(text),\n    calculateReadingTime: (content)=>contentFormatter.calculateReadingTime(content),\n    extractPreview: (content, maxLength)=>contentFormatter.extractPreview(content, maxLength)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2NvbnRlbnRGb3JtYXR0ZXIuanM/NjJjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb250ZW50Rm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJhZ3JhcGhNaW5MZW5ndGggPSA4MDtcbiAgICB0aGlzLm1heFBhcmFncmFwaExlbmd0aCA9IDEyMDA7XG4gICAgdGhpcy5zZW50ZW5jZU1pbkxlbmd0aCA9IDE1O1xuICB9XG5cbiAgLyoqXG4gICAqIE1haW4gZnVuY3Rpb24gdG8gY2xlYW4gYW5kIGZvcm1hdCBhcnRpY2xlIGNvbnRlbnRcbiAgICovXG4gIGZvcm1hdEFydGljbGVDb250ZW50KGNvbnRlbnQsIHRpdGxlID0gJycpIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgdHlwZW9mIGNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBwcm9jZXNzIGV4dHJlbWVseSBzaG9ydCBjb250ZW50XG4gICAgaWYgKGNvbnRlbnQudHJpbSgpLmxlbmd0aCA8IDUwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgZm9ybWF0dGVkID0gY29udGVudDtcblxuICAgIHRyeSB7XG4gICAgICAvLyBTdGVwIDE6IENsZWFuIFVSTCBlbmNvZGluZyBhbmQgYXJ0aWZhY3RzXG4gICAgICBmb3JtYXR0ZWQgPSB0aGlzLmNsZWFuVXJsRW5jb2RpbmcoZm9ybWF0dGVkKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCAyOiBSZW1vdmUgdW53YW50ZWQgZWxlbWVudHNcbiAgICAgIGZvcm1hdHRlZCA9IHRoaXMucmVtb3ZlVW53YW50ZWRFbGVtZW50cyhmb3JtYXR0ZWQpO1xuICAgICAgXG4gICAgICAvLyBTdGVwIDM6IEZpeCBzcGFjaW5nIGFuZCBmb3JtYXR0aW5nXG4gICAgICBmb3JtYXR0ZWQgPSB0aGlzLm5vcm1hbGl6ZVNwYWNpbmcoZm9ybWF0dGVkKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA0OiBGb3JtYXQgcGFyYWdyYXBocyBwcm9wZXJseVxuICAgICAgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRQYXJhZ3JhcGhzKGZvcm1hdHRlZCk7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgNTogQWRkIHByb3BlciBzZW50ZW5jZSBzdHJ1Y3R1cmVcbiAgICAgIGZvcm1hdHRlZCA9IHRoaXMuaW1wcm92ZVNlbnRlbmNlRmxvdyhmb3JtYXR0ZWQpO1xuICAgICAgXG4gICAgICAvLyBTdGVwIDY6IEFkZCBwYXJhZ3JhcGggYnJlYWtzIGZvciByZWFkYWJpbGl0eVxuICAgICAgZm9ybWF0dGVkID0gdGhpcy5hZGRQYXJhZ3JhcGhCcmVha3MoZm9ybWF0dGVkKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA3OiBGaW5hbCBjbGVhbnVwIGFuZCBwb2xpc2hpbmdcbiAgICAgIGZvcm1hdHRlZCA9IHRoaXMuZmluYWxDbGVhbnVwKGZvcm1hdHRlZCk7XG5cbiAgICAgIC8vIFN0ZXAgODogVmFsaWRhdGUgYW5kIGVuc3VyZSBtaW5pbXVtIHF1YWxpdHlcbiAgICAgIGZvcm1hdHRlZCA9IHRoaXMudmFsaWRhdGVDb250ZW50KGZvcm1hdHRlZCwgdGl0bGUpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0dGVkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmb3JtYXR0aW5nIGNvbnRlbnQ6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIG51bGwgaW5zdGVhZCBvZiB0aHJvd2luZyB0byBwcmV2ZW50IGNyYXNoZXNcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiBVUkwgZW5jb2RpbmcgYW5kIGRlY29kZSBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICovXG4gIGNsZWFuVXJsRW5jb2RpbmcodGV4dCkge1xuICAgIC8vIFJlbW92ZSBVUkxzIHdpdGggaGVhdnkgZW5jb2RpbmcgdGhhdCBhcmUgdW5yZWFkYWJsZVxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL2h0dHBzPzpcXC9cXC9bXlxcc10qJVswLTlBLUZdezJ9W15cXHNdKi9naSwgJycpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBleGNlc3NpdmUgVVJMIGVuY29kaW5nIHBhdHRlcm5zXG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvJVswLTlBLUZdezJ9L2csICcnKTtcbiAgICBcbiAgICAvLyBEZWNvZGUgY29tbW9uIEhUTUwgZW50aXRpZXNcbiAgICBjb25zdCBlbnRpdGllcyA9IHtcbiAgICAgICcmYW1wOyc6ICcmJyxcbiAgICAgICcmbHQ7JzogJzwnLFxuICAgICAgJyZndDsnOiAnPicsXG4gICAgICAnJnF1b3Q7JzogJ1wiJyxcbiAgICAgICcmIzM5Oyc6IFwiJ1wiLFxuICAgICAgJyYjeDI3Oyc6IFwiJ1wiLFxuICAgICAgJyZuYnNwOyc6ICcgJyxcbiAgICAgICcmbWRhc2g7JzogJ+KAlCcsXG4gICAgICAnJm5kYXNoOyc6ICfigJMnLFxuICAgICAgJyZoZWxsaXA7JzogJ+KApicsXG4gICAgICAnJmxhcXVvOyc6ICfCqycsXG4gICAgICAnJnJhcXVvOyc6ICfCuycsXG4gICAgICAnJnJzcXVvOyc6ICdcXCcnLFxuICAgICAgJyZsc3F1bzsnOiAnXFwnJyxcbiAgICAgICcmcmRxdW87JzogJ1wiJyxcbiAgICAgICcmbGRxdW87JzogJ1wiJ1xuICAgIH07XG5cbiAgICBPYmplY3Qua2V5cyhlbnRpdGllcykuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXcgUmVnRXhwKGVudGl0eSwgJ2cnKSwgZW50aXRpZXNbZW50aXR5XSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdW53YW50ZWQgSFRNTCB0YWdzIGFuZCBlbGVtZW50c1xuICAgKi9cbiAgcmVtb3ZlVW53YW50ZWRFbGVtZW50cyh0ZXh0KSB7XG4gICAgLy8gUmVtb3ZlIHNjcmlwdCBhbmQgc3R5bGUgdGFncyBhbmQgdGhlaXIgY29udGVudFxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxzY3JpcHRcXGJbXjxdKig/Oig/ITxcXC9zY3JpcHQ+KTxbXjxdKikqPFxcL3NjcmlwdD4vZ2ksICcnKTtcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88c3R5bGVcXGJbXjxdKig/Oig/ITxcXC9zdHlsZT4pPFtePF0qKSo8XFwvc3R5bGU+L2dpLCAnJyk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGFsbCBIVE1MIHRhZ3MgYnV0IGtlZXAgdGhlaXIgY29udGVudFxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxbXj5dKj4vZywgJycpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBjb21tZW50c1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzwhLS1bXFxzXFxTXSo/LS0+L2csICcnKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgc3BlY2lmaWMgbmF2aWdhdGlvbiBhbmQgd2Vic2l0ZSBlbGVtZW50cyB3ZSd2ZSBzZWVuXG4gICAgY29uc3QgdW53YW50ZWRQYXR0ZXJucyA9IFtcbiAgICAgIC9CYWNrIHRvIEhvbWUvZ2ksXG4gICAgICAvU2hhcmUgdGhpcyBhcnRpY2xlL2dpLFxuICAgICAgL1ByaW50IHRoaXMgcGFnZS9naSxcbiAgICAgIC9UcmFuc2xhdGUuKj9cXCkvZ2ksXG4gICAgICAvQ29weXJpZ2h0Lio/QWxsIHJpZ2h0cyByZXNlcnZlZC4qP1xcLi9naSxcbiAgICAgIC9UaGUgY29udGVudC4qP3NoYWxsIG5vdCBiZSByZXB1Ymxpc2hlZC4qP1xcLi9naSxcbiAgICAgIC9TaXRlIFNlYXJjaC4qP01vc3QgUG9wdWxhci9naSxcbiAgICAgIC9Ub3BpY3MgTWVudS4qP29uZSBjbGljayBhd2F5L2dpLFxuICAgICAgL0xvZ2luLio/U3RhdHVzL2dpLFxuICAgICAgL01haW4gSHVicy4qP0hvbWUgUGFnZXMvZ2ksXG4gICAgICAvV2VsY29tZSB0by4qP0lzbGFtaUNpdHkvZ2ksXG4gICAgICAvUGxlYXNlIHdhaXQuKj9wcmVwYXJlZCB0aGlzLio/XFwuXFwuXFwuL2dpLFxuICAgICAgL0ZvbGxvdyB1cyBvbi4qPy9naSxcbiAgICAgIC9TdWJzY3JpYmUuKj9uZXdzbGV0dGVyL2dpLFxuICAgICAgL0dldCBBSSBJbnNpZ2h0cy9naSxcbiAgICAgIC9SZWFkIE9yaWdpbmFsIEFydGljbGUvZ2ksXG4gICAgICAvVmlzaXQgdGhlIHNvdXJjZS4qP2FkZGl0aW9uYWwgY29udGV4dC9naSxcbiAgICAgIC9WaXNpdCBTb3VyY2UvZ2ksXG4gICAgICAvUmVsYXRlZCBBcnRpY2xlcz8uKiQvZ2ksXG4gICAgICAvU2lnbiB1cC4qP25ld3NsZXR0ZXIvZ2ksXG4gICAgICAvQ2xpY2sgaGVyZSB0by4qPy9naSxcbiAgICAgIC9SZWFkIG1vcmUuKj8vZ2ksXG4gICAgICAvXy4qP18vZywgLy8gUmVtb3ZlIHVuZGVyc2NvcmVzIHVzZWQgaW4gbmF2aWdhdGlvblxuICAgICAgL01PU1QgUkVDRU5ULio/IyMvZ2ksXG4gICAgICAvTW9zdCBDb250cmlidXRpbmcgQXV0aG9ycy4qPyMjL2dpLFxuICAgICAgL0luc3BpcmluZyBUaGVtZXMuKj90b3VyL2dpXG4gICAgXTtcblxuICAgIHVud2FudGVkUGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocGF0dGVybiwgJycpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlbW92ZSBleGNlc3NpdmUgZXhjbGFtYXRpb24gbWFya3MgYW5kIHJlcGVhdGVkIGNoYXJhY3RlcnNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8hezMsfS9nLCAnLicpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcLns0LH0vZywgJy4uLicpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcP3syLH0vZywgJz8nKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgZXhjZXNzaXZlIG1hcmtkb3duIHN5bWJvbHMgdGhhdCBtaWdodCBiZSBhcnRpZmFjdHNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8jezQsfS9nLCAnJyk7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFwqezMsfS9nLCAnJyk7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvLXs0LH0vZywgJycpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBVUkxzIHRoYXQgYXJlIGNsZWFybHkgbmF2aWdhdGlvbiBvciBhZHNcbiAgICBjb25zdCB1bndhbnRlZFVybHMgPSBbXG4gICAgICAvaHR0cHM/OlxcL1xcL1teXFxzXSpmYWNlYm9va1xcLmNvbVteXFxzXSovZ2ksXG4gICAgICAvaHR0cHM/OlxcL1xcL1teXFxzXSp0d2l0dGVyXFwuY29tW15cXHNdKi9naSxcbiAgICAgIC9odHRwcz86XFwvXFwvW15cXHNdKmluc3RhZ3JhbVxcLmNvbVteXFxzXSovZ2ksXG4gICAgICAvaHR0cHM/OlxcL1xcL1teXFxzXSp5b3V0dWJlXFwuY29tW15cXHNdKi9naSxcbiAgICAgIC9odHRwcz86XFwvXFwvW15cXHNdKndwLWNvbnRlbnRbXlxcc10qL2dpLFxuICAgICAgL2h0dHBzPzpcXC9cXC9bXlxcc10qXFwuanBnW15cXHNdKi9naSxcbiAgICAgIC9odHRwcz86XFwvXFwvW15cXHNdKlxcLnBuZ1teXFxzXSovZ2ksXG4gICAgICAvaHR0cHM/OlxcL1xcL1teXFxzXSpcXC5naWZbXlxcc10qL2dpXG4gICAgXTtcblxuICAgIHVud2FudGVkVXJscy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShwYXR0ZXJuLCAnJyk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplIHNwYWNpbmcgYW5kIGZpeCBjb21tb24gZm9ybWF0dGluZyBpc3N1ZXNcbiAgICovXG4gIG5vcm1hbGl6ZVNwYWNpbmcodGV4dCkge1xuICAgIC8vIEZpeCBtdWx0aXBsZSBzcGFjZXNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9bIFxcdF0rL2csICcgJyk7XG4gICAgXG4gICAgLy8gRml4IG11bHRpcGxlIGxpbmUgYnJlYWtzIChrZWVwIG1heGltdW0gb2YgMilcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKTtcbiAgICBcbiAgICAvLyBGaXggc3BhY2luZyBhcm91bmQgcHVuY3R1YXRpb25cbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrKFsuIT8sOjtdKS9nLCAnJDEnKTtcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oWy4hP10pXFxzKihbQS1aXSkvZywgJyQxICQyJyk7XG4gICAgXG4gICAgLy8gRml4IHF1b3RlcyBhbmQgcGFyZW50aGVzZXMgc3BhY2luZ1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysoWyl9XFxdXSkvZywgJyQxJyk7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvKFsoe1tdKVxccysvZywgJyQxJyk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGV4dHJhIHNwYWNlcyBhdCBsaW5lIGJlZ2lubmluZ3MgYW5kIGVuZHNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eXFxzKy9nbSwgJycpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccyskL2dtLCAnJyk7XG4gICAgXG4gICAgcmV0dXJuIHRleHQudHJpbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBjb250ZW50IGludG8gcHJvcGVyIHBhcmFncmFwaHNcbiAgICovXG4gIGZvcm1hdFBhcmFncmFwaHModGV4dCkge1xuICAgIC8vIFNwbGl0IGludG8gcG90ZW50aWFsIHBhcmFncmFwaHNcbiAgICBsZXQgcGFyYWdyYXBocyA9IHRleHQuc3BsaXQoL1xcblxccypcXG4vKTtcbiAgICBcbiAgICAvLyBGaWx0ZXIgYW5kIGNsZWFuIHBhcmFncmFwaHNcbiAgICBwYXJhZ3JhcGhzID0gcGFyYWdyYXBoc1xuICAgICAgLm1hcChwID0+IHAudHJpbSgpKVxuICAgICAgLmZpbHRlcihwID0+IHAubGVuZ3RoID4gMzApIC8vIFJlbW92ZSB2ZXJ5IHNob3J0IHBhcmFncmFwaHNcbiAgICAgIC5tYXAocCA9PiB0aGlzLmZvcm1hdFNpbmdsZVBhcmFncmFwaChwKSlcbiAgICAgIC5maWx0ZXIocCA9PiBwICYmIHAubGVuZ3RoID4gMjApOyAvLyBSZW1vdmUgZW1wdHkgb3IgdmVyeSBzaG9ydCBwYXJhZ3JhcGhzXG4gICAgXG4gICAgLy8gTWVyZ2UgdmVyeSBzaG9ydCBwYXJhZ3JhcGhzIHdpdGggdGhlIG5leHQgb25lXG4gICAgY29uc3QgbWVyZ2VkUGFyYWdyYXBocyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY3VycmVudCA9IHBhcmFncmFwaHNbaV07XG4gICAgICBjb25zdCBuZXh0ID0gcGFyYWdyYXBoc1tpICsgMV07XG4gICAgICBcbiAgICAgIGlmIChjdXJyZW50Lmxlbmd0aCA8IHRoaXMucGFyYWdyYXBoTWluTGVuZ3RoICYmIG5leHQgJiYgY3VycmVudC5sZW5ndGggKyBuZXh0Lmxlbmd0aCA8IHRoaXMubWF4UGFyYWdyYXBoTGVuZ3RoKSB7XG4gICAgICAgIHBhcmFncmFwaHNbaSArIDFdID0gY3VycmVudCArICcgJyArIG5leHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZXJnZWRQYXJhZ3JhcGhzLnB1c2goY3VycmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBtZXJnZWRQYXJhZ3JhcGhzLmpvaW4oJ1xcblxcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHNpbmdsZSBwYXJhZ3JhcGhcbiAgICovXG4gIGZvcm1hdFNpbmdsZVBhcmFncmFwaChwYXJhZ3JhcGgpIHtcbiAgICAvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBIVE1MIGFydGlmYWN0c1xuICAgIHBhcmFncmFwaCA9IHBhcmFncmFwaC5yZXBsYWNlKC8mW2EtekEtWjAtOSNdezIsOH07L2csICcgJyk7XG4gICAgXG4gICAgLy8gRml4IHNlbnRlbmNlIHNwYWNpbmcgYW5kIGNhcGl0YWxpemF0aW9uXG4gICAgcGFyYWdyYXBoID0gcGFyYWdyYXBoLnJlcGxhY2UoL1xcLlxccyooW2Etel0pL2csIChtYXRjaCwgbGV0dGVyKSA9PiAnLiAnICsgbGV0dGVyLnRvVXBwZXJDYXNlKCkpO1xuICAgIHBhcmFncmFwaCA9IHBhcmFncmFwaC5yZXBsYWNlKC9cXD9cXHMqKFthLXpdKS9nLCAobWF0Y2gsIGxldHRlcikgPT4gJz8gJyArIGxldHRlci50b1VwcGVyQ2FzZSgpKTtcbiAgICBwYXJhZ3JhcGggPSBwYXJhZ3JhcGgucmVwbGFjZSgvIVxccyooW2Etel0pL2csIChtYXRjaCwgbGV0dGVyKSA9PiAnISAnICsgbGV0dGVyLnRvVXBwZXJDYXNlKCkpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBwYXJhZ3JhcGggc3RhcnRzIHdpdGggY2FwaXRhbCBsZXR0ZXJcbiAgICBpZiAocGFyYWdyYXBoLmxlbmd0aCA+IDApIHtcbiAgICAgIHBhcmFncmFwaCA9IHBhcmFncmFwaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcmFncmFwaC5zbGljZSgxKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRW5zdXJlIHBhcmFncmFwaCBlbmRzIHdpdGggcHJvcGVyIHB1bmN0dWF0aW9uXG4gICAgaWYgKHBhcmFncmFwaC5sZW5ndGggPiA1MCAmJiAhL1suIT9dJC8udGVzdChwYXJhZ3JhcGgudHJpbSgpKSkge1xuICAgICAgcGFyYWdyYXBoID0gcGFyYWdyYXBoLnRyaW0oKSArICcuJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHBhcmFncmFwaC50cmltKCk7XG4gIH1cblxuICAvKipcbiAgICogSW1wcm92ZSBzZW50ZW5jZSBmbG93IGFuZCByZWFkYWJpbGl0eVxuICAgKi9cbiAgaW1wcm92ZVNlbnRlbmNlRmxvdyh0ZXh0KSB7XG4gICAgLy8gU3BsaXQgaW50byBzZW50ZW5jZXNcbiAgICBsZXQgc2VudGVuY2VzID0gdGV4dC5zcGxpdCgvKD88PVsuIT9dKVxccysvKS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiB0aGlzLnNlbnRlbmNlTWluTGVuZ3RoKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgZHVwbGljYXRlIHNlbnRlbmNlc1xuICAgIGNvbnN0IHVuaXF1ZVNlbnRlbmNlcyA9IFtdO1xuICAgIGNvbnN0IHNlZW5TZW50ZW5jZXMgPSBuZXcgU2V0KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBzZW50ZW5jZSBvZiBzZW50ZW5jZXMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZW50ZW5jZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgICBpZiAoIXNlZW5TZW50ZW5jZXMuaGFzKG5vcm1hbGl6ZWQpICYmIHNlbnRlbmNlLnRyaW0oKS5sZW5ndGggPiB0aGlzLnNlbnRlbmNlTWluTGVuZ3RoKSB7XG4gICAgICAgIHNlZW5TZW50ZW5jZXMuYWRkKG5vcm1hbGl6ZWQpO1xuICAgICAgICB1bmlxdWVTZW50ZW5jZXMucHVzaChzZW50ZW5jZS50cmltKCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdW5pcXVlU2VudGVuY2VzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgcHJvcGVyIHBhcmFncmFwaCBicmVha3MgZm9yIGJldHRlciByZWFkYWJpbGl0eVxuICAgKi9cbiAgYWRkUGFyYWdyYXBoQnJlYWtzKHRleHQpIHtcbiAgICAvLyBTcGxpdCBsb25nIGJsb2NrcyBvZiB0ZXh0IGludG8gcmVhZGFibGUgcGFyYWdyYXBoc1xuICAgIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoLyg/PD1bLiE/XSlcXHMrLyk7XG4gICAgY29uc3QgcGFyYWdyYXBocyA9IFtdO1xuICAgIGxldCBjdXJyZW50UGFyYWdyYXBoID0gW107XG4gICAgbGV0IGN1cnJlbnRMZW5ndGggPSAwO1xuICAgIFxuICAgIGZvciAoY29uc3Qgc2VudGVuY2Ugb2Ygc2VudGVuY2VzKSB7XG4gICAgICBpZiAoY3VycmVudExlbmd0aCArIHNlbnRlbmNlLmxlbmd0aCA+IHRoaXMubWF4UGFyYWdyYXBoTGVuZ3RoICYmIGN1cnJlbnRQYXJhZ3JhcGgubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhZ3JhcGhzLnB1c2goY3VycmVudFBhcmFncmFwaC5qb2luKCcgJykpO1xuICAgICAgICBjdXJyZW50UGFyYWdyYXBoID0gW3NlbnRlbmNlXTtcbiAgICAgICAgY3VycmVudExlbmd0aCA9IHNlbnRlbmNlLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQYXJhZ3JhcGgucHVzaChzZW50ZW5jZSk7XG4gICAgICAgIGN1cnJlbnRMZW5ndGggKz0gc2VudGVuY2UubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoY3VycmVudFBhcmFncmFwaC5sZW5ndGggPiAwKSB7XG4gICAgICBwYXJhZ3JhcGhzLnB1c2goY3VycmVudFBhcmFncmFwaC5qb2luKCcgJykpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcGFyYWdyYXBocy5maWx0ZXIocCA9PiBwLnRyaW0oKS5sZW5ndGggPiA1MCkuam9pbignXFxuXFxuJyk7XG4gIH1cblxuICAvKipcbiAgICogRmluYWwgY2xlYW51cCBhbmQgZm9ybWF0dGluZ1xuICAgKi9cbiAgZmluYWxDbGVhbnVwKHRleHQpIHtcbiAgICAvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBtYXJrZG93biBhcnRpZmFjdHNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXFsuKj9cXF1cXCguKj9cXCkvZywgJycpOyAvLyBSZW1vdmUgbWFya2Rvd24gbGlua3NcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnJDEnKTsgLy8gUmVtb3ZlIGJvbGQgbWFya2Rvd25cbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnJDEnKTsgLy8gUmVtb3ZlIGl0YWxpYyBtYXJrZG93blxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL2AoLio/KWAvZywgJyQxJyk7IC8vIFJlbW92ZSBjb2RlIG1hcmtkb3duXG4gICAgXG4gICAgLy8gRml4IGNvbW1vbiBmb3JtYXR0aW5nIGlzc3Vlc1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKTsgLy8gTm9ybWFsaXplIGFsbCB3aGl0ZXNwYWNlXG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJyk7IC8vIE1heCAyIGxpbmUgYnJlYWtzXG4gICAgXG4gICAgLy8gUmVtb3ZlIGNvbW1vbiB3ZWJzaXRlIGZvb3RlciB0ZXh0XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvQWxsIHJpZ2h0cyByZXNlcnZlZC4qJC9naSwgJycpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL0NvcHlyaWdodC4qJC9naSwgJycpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBwcm9wZXIgcGFyYWdyYXBoIHNwYWNpbmdcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXG5cXG4rL2csICdcXG5cXG4nKTtcbiAgICBcbiAgICByZXR1cm4gdGV4dC50cmltKCk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgYW5kIGVuc3VyZSBtaW5pbXVtIGNvbnRlbnQgcXVhbGl0eVxuICAgKi9cbiAgdmFsaWRhdGVDb250ZW50KHRleHQsIHRpdGxlID0gJycpIHtcbiAgICAvLyBFbnN1cmUgbWluaW11bSBsZW5ndGhcbiAgICBpZiAodGV4dC5sZW5ndGggPCAyMDApIHtcbiAgICAgIHJldHVybiBudWxsOyAvLyBDb250ZW50IHRvbyBzaG9ydFxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgbWVhbmluZ2Z1bCBjb250ZW50IChub3QganVzdCBuYXZpZ2F0aW9uIG9yIGFkcylcbiAgICBjb25zdCBtZWFuaW5nZnVsV29yZHMgPSBbJ3NhaWQnLCAnYWNjb3JkaW5nJywgJ3JlcG9ydGVkJywgJ2Fubm91bmNlZCcsICdzdGF0ZWQnLCAnZXhwbGFpbmVkJywgJ3JldmVhbGVkJywgJ2NvbmZpcm1lZCcsICdzaG93cycsICdpbmRpY2F0ZXMnXTtcbiAgICBjb25zdCBoYXNNZWFuaW5nZnVsQ29udGVudCA9IG1lYW5pbmdmdWxXb3Jkcy5zb21lKHdvcmQgPT4gdGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHdvcmQpKTtcbiAgICBcbiAgICBpZiAoIWhhc01lYW5pbmdmdWxDb250ZW50ICYmIHRleHQubGVuZ3RoIDwgNTAwKSB7XG4gICAgICByZXR1cm4gbnVsbDsgLy8gTGlrZWx5IG5vdCBhIHJlYWwgYXJ0aWNsZVxuICAgIH1cbiAgICBcbiAgICAvLyBSZW1vdmUgdGl0bGUgcmVwZXRpdGlvbiBhdCB0aGUgYmVnaW5uaW5nXG4gICAgaWYgKHRpdGxlICYmIHRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRpdGxlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcodGl0bGUubGVuZ3RoKS50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBjb250ZW50IHN0YXJ0cyBwcm9wZXJseVxuICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHRleHQgPSB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zbGljZSgxKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRpdGxlIGZvciBiZXR0ZXIgZGlzcGxheVxuICAgKi9cbiAgZm9ybWF0VGl0bGUodGl0bGUpIHtcbiAgICBpZiAoIXRpdGxlKSByZXR1cm4gJyc7XG4gICAgXG4gICAgbGV0IGZvcm1hdHRlZCA9IHRoaXMuY2xlYW5VcmxFbmNvZGluZyh0aXRsZSk7XG4gICAgZm9ybWF0dGVkID0gdGhpcy5yZW1vdmVVbndhbnRlZEVsZW1lbnRzKGZvcm1hdHRlZCk7XG4gICAgZm9ybWF0dGVkID0gZm9ybWF0dGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGNvbW1vbiBwcmVmaXhlcy9zdWZmaXhlcyB0aGF0IG1pZ2h0IGJlIGFydGlmYWN0c1xuICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKC9eKC4qPylcXHMqWy3igJN8XVxccyooLiopJC8sICckMScpO1xuICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKC9cXC5cXC5cXC4kLywgJycpO1xuICAgIFxuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN1bW1hcnkgZm9yIGJldHRlciBkaXNwbGF5XG4gICAqL1xuICBmb3JtYXRTdW1tYXJ5KHN1bW1hcnksIG1heExlbmd0aCA9IDMwMCkge1xuICAgIGlmICghc3VtbWFyeSB8fCB0eXBlb2Ygc3VtbWFyeSAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcbiAgICBcbiAgICBsZXQgZm9ybWF0dGVkID0gdGhpcy5jbGVhblVybEVuY29kaW5nKHN1bW1hcnkpO1xuICAgIGZvcm1hdHRlZCA9IHRoaXMucmVtb3ZlVW53YW50ZWRFbGVtZW50cyhmb3JtYXR0ZWQpO1xuICAgIGZvcm1hdHRlZCA9IHRoaXMubm9ybWFsaXplU3BhY2luZyhmb3JtYXR0ZWQpO1xuICAgIFxuICAgIC8vIEVuc3VyZSB3ZSBoYXZlIGNvbnRlbnQgYWZ0ZXIgY2xlYW5pbmdcbiAgICBpZiAoIWZvcm1hdHRlZCB8fCBmb3JtYXR0ZWQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnVuY2F0ZSBpZiB0b28gbG9uZ1xuICAgIGlmIChmb3JtYXR0ZWQubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgICBjb25zdCB0cnVuY2F0ZWQgPSBmb3JtYXR0ZWQuc3Vic3RyaW5nKDAsIG1heExlbmd0aCk7XG4gICAgICBjb25zdCBsYXN0U2VudGVuY2UgPSB0cnVuY2F0ZWQubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgIGlmIChsYXN0U2VudGVuY2UgPiBtYXhMZW5ndGggKiAwLjcpIHtcbiAgICAgICAgZm9ybWF0dGVkID0gdHJ1bmNhdGVkLnN1YnN0cmluZygwLCBsYXN0U2VudGVuY2UgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm1hdHRlZCA9IHRydW5jYXRlZC50cmltKCkgKyAnLi4uJztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0ZXh0IGlzIHByaW1hcmlseSBBcmFiaWNcbiAgICovXG4gIGlzQXJhYmljVGV4dCh0ZXh0KSB7XG4gICAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIGNvbnN0IGFyYWJpY1JlZ2V4ID0gL1tcXHUwNjAwLVxcdTA2RkZcXHUwNzUwLVxcdTA3N0ZcXHUwOEEwLVxcdTA4RkZcXHVGQjUwLVxcdUZERkZcXHVGRTcwLVxcdUZFRkZdLztcbiAgICBjb25zdCBhcmFiaWNDaGFycyA9IHRleHQubWF0Y2goYXJhYmljUmVnZXgpO1xuICAgIHJldHVybiBhcmFiaWNDaGFycyAmJiBhcmFiaWNDaGFycy5sZW5ndGggPiB0ZXh0Lmxlbmd0aCAqIDAuMztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgY29udGVudCBzcGVjaWZpY2FsbHkgZm9yIEFyYWJpYyB0ZXh0XG4gICAqL1xuICBmb3JtYXRBcmFiaWNDb250ZW50KGNvbnRlbnQpIHtcbiAgICBsZXQgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRBcnRpY2xlQ29udGVudChjb250ZW50KTtcbiAgICBcbiAgICAvLyBBZGQgUlRMIGRpcmVjdGlvbiBoaW50IGZvciBBcmFiaWMgY29udGVudFxuICAgIGlmICh0aGlzLmlzQXJhYmljVGV4dChmb3JtYXR0ZWQpKSB7XG4gICAgICAvLyBFbnN1cmUgcHJvcGVyIEFyYWJpYyBzcGFjaW5nXG4gICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvXFx1MjAwQy9nLCAnJyk7IC8vIFJlbW92ZSB6ZXJvLXdpZHRoIG5vbi1qb2luZXJzXG4gICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvXFx1MjAwRC9nLCAnJyk7IC8vIFJlbW92ZSB6ZXJvLXdpZHRoIGpvaW5lcnNcbiAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKC9bXFx1MDYwMC1cXHUwNkZGXVxccysoPz1bXFx1MDYwMC1cXHUwNkZGXSkvZywgKG1hdGNoKSA9PiB7XG4gICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSByZWFkaW5nIHRpbWUgZXN0aW1hdGVcbiAgICovXG4gIGNhbGN1bGF0ZVJlYWRpbmdUaW1lKGNvbnRlbnQsIHdvcmRzUGVyTWludXRlID0gMjAwKSB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gMTtcbiAgICBcbiAgICBjb25zdCBjbGVhbkNvbnRlbnQgPSB0aGlzLmZvcm1hdEFydGljbGVDb250ZW50KGNvbnRlbnQpO1xuICAgIFxuICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIGZvcm1hdEFydGljbGVDb250ZW50IHJldHVybnMgbnVsbFxuICAgIGlmICghY2xlYW5Db250ZW50KSB7XG4gICAgICAvLyBGYWxsYmFjayB0byB1c2luZyBvcmlnaW5hbCBjb250ZW50IGZvciB3b3JkIGNvdW50XG4gICAgICBjb25zdCB3b3JkQ291bnQgPSBjb250ZW50LnNwbGl0KC9cXHMrLykuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKS5sZW5ndGg7XG4gICAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHdvcmRDb3VudCAvIHdvcmRzUGVyTWludXRlKSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHdvcmRDb3VudCA9IGNsZWFuQ29udGVudC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCkubGVuZ3RoO1xuICAgIFxuICAgIHJldHVybiBNYXRoLm1heCgxLCBNYXRoLmNlaWwod29yZENvdW50IC8gd29yZHNQZXJNaW51dGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRoZSBmaXJzdCBtZWFuaW5nZnVsIHBhcmFncmFwaCBhcyBhIHByZXZpZXdcbiAgICovXG4gIGV4dHJhY3RQcmV2aWV3KGNvbnRlbnQsIG1heExlbmd0aCA9IDIwMCkge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuICcnO1xuICAgIFxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0QXJ0aWNsZUNvbnRlbnQoY29udGVudCk7XG4gICAgXG4gICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgZm9ybWF0QXJ0aWNsZUNvbnRlbnQgcmV0dXJucyBudWxsXG4gICAgaWYgKCFmb3JtYXR0ZWQpIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHVzaW5nIG9yaWdpbmFsIGNvbnRlbnRcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFN1bW1hcnkoY29udGVudC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoICogMiksIG1heExlbmd0aCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHBhcmFncmFwaHMgPSBmb3JtYXR0ZWQuc3BsaXQoJ1xcblxcbicpO1xuICAgIFxuICAgIGZvciAoY29uc3QgcGFyYWdyYXBoIG9mIHBhcmFncmFwaHMpIHtcbiAgICAgIGlmIChwYXJhZ3JhcGgudHJpbSgpLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFN1bW1hcnkocGFyYWdyYXBoLCBtYXhMZW5ndGgpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRTdW1tYXJ5KGZvcm1hdHRlZCwgbWF4TGVuZ3RoKTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5jb25zdCBjb250ZW50Rm9ybWF0dGVyID0gbmV3IENvbnRlbnRGb3JtYXR0ZXIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENvbnRlbnRGb3JtYXR0ZXIsXG4gIGNvbnRlbnRGb3JtYXR0ZXIsXG4gIFxuICAvLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgZWFzeSBpbXBvcnRcbiAgZm9ybWF0Q29udGVudDogKGNvbnRlbnQpID0+IGNvbnRlbnRGb3JtYXR0ZXIuZm9ybWF0QXJ0aWNsZUNvbnRlbnQoY29udGVudCksXG4gIGZvcm1hdFRpdGxlOiAodGl0bGUpID0+IGNvbnRlbnRGb3JtYXR0ZXIuZm9ybWF0VGl0bGUodGl0bGUpLCAgXG4gIGZvcm1hdFN1bW1hcnk6IChzdW1tYXJ5LCBtYXhMZW5ndGgpID0+IGNvbnRlbnRGb3JtYXR0ZXIuZm9ybWF0U3VtbWFyeShzdW1tYXJ5LCBtYXhMZW5ndGgpLFxuICBpc0FyYWJpY1RleHQ6ICh0ZXh0KSA9PiBjb250ZW50Rm9ybWF0dGVyLmlzQXJhYmljVGV4dCh0ZXh0KSxcbiAgY2FsY3VsYXRlUmVhZGluZ1RpbWU6IChjb250ZW50KSA9PiBjb250ZW50Rm9ybWF0dGVyLmNhbGN1bGF0ZVJlYWRpbmdUaW1lKGNvbnRlbnQpLFxuICBleHRyYWN0UHJldmlldzogKGNvbnRlbnQsIG1heExlbmd0aCkgPT4gY29udGVudEZvcm1hdHRlci5leHRyYWN0UHJldmlldyhjb250ZW50LCBtYXhMZW5ndGgpXG59OyAiXSwibmFtZXMiOlsiQ29udGVudEZvcm1hdHRlciIsImNvbnN0cnVjdG9yIiwicGFyYWdyYXBoTWluTGVuZ3RoIiwibWF4UGFyYWdyYXBoTGVuZ3RoIiwic2VudGVuY2VNaW5MZW5ndGgiLCJmb3JtYXRBcnRpY2xlQ29udGVudCIsImNvbnRlbnQiLCJ0aXRsZSIsInRyaW0iLCJsZW5ndGgiLCJmb3JtYXR0ZWQiLCJjbGVhblVybEVuY29kaW5nIiwicmVtb3ZlVW53YW50ZWRFbGVtZW50cyIsIm5vcm1hbGl6ZVNwYWNpbmciLCJmb3JtYXRQYXJhZ3JhcGhzIiwiaW1wcm92ZVNlbnRlbmNlRmxvdyIsImFkZFBhcmFncmFwaEJyZWFrcyIsImZpbmFsQ2xlYW51cCIsInZhbGlkYXRlQ29udGVudCIsImVycm9yIiwiY29uc29sZSIsInRleHQiLCJyZXBsYWNlIiwiZW50aXRpZXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImVudGl0eSIsIlJlZ0V4cCIsInVud2FudGVkUGF0dGVybnMiLCJwYXR0ZXJuIiwidW53YW50ZWRVcmxzIiwicGFyYWdyYXBocyIsInNwbGl0IiwibWFwIiwicCIsImZpbHRlciIsImZvcm1hdFNpbmdsZVBhcmFncmFwaCIsIm1lcmdlZFBhcmFncmFwaHMiLCJpIiwiY3VycmVudCIsIm5leHQiLCJwdXNoIiwiam9pbiIsInBhcmFncmFwaCIsIm1hdGNoIiwibGV0dGVyIiwidG9VcHBlckNhc2UiLCJjaGFyQXQiLCJzbGljZSIsInRlc3QiLCJzZW50ZW5jZXMiLCJzIiwidW5pcXVlU2VudGVuY2VzIiwic2VlblNlbnRlbmNlcyIsIlNldCIsInNlbnRlbmNlIiwibm9ybWFsaXplZCIsInRvTG93ZXJDYXNlIiwiaGFzIiwiYWRkIiwiY3VycmVudFBhcmFncmFwaCIsImN1cnJlbnRMZW5ndGgiLCJtZWFuaW5nZnVsV29yZHMiLCJoYXNNZWFuaW5nZnVsQ29udGVudCIsInNvbWUiLCJ3b3JkIiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwiZm9ybWF0VGl0bGUiLCJmb3JtYXRTdW1tYXJ5Iiwic3VtbWFyeSIsIm1heExlbmd0aCIsInRydW5jYXRlZCIsImxhc3RTZW50ZW5jZSIsImxhc3RJbmRleE9mIiwiaXNBcmFiaWNUZXh0IiwiYXJhYmljUmVnZXgiLCJhcmFiaWNDaGFycyIsImZvcm1hdEFyYWJpY0NvbnRlbnQiLCJjYWxjdWxhdGVSZWFkaW5nVGltZSIsIndvcmRzUGVyTWludXRlIiwiY2xlYW5Db250ZW50Iiwid29yZENvdW50IiwiTWF0aCIsIm1heCIsImNlaWwiLCJleHRyYWN0UHJldmlldyIsImNvbnRlbnRGb3JtYXR0ZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiZm9ybWF0Q29udGVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils/contentFormatter.js\n");

/***/ }),

/***/ "(api)/./pages/api/news/index.js":
/*!*********************************!*\
  !*** ./pages/api/news/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nconst { getDatabase } = __webpack_require__(/*! ../../../lib/services/database */ \"(api)/./lib/services/database.js\");\nconst { appInitializer } = __webpack_require__(/*! ../../../lib/services/app-initializer */ \"(api)/./lib/services/app-initializer.js\");\n// Helper function to detect Arabic text - updated to be less aggressive\nfunction containsArabic(text) {\n    if (!text) return false;\n    // Arabic Unicode range: U+0600 to U+06FF and U+0750 to U+077F\n    const arabicRegex = /[\\u0600-\\u06FF\\u0750-\\u077F]/g;\n    const arabicMatches = text.match(arabicRegex);\n    // Only consider it Arabic if more than 30% of the content is Arabic characters\n    if (!arabicMatches) return false;\n    const arabicRatio = arabicMatches.length / text.length;\n    return arabicRatio > 0.3;\n}\n// Helper function to check if content is primarily English\nfunction isPrimarilyEnglish(text) {\n    if (!text || typeof text !== \"string\" || text.length < 50) return true; // Assume short text is English\n    // Check for English words and patterns\n    const englishWords = text.match(/\\b[a-zA-Z]+\\b/g);\n    const totalWords = text.split(/\\s+/).length;\n    if (!englishWords || totalWords === 0) return false;\n    const englishRatio = englishWords.length / totalWords;\n    return englishRatio > 0.7; // More than 70% English words\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const db = getDatabase();\n        // Auto-initialize database if needed (ensures website always has content)\n        const appStatus = await appInitializer.isAppReady();\n        if (!appStatus.ready || appStatus.articleCount < 5) {\n            console.log(\"\\uD83D\\uDCCA Database needs content, auto-initializing...\");\n            await appInitializer.initialize();\n        }\n        const { page = 1, limit = 20, category, country, region, search, sortBy = \"published_at\", sortOrder = \"desc\", importance, sentiment, source, language = \"en\" // Default to English only\n         } = req.query;\n        // Build filter object\n        const filters = {};\n        if (category) {\n            filters.category = category;\n        }\n        if (country) {\n            filters.country = country;\n        }\n        if (region) {\n            filters.region = region;\n        }\n        if (importance) {\n            filters.importance = parseInt(importance);\n        }\n        if (sentiment) {\n            filters.sentiment = sentiment;\n        }\n        if (source) {\n            filters.source = source;\n        }\n        if (search) {\n            filters.search = search;\n        }\n        // Add language filter - only return English articles\n        filters.language = language;\n        // Add pagination\n        const pageNum = parseInt(page);\n        const limitNum = parseInt(limit);\n        filters.limit = limitNum;\n        filters.offset = (pageNum - 1) * limitNum;\n        filters.sortBy = sortBy;\n        filters.sortOrder = sortOrder;\n        // Execute queries\n        const [articles, totalCount] = await Promise.all([\n            db.getArticles(filters),\n            db.countArticles(filters)\n        ]);\n        // Additional filtering to remove any Arabic content that might have slipped through\n        const englishOnlyArticles = articles.filter((article)=>{\n            // Use the improved English detection instead of just checking for Arabic\n            const titleIsEnglish = isPrimarilyEnglish(article.title);\n            const summaryIsEnglish = isPrimarilyEnglish(article.summary);\n            // Keep articles that have primarily English title and summary\n            return titleIsEnglish && summaryIsEnglish;\n        });\n        // Remove content for list view to reduce payload size\n        const articlesWithoutContent = englishOnlyArticles.map((article)=>{\n            const { content, ...articleWithoutContent } = article;\n            return articleWithoutContent;\n        });\n        const totalPages = Math.ceil(englishOnlyArticles.length / limitNum);\n        res.status(200).json({\n            success: true,\n            data: {\n                articles: articlesWithoutContent,\n                pagination: {\n                    currentPage: pageNum,\n                    totalPages,\n                    totalCount: englishOnlyArticles.length,\n                    hasNextPage: pageNum < totalPages,\n                    hasPrevPage: pageNum > 1\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching news:\", error);\n        res.status(500).json({\n            success: false,\n            message: \"Error fetching news articles\",\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbmV3cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTSxFQUFFQSxXQUFXLEVBQUUsR0FBR0MsbUJBQU9BLENBQUM7QUFDaEMsTUFBTSxFQUFFQyxjQUFjLEVBQUUsR0FBR0QsbUJBQU9BLENBQUM7QUFFbkMsd0VBQXdFO0FBQ3hFLFNBQVNFLGVBQWVDLElBQUk7SUFDMUIsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFDbEIsOERBQThEO0lBQzlELE1BQU1DLGNBQWM7SUFDcEIsTUFBTUMsZ0JBQWdCRixLQUFLRyxLQUFLLENBQUNGO0lBRWpDLCtFQUErRTtJQUMvRSxJQUFJLENBQUNDLGVBQWUsT0FBTztJQUUzQixNQUFNRSxjQUFjRixjQUFjRyxNQUFNLEdBQUdMLEtBQUtLLE1BQU07SUFDdEQsT0FBT0QsY0FBYztBQUN2QjtBQUVBLDJEQUEyRDtBQUMzRCxTQUFTRSxtQkFBbUJOLElBQUk7SUFDOUIsSUFBSSxDQUFDQSxRQUFRLE9BQU9BLFNBQVMsWUFBWUEsS0FBS0ssTUFBTSxHQUFHLElBQUksT0FBTyxNQUFNLCtCQUErQjtJQUV2Ryx1Q0FBdUM7SUFDdkMsTUFBTUUsZUFBZVAsS0FBS0csS0FBSyxDQUFDO0lBQ2hDLE1BQU1LLGFBQWFSLEtBQUtTLEtBQUssQ0FBQyxPQUFPSixNQUFNO0lBRTNDLElBQUksQ0FBQ0UsZ0JBQWdCQyxlQUFlLEdBQUcsT0FBTztJQUU5QyxNQUFNRSxlQUFlSCxhQUFhRixNQUFNLEdBQUdHO0lBQzNDLE9BQU9FLGVBQWUsS0FBSyw4QkFBOEI7QUFDM0Q7QUFFZSxlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXFCO0lBQzlEO0lBRUEsSUFBSTtRQUNGLE1BQU1DLEtBQUt0QjtRQUVYLDBFQUEwRTtRQUMxRSxNQUFNdUIsWUFBWSxNQUFNckIsZUFBZXNCLFVBQVU7UUFDakQsSUFBSSxDQUFDRCxVQUFVRSxLQUFLLElBQUlGLFVBQVVHLFlBQVksR0FBRyxHQUFHO1lBQ2xEQyxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNMUIsZUFBZTJCLFVBQVU7UUFDakM7UUFFQSxNQUFNLEVBQ0pDLE9BQU8sQ0FBQyxFQUNSQyxRQUFRLEVBQUUsRUFDVkMsUUFBUSxFQUNSQyxPQUFPLEVBQ1BDLE1BQU0sRUFDTkMsTUFBTSxFQUNOQyxTQUFTLGNBQWMsRUFDdkJDLFlBQVksTUFBTSxFQUNsQkMsVUFBVSxFQUNWQyxTQUFTLEVBQ1RDLE1BQU0sRUFDTkMsV0FBVyxLQUFLLDBCQUEwQjtRQUEzQixFQUNoQixHQUFHekIsSUFBSTBCLEtBQUs7UUFFYixzQkFBc0I7UUFDdEIsTUFBTUMsVUFBVSxDQUFDO1FBRWpCLElBQUlYLFVBQVU7WUFDWlcsUUFBUVgsUUFBUSxHQUFHQTtRQUNyQjtRQUVBLElBQUlDLFNBQVM7WUFDWFUsUUFBUVYsT0FBTyxHQUFHQTtRQUNwQjtRQUVBLElBQUlDLFFBQVE7WUFDVlMsUUFBUVQsTUFBTSxHQUFHQTtRQUNuQjtRQUVBLElBQUlJLFlBQVk7WUFDZEssUUFBUUwsVUFBVSxHQUFHTSxTQUFTTjtRQUNoQztRQUVBLElBQUlDLFdBQVc7WUFDYkksUUFBUUosU0FBUyxHQUFHQTtRQUN0QjtRQUVBLElBQUlDLFFBQVE7WUFDVkcsUUFBUUgsTUFBTSxHQUFHQTtRQUNuQjtRQUVBLElBQUlMLFFBQVE7WUFDVlEsUUFBUVIsTUFBTSxHQUFHQTtRQUNuQjtRQUVBLHFEQUFxRDtRQUNyRFEsUUFBUUYsUUFBUSxHQUFHQTtRQUVuQixpQkFBaUI7UUFDakIsTUFBTUksVUFBVUQsU0FBU2Q7UUFDekIsTUFBTWdCLFdBQVdGLFNBQVNiO1FBQzFCWSxRQUFRWixLQUFLLEdBQUdlO1FBQ2hCSCxRQUFRSSxNQUFNLEdBQUcsQ0FBQ0YsVUFBVSxLQUFLQztRQUNqQ0gsUUFBUVAsTUFBTSxHQUFHQTtRQUNqQk8sUUFBUU4sU0FBUyxHQUFHQTtRQUVwQixrQkFBa0I7UUFDbEIsTUFBTSxDQUFDVyxVQUFVQyxXQUFXLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1lBQy9DN0IsR0FBRzhCLFdBQVcsQ0FBQ1Q7WUFDZnJCLEdBQUcrQixhQUFhLENBQUNWO1NBQ2xCO1FBRUQsb0ZBQW9GO1FBQ3BGLE1BQU1XLHNCQUFzQk4sU0FBU08sTUFBTSxDQUFDQyxDQUFBQTtZQUMxQyx5RUFBeUU7WUFDekUsTUFBTUMsaUJBQWlCL0MsbUJBQW1COEMsUUFBUUUsS0FBSztZQUN2RCxNQUFNQyxtQkFBbUJqRCxtQkFBbUI4QyxRQUFRSSxPQUFPO1lBRTNELDhEQUE4RDtZQUM5RCxPQUFPSCxrQkFBa0JFO1FBQzNCO1FBRUEsc0RBQXNEO1FBQ3RELE1BQU1FLHlCQUF5QlAsb0JBQW9CUSxHQUFHLENBQUNOLENBQUFBO1lBQ3JELE1BQU0sRUFBRU8sT0FBTyxFQUFFLEdBQUdDLHVCQUF1QixHQUFHUjtZQUM5QyxPQUFPUTtRQUNUO1FBRUEsTUFBTUMsYUFBYUMsS0FBS0MsSUFBSSxDQUFDYixvQkFBb0I3QyxNQUFNLEdBQUdxQztRQUUxRDdCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJnRCxTQUFTO1lBQ1RDLE1BQU07Z0JBQ0pyQixVQUFVYTtnQkFDVlMsWUFBWTtvQkFDVkMsYUFBYTFCO29CQUNib0I7b0JBQ0FoQixZQUFZSyxvQkFBb0I3QyxNQUFNO29CQUN0QytELGFBQWEzQixVQUFVb0I7b0JBQ3ZCUSxhQUFhNUIsVUFBVTtnQkFDekI7WUFDRjtRQUNGO0lBRUYsRUFBRSxPQUFPNkIsT0FBTztRQUNkL0MsUUFBUStDLEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDekQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQmdELFNBQVM7WUFDVC9DLFNBQVM7WUFDVHFELE9BQU9BLE1BQU1yRCxPQUFPO1FBQ3RCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL211c2xpbS1uZXdzLWFnZ3JlZ2F0b3IvLi9wYWdlcy9hcGkvbmV3cy9pbmRleC5qcz82NWNhIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZ2V0RGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZScpO1xuY29uc3QgeyBhcHBJbml0aWFsaXplciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vbGliL3NlcnZpY2VzL2FwcC1pbml0aWFsaXplcicpO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZWN0IEFyYWJpYyB0ZXh0IC0gdXBkYXRlZCB0byBiZSBsZXNzIGFnZ3Jlc3NpdmVcbmZ1bmN0aW9uIGNvbnRhaW5zQXJhYmljKHRleHQpIHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gZmFsc2U7XG4gIC8vIEFyYWJpYyBVbmljb2RlIHJhbmdlOiBVKzA2MDAgdG8gVSswNkZGIGFuZCBVKzA3NTAgdG8gVSswNzdGXG4gIGNvbnN0IGFyYWJpY1JlZ2V4ID0gL1tcXHUwNjAwLVxcdTA2RkZcXHUwNzUwLVxcdTA3N0ZdL2c7XG4gIGNvbnN0IGFyYWJpY01hdGNoZXMgPSB0ZXh0Lm1hdGNoKGFyYWJpY1JlZ2V4KTtcbiAgXG4gIC8vIE9ubHkgY29uc2lkZXIgaXQgQXJhYmljIGlmIG1vcmUgdGhhbiAzMCUgb2YgdGhlIGNvbnRlbnQgaXMgQXJhYmljIGNoYXJhY3RlcnNcbiAgaWYgKCFhcmFiaWNNYXRjaGVzKSByZXR1cm4gZmFsc2U7XG4gIFxuICBjb25zdCBhcmFiaWNSYXRpbyA9IGFyYWJpY01hdGNoZXMubGVuZ3RoIC8gdGV4dC5sZW5ndGg7XG4gIHJldHVybiBhcmFiaWNSYXRpbyA+IDAuMztcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGNvbnRlbnQgaXMgcHJpbWFyaWx5IEVuZ2xpc2hcbmZ1bmN0aW9uIGlzUHJpbWFyaWx5RW5nbGlzaCh0ZXh0KSB7XG4gIGlmICghdGV4dCB8fCB0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycgfHwgdGV4dC5sZW5ndGggPCA1MCkgcmV0dXJuIHRydWU7IC8vIEFzc3VtZSBzaG9ydCB0ZXh0IGlzIEVuZ2xpc2hcbiAgXG4gIC8vIENoZWNrIGZvciBFbmdsaXNoIHdvcmRzIGFuZCBwYXR0ZXJuc1xuICBjb25zdCBlbmdsaXNoV29yZHMgPSB0ZXh0Lm1hdGNoKC9cXGJbYS16QS1aXStcXGIvZyk7XG4gIGNvbnN0IHRvdGFsV29yZHMgPSB0ZXh0LnNwbGl0KC9cXHMrLykubGVuZ3RoO1xuICBcbiAgaWYgKCFlbmdsaXNoV29yZHMgfHwgdG90YWxXb3JkcyA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICBcbiAgY29uc3QgZW5nbGlzaFJhdGlvID0gZW5nbGlzaFdvcmRzLmxlbmd0aCAvIHRvdGFsV29yZHM7XG4gIHJldHVybiBlbmdsaXNoUmF0aW8gPiAwLjc7IC8vIE1vcmUgdGhhbiA3MCUgRW5nbGlzaCB3b3Jkc1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGdldERhdGFiYXNlKCk7XG5cbiAgICAvLyBBdXRvLWluaXRpYWxpemUgZGF0YWJhc2UgaWYgbmVlZGVkIChlbnN1cmVzIHdlYnNpdGUgYWx3YXlzIGhhcyBjb250ZW50KVxuICAgIGNvbnN0IGFwcFN0YXR1cyA9IGF3YWl0IGFwcEluaXRpYWxpemVyLmlzQXBwUmVhZHkoKTtcbiAgICBpZiAoIWFwcFN0YXR1cy5yZWFkeSB8fCBhcHBTdGF0dXMuYXJ0aWNsZUNvdW50IDwgNSkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRGF0YWJhc2UgbmVlZHMgY29udGVudCwgYXV0by1pbml0aWFsaXppbmcuLi4nKTtcbiAgICAgIGF3YWl0IGFwcEluaXRpYWxpemVyLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBwYWdlID0gMSxcbiAgICAgIGxpbWl0ID0gMjAsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIGNvdW50cnksXG4gICAgICByZWdpb24sXG4gICAgICBzZWFyY2gsXG4gICAgICBzb3J0QnkgPSAncHVibGlzaGVkX2F0JyxcbiAgICAgIHNvcnRPcmRlciA9ICdkZXNjJyxcbiAgICAgIGltcG9ydGFuY2UsXG4gICAgICBzZW50aW1lbnQsXG4gICAgICBzb3VyY2UsXG4gICAgICBsYW5ndWFnZSA9ICdlbicgLy8gRGVmYXVsdCB0byBFbmdsaXNoIG9ubHlcbiAgICB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgLy8gQnVpbGQgZmlsdGVyIG9iamVjdFxuICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcblxuICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgZmlsdGVycy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIH1cblxuICAgIGlmIChjb3VudHJ5KSB7XG4gICAgICBmaWx0ZXJzLmNvdW50cnkgPSBjb3VudHJ5O1xuICAgIH1cblxuICAgIGlmIChyZWdpb24pIHtcbiAgICAgIGZpbHRlcnMucmVnaW9uID0gcmVnaW9uO1xuICAgIH1cblxuICAgIGlmIChpbXBvcnRhbmNlKSB7XG4gICAgICBmaWx0ZXJzLmltcG9ydGFuY2UgPSBwYXJzZUludChpbXBvcnRhbmNlKTtcbiAgICB9XG5cbiAgICBpZiAoc2VudGltZW50KSB7XG4gICAgICBmaWx0ZXJzLnNlbnRpbWVudCA9IHNlbnRpbWVudDtcbiAgICB9XG5cbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBmaWx0ZXJzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG5cbiAgICBpZiAoc2VhcmNoKSB7XG4gICAgICBmaWx0ZXJzLnNlYXJjaCA9IHNlYXJjaDtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGFuZ3VhZ2UgZmlsdGVyIC0gb25seSByZXR1cm4gRW5nbGlzaCBhcnRpY2xlc1xuICAgIGZpbHRlcnMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcblxuICAgIC8vIEFkZCBwYWdpbmF0aW9uXG4gICAgY29uc3QgcGFnZU51bSA9IHBhcnNlSW50KHBhZ2UpO1xuICAgIGNvbnN0IGxpbWl0TnVtID0gcGFyc2VJbnQobGltaXQpO1xuICAgIGZpbHRlcnMubGltaXQgPSBsaW1pdE51bTtcbiAgICBmaWx0ZXJzLm9mZnNldCA9IChwYWdlTnVtIC0gMSkgKiBsaW1pdE51bTtcbiAgICBmaWx0ZXJzLnNvcnRCeSA9IHNvcnRCeTtcbiAgICBmaWx0ZXJzLnNvcnRPcmRlciA9IHNvcnRPcmRlcjtcblxuICAgIC8vIEV4ZWN1dGUgcXVlcmllc1xuICAgIGNvbnN0IFthcnRpY2xlcywgdG90YWxDb3VudF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBkYi5nZXRBcnRpY2xlcyhmaWx0ZXJzKSxcbiAgICAgIGRiLmNvdW50QXJ0aWNsZXMoZmlsdGVycylcbiAgICBdKTtcblxuICAgIC8vIEFkZGl0aW9uYWwgZmlsdGVyaW5nIHRvIHJlbW92ZSBhbnkgQXJhYmljIGNvbnRlbnQgdGhhdCBtaWdodCBoYXZlIHNsaXBwZWQgdGhyb3VnaFxuICAgIGNvbnN0IGVuZ2xpc2hPbmx5QXJ0aWNsZXMgPSBhcnRpY2xlcy5maWx0ZXIoYXJ0aWNsZSA9PiB7XG4gICAgICAvLyBVc2UgdGhlIGltcHJvdmVkIEVuZ2xpc2ggZGV0ZWN0aW9uIGluc3RlYWQgb2YganVzdCBjaGVja2luZyBmb3IgQXJhYmljXG4gICAgICBjb25zdCB0aXRsZUlzRW5nbGlzaCA9IGlzUHJpbWFyaWx5RW5nbGlzaChhcnRpY2xlLnRpdGxlKTtcbiAgICAgIGNvbnN0IHN1bW1hcnlJc0VuZ2xpc2ggPSBpc1ByaW1hcmlseUVuZ2xpc2goYXJ0aWNsZS5zdW1tYXJ5KTtcbiAgICAgIFxuICAgICAgLy8gS2VlcCBhcnRpY2xlcyB0aGF0IGhhdmUgcHJpbWFyaWx5IEVuZ2xpc2ggdGl0bGUgYW5kIHN1bW1hcnlcbiAgICAgIHJldHVybiB0aXRsZUlzRW5nbGlzaCAmJiBzdW1tYXJ5SXNFbmdsaXNoO1xuICAgIH0pO1xuXG4gICAgLy8gUmVtb3ZlIGNvbnRlbnQgZm9yIGxpc3QgdmlldyB0byByZWR1Y2UgcGF5bG9hZCBzaXplXG4gICAgY29uc3QgYXJ0aWNsZXNXaXRob3V0Q29udGVudCA9IGVuZ2xpc2hPbmx5QXJ0aWNsZXMubWFwKGFydGljbGUgPT4ge1xuICAgICAgY29uc3QgeyBjb250ZW50LCAuLi5hcnRpY2xlV2l0aG91dENvbnRlbnQgfSA9IGFydGljbGU7XG4gICAgICByZXR1cm4gYXJ0aWNsZVdpdGhvdXRDb250ZW50O1xuICAgIH0pO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChlbmdsaXNoT25seUFydGljbGVzLmxlbmd0aCAvIGxpbWl0TnVtKTtcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFydGljbGVzOiBhcnRpY2xlc1dpdGhvdXRDb250ZW50LFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VOdW0sXG4gICAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgICB0b3RhbENvdW50OiBlbmdsaXNoT25seUFydGljbGVzLmxlbmd0aCxcbiAgICAgICAgICBoYXNOZXh0UGFnZTogcGFnZU51bSA8IHRvdGFsUGFnZXMsXG4gICAgICAgICAgaGFzUHJldlBhZ2U6IHBhZ2VOdW0gPiAxXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5ld3M6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0Vycm9yIGZldGNoaW5nIG5ld3MgYXJ0aWNsZXMnLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiZ2V0RGF0YWJhc2UiLCJyZXF1aXJlIiwiYXBwSW5pdGlhbGl6ZXIiLCJjb250YWluc0FyYWJpYyIsInRleHQiLCJhcmFiaWNSZWdleCIsImFyYWJpY01hdGNoZXMiLCJtYXRjaCIsImFyYWJpY1JhdGlvIiwibGVuZ3RoIiwiaXNQcmltYXJpbHlFbmdsaXNoIiwiZW5nbGlzaFdvcmRzIiwidG90YWxXb3JkcyIsInNwbGl0IiwiZW5nbGlzaFJhdGlvIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGIiLCJhcHBTdGF0dXMiLCJpc0FwcFJlYWR5IiwicmVhZHkiLCJhcnRpY2xlQ291bnQiLCJjb25zb2xlIiwibG9nIiwiaW5pdGlhbGl6ZSIsInBhZ2UiLCJsaW1pdCIsImNhdGVnb3J5IiwiY291bnRyeSIsInJlZ2lvbiIsInNlYXJjaCIsInNvcnRCeSIsInNvcnRPcmRlciIsImltcG9ydGFuY2UiLCJzZW50aW1lbnQiLCJzb3VyY2UiLCJsYW5ndWFnZSIsInF1ZXJ5IiwiZmlsdGVycyIsInBhcnNlSW50IiwicGFnZU51bSIsImxpbWl0TnVtIiwib2Zmc2V0IiwiYXJ0aWNsZXMiLCJ0b3RhbENvdW50IiwiUHJvbWlzZSIsImFsbCIsImdldEFydGljbGVzIiwiY291bnRBcnRpY2xlcyIsImVuZ2xpc2hPbmx5QXJ0aWNsZXMiLCJmaWx0ZXIiLCJhcnRpY2xlIiwidGl0bGVJc0VuZ2xpc2giLCJ0aXRsZSIsInN1bW1hcnlJc0VuZ2xpc2giLCJzdW1tYXJ5IiwiYXJ0aWNsZXNXaXRob3V0Q29udGVudCIsIm1hcCIsImNvbnRlbnQiLCJhcnRpY2xlV2l0aG91dENvbnRlbnQiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJzdWNjZXNzIiwiZGF0YSIsInBhZ2luYXRpb24iLCJjdXJyZW50UGFnZSIsImhhc05leHRQYWdlIiwiaGFzUHJldlBhZ2UiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/news/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();